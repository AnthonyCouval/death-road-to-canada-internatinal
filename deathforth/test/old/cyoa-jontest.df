uses base.df
uses charfilt.df
uses charstats.df
uses road.df

cyoa{ road{

// Dentist

// Slightly changed the structure of all below to the new stuff. There's cyoa-choice: to start a choice instead of just doing : , and cyoa: for starting off a cyoa. Both do a lot of little shortcut things, like you no longer need to necessarily use cicon more than once, and you no longer need to use cyoa-start.

// Note that words you make to check things or add optional text to the main text of a new window do not use cyoa-choice. Use one cyoa-choice per "fenetre".

// Also there's words for pronouns that change based on the correct grammar of the situation. che - picks the chosen character and then uses "il" or "elle", depending. 
// Search for "xhis" in cyoa.df for a list


: cardJ4-mcheck 
	medicalroll if
		($ cname .. " connaissait vraiment ce quil faisait. En utilisant les outils et les fournitures medicales disponibles, " .. che .. " a pu tirer la molaire de maniere propre et avec relativement peu de douleur " $) cyoa-text! goodfx
		medical++ 
	then;
	
		($ cname .. " avait beaucoup de mal. Lextraction dentaire etait sale, maladroite et douloureuse. De plus, " .. che .. " a tire la mauvaise molaire et a du le faire a nouveau. " $) cyoa-text! bitefx ouch--
		
	// Added an extra line below for dying from tooth extraction.

	dead? if
		+cr ($ "Apres avoir tire la deuxieme molaire " .. cname .. " on entendit dire " .. "OUAI MERDE CET APPORT DE Bruit" pbold .. " et ensuite " .. che .. "  est mort spontanement." $) +text
	then
	
;

cyoa-choice: cardJ4-dentist cardJ4-mcheck medicalREV ;

// Expanded this to show that you can split up the text. cyoa-text! for main bodies of text at the top of the window, +text to add new lines below the main text, +cr to create a line break for spacing. Also did this in the above medical check, to a lesser extent.

: cardJ4-mecheck 
	mechanicroll if
		 ($ "Utilisant leffet de levier ajoute, " .. che .. "  claque la portiere de la voiture, arrachant proprement la dent." $) +text goodfx
		mechanic++ 
	then;
	
		($ "Mal prepare a la force soudaine du claquement de la portiere, " .. che .. "  est tire vers la voiture et heurte " .. chis .. "  la tete contre la portiere. " $) +text bitefx ouch--

// Death flavor text added.
		
	dead? if
		+cr ($ "Ce scenario exact etait en fait un moyen assez courant de mourir avant lapocalypse zombie. Ces accidents ont ete tenus a lecart des nouvelles en raison de " .. "GRANDES ENTREPRISES AUTOMOBILES" rbold .. "." $) +text
	then
;

cyoa-choice: cardJ4-mechanical
	($ cname .. ", sinspirant de vieilles emissions de dessins animes, decide dattacher " .. chis .. "  dent a la portiere de la voiture." $) cyoa-text! 
		+cr cardJ4-mecheck mechanicREV
;

: cardJ4-scheck 
	cpet? if
		($ cname .. "  essaie de se debarrasser de la dent cassee en mordant une pierre. Quelques dents tombent et la douleur est atroce. Mais au moins la mauvaise dent est tombee aussi." $) cyoa-text! badfx
		nonfatal if
			ouch--
		then morale3- attitude--
	then;
	strengthroll if
		($ cname .. "  attrape une paire de pinces et se met au travail, tirant la dent aussi fort que possible. En utilisant uniquement sa volonte pour lutter contre la douleur, " .. che .. "  enleve la dent rapidement et avec etonnamment peu de problemes." $) cyoa-text! goodfx
		strength++ 
	then;
		($ cname .. " ' attrape une paire de pinces et se met au travail. L'extraction ne se passe pas bien. Apres beaucoup de douleur et de sang la dent finit par sortir." $) cyoa-text! bitefx ouch2-

// Added extra commentary from dying from plier surgery.		
		
		dead? if
			+cr ($ "Certainement " .. cname .. " moult souffre de cela." $) +text
		then
		
;

cyoa-choice: cardJ4-force cardJ4-scheck strengthREV ;

cyoa: cardJ4-test
	"Ma Hooth" cyoa-title!
	choosehuman cicon
	($ cname .. "  a une douleur dentaire presque handicapante. Sans acces aux outils de precision necessaires la seule option est de tirer la dents " .. cHe .. " pese les options actuelles." $) cyoa-text! basic-tone
	
		choice( "Faire sortir !" )choice: cardJ4-force
		cnotpet? if
			choice( "Jetais autrefois un dentiste!" )choice: cardJ4-dentist
			choice( "Jai vu cela une fois dans un dessin anime!" )choice: cardJ4-mechanical
		then
;

// END of Dentist

// Radio Repair

// Not many changes here except cleaning up the words. cyoa-text-cr replaced with +cr, cyoa-text-append replaced with +text, cyoa: added and the words it makes obsolete taken out.

// someone .colourname was also replaced with "nomdedepersonne" and soloer .colourname was replaced with "nomsoloname", search for either in cyoa.df

: cardJ2-jerk ($ cname .. " Retire le lecteur CD et le jette par la fenetre." $) +text
	temperREV morale++
;
: cardJ2-pumped ($ cname .. " Caine des disques, arretant la musique." $) +text
	strengthREV	strength++ morale++
;
cyoa: cardJ2-test ($ someone .colourname .. " senerve quand le lecteur CD de la voiture se bloque, jouant la meme chanson encore et encore." $) cyoa-text! +cr 1 cyoa-image-icon! 4 500 tone 

	strongest-pass
	if strongest choosechar cardJ2-pumped then;

	most-ahole
	if choosechar cardJ2-jerk then;

	solo if ($ soloname .. " " $) +text then;

	"Le groupe decide de leteindre pour le moment puis essayer de la reparer plus tard." +text
;

// END Radio Repair

// Shop Smart

// The usual cleanups from the above two, see if you can spot the difference.

 cyoa-choice: cardJ1-search ($ Thegroup .. "  trouve une petite quantite de munitions." $) cyoa-text! ammosearch1 goodfx ;

// Below is still a cyoa-choice because it's a result with its own window. cicon isn't necessary because it's built into cyoa-choice: if a character was picked before. If no character is picked by your button press, it usually shows cyoaicon.

cyoa-choice: cardJ1-picked
	"Lecture Pluie Arc en ciel" cyoa-title!
	
	($ cname .. " "  $) cyoa-text! goodfx

	shootingREV shooting++
;

// The old method involving 3 words to do this was replaced with a way more efficient thing... ' <cyoa-choice> cyoa-team-choice .. search for cyoa-team-choice in cyoa.df

cyoa-choice: cardJ1-one "Qui devrais je apporter?" cyoa-text! 
	' cardJ1-picked cyoa-team-choice 
;

: cardJ1-spray 40 %chance if .shooting++ else team-attacked then ;

// cyoa-bad-dialog and $cyoa-ok-dialog are pretty much obsolete now, just use cyoa-text! most of the time along with badfx, goodfx, bitefx, whatever else we add.

cyoa-choice: cardJ1-group "Un membre du groupe prend un mannequin pour un zombie et tire dessus. Pendant le tumultueux tout le groupe tire. Cetait completement chaotique. A la fin aucun mannequin ne restait debout. " cyoa-text! badfx
	
	// Note syntax: ' <single word, make shortcut if more> foreach-team-char
	
	' cardJ1-spray foreach-team-char 
	someone team-attacked 
;

cyoa: cardJ1-test
	"Magasiner Intelligemment" cyoa-title!
	0 to cyoaicon cyoaicon
	"'Vous trouvez une boutique de loisirs sportifs. Elle semble avoir ete deja pillee mais il y a encore une chance qu'on ait laisse quelque chose." cyoa-text! basic-tone
		
	choice( "Regardez rapidement chercher des munitions" )choice: cardJ1-search
	
// Changed choice( below to charchoice( , which shows a picture of their face and has the choosechar stuff after built in. Compare to your old version. Also, with charchoice showing their name is automatic, any text you put in the "" is added after.
	
	solo if
		soloer charchoice( " " )choice: cardJ1-picked
	then;
	choice( "Prenez tout le monde" )choice: cardJ1-group
	choice( "Prenez une autre personne" )choice: cardJ1-one
;

// END Shop Smart


// Uncomment the below as you want, to overwrite the hotkeys from cyoa-example-7types

// ' cardJ1-test 1 hotkey!
// ' cardJ2-test 2 hotkey!
// ' cardJ7-test 3 hotkey!
' cardJ4-test 4 hotkey!
// ' goodfx 5 hotkey!
// ' bitefx 6 hotkey!
// ' goodfx 7 hotkey!
// ' card-deleteme 8 hotkey!
' goodfx 9 hotkey!

} }


