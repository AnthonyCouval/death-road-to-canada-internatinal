uses base.df
uses charfilt.df
uses charstats.df
uses road.df

cyoa{ road{

// Dentist

// Slightly changed the structure of all below to the new stuff. There's cyoa-choice: to start a choice instead of just doing : , and cyoa: for starting off a cyoa. Both do a lot of little shortcut things, like you no longer need to necessarily use cicon more than once, and you no longer need to use cyoa-start.

// Note that words you make to check things or add optional text to the main text of a new window do not use cyoa-choice. Use one cyoa-choice per "fenetre".

// Also there's words for pronouns that change based on the correct grammar of the situation. che - picks the chosen character and then uses "il" or "elle", depending. 
// Search for "mange" in cyoa.df for a list


: cardJ4-mcheck 
	medicalroll if
		($ cname .. " ils avaient reellement la maitrise de leurs taches. en utilisant les outils et les fournitures medicales a leur disposition, ils ont pu faire preuve d'une grande efficacite. " .. che .. " puisable de sortir nettement et avec un peu de douleur relatif la dents. " $) cyoa-text! goodfx
		medical++ 
	then;
	
		($ cname .. " eut des ennuis a grande echelle. l'extraction dentaire s'est averee geneuse, maladroite et douloureuse. pour aggraver les choses, " .. che .. " a eu mauvais raison de tirer la mauvaise dent et j'en ai du refaire une nouvelle. " $) cyoa-text! bitefx ouch--
		
	// Added an extra line below for dying from tooth extraction.

	dead? if
		+cr ($ "Apres avoir tire la deuxieme dent. " .. cname .. " a dit : a ete entendu hurler " .. "C'EST LA MERDE, JE VAIS PRENDRE CELA A LA GUEULE." pbold .. " et puis... " .. che .. " est decede de maniere spontanee." $) +text
	then
	
;

cyoa-choice: cardJ4-dentist cardJ4-mcheck medicalREV ;

// Expanded this to show that you can split up the text. cyoa-text! for main bodies of text at the top of the window, +text to add new lines below the main text, +cr to create a line break for spacing. Also did this in the above medical check, to a lesser extent.

: cardJ4-mecheck 
	mechanicroll if
		 ($ "En utilisant l'avantage supplementaire : " .. che .. " ferme violemment la porte de la voiture, extrayant nettement la dents." $) +text goodfx
		mechanic++ 
	then;
	
		($ "Sans preparation pour la brusque poussee de la porte qui s'est fermee brutalement, " .. che .. " est tire vers la voiture et heurte " .. chis .. " tete contre la porte. " $) +text bitefx ouch--

// Death flavor text added.
		
	dead? if
		+cr ($ "Ceci etait effectivement une situation courante avant l'apocalypse zombie pour deceder. ces accidents n'ont jamais fait la une a cause de : " .. "LES GRANDES ENTREPRISES AUTOMOBILES" rbold .. "." $) +text
	then
;

cyoa-choice: cardJ4-mechanical
	($ cname .. "un knot de television en se inspirant de dessins animes anciens pour lier. " .. chis .. " la dent sur la porte de voiture." $) cyoa-text! 
		+cr cardJ4-mecheck mechanicREV
;

: cardJ4-scheck 
	cpet? if
		($ cname .. " essaye de se debarrasser de la dent cassee en machonnant sur une pierre. quelques dents tombent a leur tour, et la douleur est extremement forte. mais au moins la dent mauvaise est egalement sortie." $) cyoa-text! badfx
		nonfatal if
			ouch--
		then morale3- attitude--
	then;
	strengthroll if
		($ cname .. " s'empare d'une paire de pince et va de l'avant, tirant sur la dent avec toute sa force. en utilisant seulement son volonte pour se battre contre la douleur. " .. che .. " retire la dent rapidement et avec une facilite etonnante." $) cyoa-text! goodfx
		strength++ 
	then;
		($ cname .. " extraction d'un dents avec des pincettes, mais le processus est difficile. il y a beaucoup de douleur et de saignement avant que le dent ne sorte finalement." $) cyoa-text! bitefx ouch2-

// Added extra commentary from dying from plier surgery.		
		
		dead? if
			+cr ($ "Quelque facon " .. cname .. " meurt de cela." $) +text
		then
		
;

cyoa-choice: cardJ4-force cardJ4-scheck strengthREV ;

cyoa: cardJ4-test
	"Ma Hooth" cyoa-title!
	choosehuman cicon
	($ cname .. " son dent est sur le point de lui causer une douleur dentaire presque paralysante. en l'absence des outils de precision requis, la seule option disponible est de tirer la dent. " .. cHe .. " pese en equilibre les options actuelles." $) cyoa-text! basic-tone
	
		choice( "Forcer cela hors!" )choice: cardJ4-force
		cnotpet? if
			choice( "Soins de sante appliques sur char" )choice: cardJ4-dentist
			choice( "Je l'ai vu une fois dans un dessin anime !" )choice: cardJ4-mechanical
		then
;

// END of Dentist

// Radio Repair

// Not many changes here except cleaning up the words. cyoa-text-cr replaced with +cr, cyoa-text-append replaced with +text, cyoa: added and the words it makes obsolete taken out.

// someone .colourname was also replaced with "se preparer la cafe" and soloer .colourname was replaced with "nom de solution", search for either in cyoa.df

: cardJ2-jerk ($ cname .. " Retire le lecteur de cd et le jette par la fenetre." $) +text
	temperREV morale++
;
: cardJ2-pumped ($ cname .. " Arretez la musique en appuyant sur le bouton du lecteur cd." $) +text
	strengthREV	strength++ morale++
;
cyoa: cardJ2-test ($ someone .colourname .. " se fait en colere lorsque le lecteur de cd dans la voiture s'enlisent, jouant la meme chanson plusieurs fois de suite." $) cyoa-text! +cr 1 cyoa-image-icon! 4 500 tone 

	strongest-pass
	if strongest choosechar cardJ2-pumped then;

	most-ahole
	if choosechar cardJ2-jerk then;

	solo if ($ soloname .. " eteint le volume." $) +text then;

	"Arreter de le fonctionner pour le moment et essayer de le reparer plus tard." +text
;

// END Radio Repair

// Shop Smart

// The usual cleanups from the above two, see if you can spot the difference.

 cyoa-choice: cardJ1-search ($ Thegroup .. " trouve une petite quantite de munitions." $) cyoa-text! ammosearch1 goodfx ;

// Below is still a cyoa-choice because it's a result with its own window. cicon isn't necessary because it's built into cyoa-choice: if a character was picked before. If no character is picked by your button press, it usually shows cyoaicon.

cyoa-choice: cardJ1-picked
	"Chevalierosquelette" cyoa-title!
	
	($ cname .. " lit et trouve des anciens numeros de revues sur le tir a l'ancienne. cela les rend un tireur plus efficace, ne le contestez pas. "  $) cyoa-text! goodfx

	shootingREV shooting++
;

// The old method involving 3 words to do this was replaced with a way more efficient thing... ' <cyoa-choice> cyoa-team-choice .. search for cyoa-team-choice in cyoa.df

cyoa-choice: cardJ1-one "Qui devrais-je apporter ?" cyoa-text! 
	' cardJ1-picked cyoa-team-choice 
;

: cardJ1-spray 40 %chance if .shooting++ else team-attacked then ;

// cyoa-bad-dialog and $cyoa-ok-dialog are pretty much obsolete now, just use cyoa-text! most of the time along with badfx, goodfx, bitefx, whatever else we add.

cyoa-choice: cardJ1-group "Dans la brouille, quelqu'un du groupe prenait un mannequin pour un zombie et tirait dessus. au cours de cette confusion, le groupe entier tire a blanc. finalement, il n'y avait plus de mannequins debout. " cyoa-text! badfx
	
	// Note syntax: ' <single word, make shortcut if more> foreach-team-char
	
	' cardJ1-spray foreach-team-char 
	someone team-attacked 
;

cyoa: cardJ1-test
	"Acheter intelligemment" cyoa-title!
	0 to cyoaicon cyoaicon
	"Vous trouvez une boutique de produits sportifs. elle semble avoir ete depouillee mais il y a encore une chance que quelque chose ait ete laisse derriere." cyoa-text! basic-tone
		
	choice( "Rapidement chercher de la munition." )choice: cardJ1-search
	
// Changed choice( below to charchoice( , which shows a picture of their face and has the choosechar stuff after built in. Compare to your old version. Also, with charchoice showing their name is automatic, any text you put in the "" is added after.
	
	solo if
		soloer charchoice( " seul : piller seulement" )choice: cardJ1-picked
	then;
	choice( "Prenez tous les uns." )choice: cardJ1-group
	choice( "Prendre une autre personne avec vous." )choice: cardJ1-one
;

// END Shop Smart


// Uncomment the below as you want, to overwrite the hotkeys from cyoa-example-7types

// ' cardJ1-test 1 hotkey!
// ' cardJ2-test 2 hotkey!
// ' cardJ7-test 3 hotkey!
' cardJ4-test 4 hotkey!
// ' goodfx 5 hotkey!
// ' bitefx 6 hotkey!
// ' goodfx 7 hotkey!
// ' card-deleteme 8 hotkey!
' goodfx 9 hotkey!

} }


