uses base.df
uses charfilt.df
uses charstats.df
uses road.df

cyoa{ road{

// Dentist

// Slightly changed the structure of all below to the new stuff. There's cyoa-choice: to start a choice instead of just doing : , and cyoa: for starting off a cyoa. Both do a lot of little shortcut things, like you no longer need to necessarily use cicon more than once, and you no longer need to use cyoa-start.

// Note that words you make to check things or add optional text to the main text of a new window do not use cyoa-choice. Use one cyoa-choice per "fenster".

// Also there's words for pronouns that change based on the correct grammar of the situation. che - picks the chosen character and then uses "er" or "sie", depending. 
// Search for "xhis  xhis" in cyoa.df for a list


: cardJ4-mcheck 
	medicalroll if
		($ cname .. "  wusste wirklich, was sie taten. Mit den verfugbaren Werkzeugen und medizinischen Hilfsmitteln " .. che .. "  kann den Zahn sauber und mit relativ wenig Schmerzen ziehen. " $) cyoa-text! goodfx
		medical++ 
	then;
	
		($ cname .. "  hatte am Ende groe Probleme. Die Zahnextraktion war chaotisch, ungeschickt und schmerzhaft. Um es noch schlimmer zu machen, " .. che .. "  zog den falschen Zahn und musste es noch einmal machen.  " $) cyoa-text! bitefx ouch--
		
	// Added an extra line below for dying from tooth extraction.

	dead? if
		+cr ($ "Nach dem Ziehen des zweiten Zahnes " .. cname .. "  horte man ausrufen " .. "YEAH SCREW THIS NOISE" pbold .. "  und dann " .. che .. "  starb spontan." $) +text
	then
	
;

cyoa-choice: cardJ4-dentist cardJ4-mcheck medicalREV ;

// Expanded this to show that you can split up the text. cyoa-text! for main bodies of text at the top of the window, +text to add new lines below the main text, +cr to create a line break for spacing. Also did this in the above medical check, to a lesser extent.

: cardJ4-mecheck 
	mechanicroll if
		 ($ "Mit dem zusatzlichen Hebel " .. che .. "  knallt die Autotur zu und zieht den Zahn sauber heraus." $) +text goodfx
		mechanic++ 
	then;
	
		($ "Unvorbereitet auf die plotzliche Kraft des Zuschlagens der Tur " .. che .. "  wird zum Auto gezogen und schlagt " .. chis .. "  kopf gegen die Tur. " $) +text bitefx ouch--

// Death flavor text added.
		
	dead? if
		+cr ($ "Dieses genaue Szenario war tatsachlich eine ziemlich verbreitete Todesart vor der Zombie Apokalypse. Diese Unfalle wurden aus den Nachrichten herausgehalten aufgrund von " .. "GROSSE AUTOKONZERNE" rbold .. "." $) +text
	then
;

cyoa-choice: cardJ4-mechanical
	($ cname .. ", inspiriert von alten Zeichentrickserien, beschliet, " .. chis .. "  zahn an die Autotur zu binden." $) cyoa-text! 
		+cr cardJ4-mecheck mechanicREV
;

: cardJ4-scheck 
	cpet? if
		($ cname .. "  versucht, den kaputten Zahn loszuwerden, indem er auf einen Stein beit. Ein paar Zahne fallen heraus und der Schmerz ist unertraglich. Aber zumindest ist auch der schlechte Zahn ausgefallen." $) cyoa-text! badfx
		nonfatal if
			ouch--
		then morale3- attitude--
	then;
	strengthroll if
		($ cname .. "  schnappt sich eine Zange und geht in die Stadt, zieht den Zahn so fest wie moglich. Mit nichts als Willen, den Schmerz zu bekampfen, " .. che .. "  bekommt den Zahn schnell und mit uberraschend wenig Muhe heraus." $) cyoa-text! goodfx
		strength++ 
	then;
		($ cname .. " ' schnappt sich eine Zange und geht in die Stadt. Die Extraktion verlauft nicht gut. Nach viel Schmerz und Blut kommt der Zahn schlielich heraus." $) cyoa-text! bitefx ouch2-

// Added extra commentary from dying from plier surgery.		
		
		dead? if
			+cr ($ "Irgendwie " .. cname .. " stirbt an diesem." $) +text
		then
		
;

cyoa-choice: cardJ4-force cardJ4-scheck strengthREV ;

cyoa: cardJ4-test
	"Mein Hut" cyoa-title!
	choosehuman cicon
	($ cname .. " hat fast lahmende Zahnschmerzen. Ohne Zugang zu den Prazisionswerkzeugen die benotigt werden ist die einzige Option den Zahn herauszuziehen. " .. cHe .. " wagt die aktuellen Optionen ab." $) cyoa-text! basic-tone
	
		choice( "Zwing es raus!" )choice: cardJ4-force
		cnotpet? if
			choice( "Ich war mal ein Zahnarzt!" )choice: cardJ4-dentist
			choice( "Das hab ich mal in einem Cartoon gesehen!" )choice: cardJ4-mechanical
		then
;

// END of Dentist

// Radio Repair

// Not many changes here except cleaning up the words. cyoa-text-cr replaced with +cr, cyoa-text-append replaced with +text, cyoa: added and the words it makes obsolete taken out.

// someone .colourname was also replaced with "hallo Welt" and soloer .colourname was replaced with "soloname", search for either in cyoa.df

: cardJ2-jerk ($ cname .. "  Entfernt den CD Player und wirft ihn aus dem Fenster." $) +text
	temperREV morale++
;
: cardJ2-pumped ($ cname .. "  Schlagt auf den CD Player und stoppt die Musik." $) +text
	strengthREV	strength++ morale++
;
cyoa: cardJ2-test ($ someone .colourname .. "  wird frustriert, wenn der CD Player im Auto klemmt und immer wieder denselben Song abspielt." $) cyoa-text! +cr 1 cyoa-image-icon! 4 500 tone 

	strongest-pass
	if strongest choosechar cardJ2-pumped then;

	most-ahole
	if choosechar cardJ2-jerk then;

	solo if ($ soloname .. "  schaltet die Lautstarke aus." $) +text then;

	"Die Gruppe beschliet es jetzt auszuschalten und spater zu reparieren." +text
;

// END Radio Repair

// Shop Smart

// The usual cleanups from the above two, see if you can spot the difference.

 cyoa-choice: cardJ1-search ($ Thegroup .. "  findet eine kleine Menge Munition." $) cyoa-text! ammosearch1 goodfx ;

// Below is still a cyoa-choice because it's a result with its own window. cicon isn't necessary because it's built into cyoa-choice: if a character was picked before. If no character is picked by your button press, it usually shows cyoaicon.

cyoa-choice: cardJ1-picked
	"Reading Rainbow" cyoa-title!
	
	($ cname .. " ' findet und liest ein paar alte Waffenmagazine. Das macht sie irgendwie zu einem besseren Schutzen, man hinterfragt es nicht "  $) cyoa-text! goodfx

	shootingREV shooting++
;

// The old method involving 3 words to do this was replaced with a way more efficient thing... ' <cyoa-choice> cyoa-team-choice .. search for cyoa-team-choice in cyoa.df

cyoa-choice: cardJ1-one "Wen solltest du mitbringen?" cyoa-text! 
	' cardJ1-picked cyoa-team-choice 
;

: cardJ1-spray 40 %chance if .shooting++ else team-attacked then ;

// cyoa-bad-dialog and $cyoa-ok-dialog are pretty much obsolete now, just use cyoa-text! most of the time along with badfx, goodfx, bitefx, whatever else we add.

cyoa-choice: cardJ1-group "Jemand aus der Gruppe verwechselt eine Schaufensterpuppe mit einem Zombie und eroffnet das Feuer. Wahrend der Verwirrung eroffnet die ganze Gruppe das Feuer. Es war vollig chaotisch. Am Ende stand keine Schaufensterpuppe mehr " cyoa-text! badfx
	
	// Note syntax: ' <single word, make shortcut if more> foreach-team-char
	
	' cardJ1-spray foreach-team-char 
	someone team-attacked 
;

cyoa: cardJ1-test
	"Shop Smart" cyoa-title!
	0 to cyoaicon cyoaicon
	"'Du findest ein Sportgeschaft. Es sieht so aus als ware es bereits geplundert worden aber es besteht immer noch die Moglichkeit dass etwas ubersehen wurde." cyoa-text! basic-tone
		
	choice( "Suche schnell nach Munition" )choice: cardJ1-search
	
// Changed choice( below to charchoice( , which shows a picture of their face and has the choosechar stuff after built in. Compare to your old version. Also, with charchoice showing their name is automatic, any text you put in the "" is added after.
	
	solo if
		soloer charchoice( "  solo Plunderung" )choice: cardJ1-picked
	then;
	choice( "Nimm alle" )choice: cardJ1-group
	choice( "Nimm eine andere Person" )choice: cardJ1-one
;

// END Shop Smart


// Uncomment the below as you want, to overwrite the hotkeys from cyoa-example-7types

// ' cardJ1-test 1 hotkey!
// ' cardJ2-test 2 hotkey!
// ' cardJ7-test 3 hotkey!
' cardJ4-test 4 hotkey!
// ' goodfx 5 hotkey!
// ' bitefx 6 hotkey!
// ' goodfx 7 hotkey!
// ' card-deleteme 8 hotkey!
' goodfx 9 hotkey!

} }


