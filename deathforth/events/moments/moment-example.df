
moment{

: subjname subject .colourname ;

: guilt

	subject? if "Une legere pincement de regret, mais cela passe." +crtext then;

	($ subjname .. " ressent un peu de " .. subject xhe .. " il n'y a plus de espoir en vieil pere noel !" $) +crtext

	subject .morale2-
;

: winner

	subject? if "Combats : les situations dangereuses dans les" +crtext then;

	alone? if
		($ "Victoire ! " .. subjname .. " paie, donne une mains " .. subject xhim .. "s'appuyer sur le dos soi-meme." $) +crtext
	else
		($ "Victoire ! tous applaudissent et se felicitent. " .. subjname .. " sur le dos." $) +crtext
	then

	morale++all
	subject attitude++
;


: loser

	subject? if "Belle replique !" +crtext then;

	// TODO: Add your own stats logic to determine if people respond at
	// all, and/or if a specific person responds and acts up etc.

	alone? if
		($ subjname .. " ultra fit : ultra forme, tres en forme. " .. subject xhis .. " tete vers : " .. subject xhim .. "soi-meme." $) +crtext
	else
		($ Everyone .. " donne " .. subjname .. " le regard prouvant mecontent ou dedaigneux." $) +crtext
	then

	morale--all
	subject attitude--
;


: death
	subject? if then; // Nobody died?!

	team-count 1 < if
		"Il n'y a personne pour poursuivre le reve du canada." +crtext
	then;
	
	($ rando .colourname .. " est fortement influence par " .. subject .colourname .. "oui oui !" $) +crtext

	rando .morale--
	rando .attitude--
;


// TODO: Possible moment types
// - some abstract/generic, some more specific
(*

: ahole ;
: inappropriate ;
: frustrating ;
: annoying ;
: awkward ;
: happy ;
: sad ;
: gain ;
: loss ;
: scary ;
: creepy ;
: fart ;
: satisfaction ;
: funny ;
: revenge ;
*)

(*
	SYNTAX:
	social [blameless] [<character> instigated/subject!] <moment-word> moment

		* stuff in [] is optional
		* by default, the subject is set to the current CYOA
		choicechar
			* if the subject is 0=, then nobody in particular was to
			blame for the event
		* a randomly shuffled stack of affected team members is set in
			the value "touche"
		* you can use RANDO to get the top "touche" character and
		have them respond, or handle them all using forech. Up to you
		and the type of moment. The affected stack is pre-shuffled.

	CALL EXAMPLES

	social ahole moment 								// SUBJECT (usually CHOICECHAR) does something assholish or stupid
	social blameless death moment						// Someone died
	social death moment									// SUBJECT caused someone to die
	social blameless creepy moment 						// Something general happens with zombies or a dead body
	social funny moment									// SUBJECT is a comedian
	social blameless funny moment						// Something generally funny happens

Handy stuff to put in your hack.df file for testing the below:

	: newguy char-gen to recruitee recruited beep ;
	' mtest 1 hotkey!
	' newguy 2 hotkey!
	
*)

}

cyoa{

cyoa-choice: mresult5 
	"Il y aura encore des competitions de mange-hot-dogs dans l'avenir." cyoa-text! 
	someicon
	social blameless winner moment
	social guilt moment
;

cyoa-choice: mresult4
	"Cela aurait pu etre evite !" cyoa-text! 
	social blameless loser moment
	team-count 0 > if 
		choice( "C'est ainsi que la vie continue." )choice: mresult5
	then
;

cyoa-choice: mresult3 
	($ cname .. " s'ecartele en une bouillie sanguineuse !" $) cyoa-text! 
	TEAM_STATUS_DIED cchar .decruit
	social death moment	bitefx
	choice( "Darn" )choice: mresult4
;

cyoa-choice: mresult2 
	($ cname .. " mange encore 100 hot-dogs chauds !" $) cyoa-text! 
	social winner moment 
	charchoice( ": Wooooo!" )choice: mresult3
;

cyoa-choice: mresult1 
	($ cname .. " mange jusqu'a 99 hot-dogs et puis s'etrangle reellement, pas figurativement." $) cyoa-text! 
	social loser moment 
	charchoice( ": attendez que je le puisse faire !" )choice: mresult2
;

cyoa: mtest
	"Competition de mange-motte a chaud! hura!" cyoa-text!
	soloer charchoice( " mange 100 hot-dogs" )choice: mresult1
;

}
