// : statlist STAT_VITALITY for i 1- dup print statname print cr next ;
: statlist STAT_VITALITY for i 1- dup type " - " type statname print next ;

: quick-histat-check
	0 #teamchar .histat-stack shuffles pops statname . 
	1 #teamchar .histat-stack shuffles pops statname .
;

: quick-hiskill-check
	0 #teamchar .hiskill-stack shuffles pops statname .  
	1 #teamchar .hiskill-stack shuffles pops statname .
;

0 value epilogue-gender

// : ehis .. epilogue-gender 1 < if " ' su " else " 'un her " then .. ;
// : ehim .. epilogue-gender 1 < if "  le  or  lo " else " 'un her " then .. ;
// : ehe .. epilogue-gender 1 < if "  el " else " ella,  he  = el " then .. ; 

: ehis epilogue-gender 1 < if "suyo" else "suya" then ;
: ehim epilogue-gender 1 < if "el" else "suya" then ;
: ehe epilogue-gender 1 < if "el" else "ella" then ; 

// THE REAL FUN BEGINS BELOW

0 value EPILOGUE-PICK

// Personality sayings

0 stack
	"Canada va a ser genial!" shove
	"Definitivamente valio la pena toda la carniceria!" shove
	"Eso no estuvo tan mal!" shove
	"Lo siento que ya termina el viaje ahora!" shove
value att-high-endsay-base
att-high-endsay-base shuffles var att-high-endsay

0 stack
	"Esta demasiado frio aqui!" shove
	"Mi pie duele!" shove
	"Odio ya Canada! Canada oler mal!" shove
	"No puedo creer que he marchado hasta aca!" shove
	"Canada es malo! Descalificado!" shove
value att-low-endsay-base
att-low-endsay-base shuffles var att-low-endsay

0 stack
	"Buen trabajo." shove
	"Bueno." shove
	"Facil." shove
	"Sencillo." shove
value comp-high-endsay-base
comp-high-endsay-base shuffles var comp-high-endsay

0 stack
	"Estoy emocionado! Estoy EMOCIONADO!" shove
	"Woooooo!" shove
	"Extreeeeeme!" shove
	"AAAAAAAAAAAAAAAARGH! I DID IT!" shove
value comp-low-endsay-base
comp-low-endsay-base shuffles var comp-low-endsay

0 stack
	"Todo segun el plan!" shove
	"Mi prediccion era una probabilidad del 90% de llegar a Canada!" shove
	"Aprendi mucho sobre mi mismo. Y sobre zombis." shove
	"Apuesto a que podria llegar aqui mucho mas facilmente, con el conocimiento que tengo ahora." shove
value wits-high-endsay-base
wits-high-endsay-base shuffles var wits-high-endsay

0 stack
	"Estamos alli ya?" shove
	"Es esto Canada?" shove
	"Huuuuuuh? Oh, I made it." shove
	"Donde estoy? No estaba prestando atencion." shove
value wits-low-endsay-base
wits-low-endsay-base shuffles var wits-low-endsay

0 stack
	"Lo hicimos!" shove
	"Esto es gracias al trabajo en equipo!" shove
	"Vamos a ser amigos 5ever!" shove
	"La amistad es la razon por la que lo logramos!" shove
value loyal-high-endsay-base
loyal-high-endsay-base shuffles var loyal-high-endsay

0 stack
	"No! Soy el unico!" shove
	"Salud a los que no lograron hacerlo!" shove
	"Well uh... crap. Guess I'm alone." shove
	"Err woops. Well, who needs friends I guess." shove
value loyal-high-endsay-solo-base
loyal-high-endsay-solo-base shuffles var loyal-high-endsay-solo

0 stack
	"Bien, un nuevo pais para robar!" shove
	"I knew that I'd make it hhhhheh." shove
	"Voy a gobernar este lugar!';" shove
	"Mira a todos estos tontos. Me ira bien aqui." shove
value loyal-low-endsay-base
loyal-low-endsay-base shuffles var loyal-low-endsay

0 stack
	"Le pegue a un alce tan fuerte que exploto!" shove
	"AAAAAAAAAARGH! AAAAARGH!" shove
	"BERSEEEERKEEEEEEEER!" shove
	"I love 'zerkin!!!" shove
value berserk-personality-endsay-base
berserk-personality-endsay-base shuffles var berserk-personality-endsay

0 stack
	"Lo hice!" shove
	"Es hora de disfrutar del estilo de vida canadiense!" shove
	"Ya he tenido suficientes zombies, gracias." shove
	"Espera! Deje mi cepillo de dientes en Florida!" shove
	"Touchdooooown!" shove
	"Fue mucha gente de zombis." shove
	"I'm going to need a new car..." shove
	"Me siento inseguro sin sillas para lanzar a mano." shove
	"Espero poder saquear mas banos por tarde." shove
	"Tiempo de descansar y relajarse." shove
	"Victoria!" shove
	"Merezco una vacacion." shove
	"Siempre nieva aqui?" shove
	"Tiempo de fiesta!" shove
	"Felicidades!" shove
	"Whoaaaa!" shove
	"Esto es todo gracias a mi!" shove
value generic-personality-endsay-base
generic-personality-endsay-base shuffles var generic-personality-endsay

0 stack
	"Esta bien, esto es como en mis animes japoneses." shove
	"Bromearon de mis figurines de anime pero quien rie AHORA?" shove
	"Hay anime canadiense?" shove
	"Esto todo se debe a la superioridad de la tecnologia japonesa en armas!" shove
value animefan-personality-endsay-base
animefan-personality-endsay-base shuffles var animefan-personality-endsay

0 stack
	"= ^_^ =" shove
	"La justicia triunfa!" shove
	"Rayo corazon!" rainbold shove
	"^O_O^" shove
	"Bueno, no explique esta vez asi que es bien." shove
value animegirl-personality-endsay-base
animegirl-personality-endsay-base shuffles var animegirl-personality-endsay

0 stack
	"TOO SWOLE TO CONTROL, BABY!!!" fbold shove
	"He llegado a mi maximo nivel de musculacion!" fbold shove
	"YEAH!!!!!! TOO SWOLE!" fbold shove
	"I LOVE BEIN STRONG!!!" fbold shove
value tstc-personality-endsay-base
tstc-personality-endsay-base shuffles var tstc-personality-endsay

0 stack
	"Siempre estare tu guardaespaldas." shove
	"Iiiiii-I-Iiiiiii... wiiiilll always love yoooouuuuu." shove
	"Bajate, Sr. Primer Ministro!" shove
	"Estoy aun en alerta. Estoy evaluando amenazas." shove
value herotype-personality-endsay-base
herotype-personality-endsay-base shuffles var herotype-personality-endsay

0 stack
	"Tengo que ir rapido!" shove
	"Muy por encima de lo cool." shove
	"Come esto, Dr. Robotnik!" shove
	"Soy mas rapido que Sonic el Erizo!" shove
value dex-personality-endsay-base
dex-personality-endsay-base shuffles var dex-personality-endsay

0 stack
	"I've satisfied my hunger... for victory!" shove
	"Me estaba cansando de comer comida enlatada." shove
	"Necesito otra comida." shove
	"Vas a comer eso? Porque yo si." shove
value gourmand-personality-endsay-base
gourmand-personality-endsay-base shuffles var gourmand-personality-endsay

0 stack
	"LADRAR!" shove
	"GUAF! GUAF!" shove
	"BORK!" shove
	"BJORK!" shove
	"GUAU!" shove
	"fartes.*" shove
	"se lava a si mismo.*" shove
value dog-personality-endsay-base
dog-personality-endsay-base shuffles var dog-personality-endsay

// Works like the skill check, but picks the personality stats.
// Also instead of the highest, picks the numbers furthest away from 3. So 0 and 6 tie with each other.
// Each one then has different lines for under 2 or over 4 checks. If it fails both, does a generic line.
: epilogue-personality-check args( char )

	// Gender check to ehis for less clumsy pronouns
	// <- char .female@ 0 > if "hembra" . 1 else "macho" . 0 then to epilogue-gender
	
	<- char .female@ 0 > if
 		1 to epilogue-gender
 	else
 		0 to epilogue-gender
	then
	
	// Special Characters
	
	<- char .mason? 		  if "... :D" then;
	<- char .hermit? 		  if "Ah! No creia que me convencieran de abandonar mi cabina!" then;
	<- char .specialtype@ 3 = if "Feliz Navidad a todos!" then;
	<- char .specialtype@ 4 = if "HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!" fbold then;
	<- char .specialtype@ 5 = if "burbujaburbuja" then;
	<- char .specialtype@ 6 = if "Todo ese entrenamiento me sirvio de utilidad!" then;
	<- char .specialtype@ 7 = if "Fue una buena batalla. Supongo." then;
	<- char .specialtype@ 8 = if "Eso me hizo pensar en un nuevo movimiento de lucha libre! EL PRENSADOR MECA!" then;
	<- char .specialtype@ 9 = if "One-two... one-two... I'm brutal and ruthless!" then;
	<- char .specialtype@ 10 = if "La sabiduria triunfa de nuevo! Soy el rey." then;
	<- char .specialtype@ 11 = if "Necesito mas comida para gato!" then;
	<- char .specialtype@ 12 = if "I'm going to need some stylish winter clothes..." then;
	<- char .specialtype@ 13 = if "Que hermoso lugar!" then;
	<- char .specialtype@ 14 = if "Eso fue facil! El patinaje sobre ruedas es mas peligroso." then;
	<- char .specialtype@ 19 = if "!!!!" then;
	<- char .specialtype@ 20 = if "Nunca crei que lo lograria!" then;
	<- char .specialtype@ 21 = if "Hhhhheh I'll be running this place in a week, tops." then;
	<- char .specialtype@ 22 = if "GUAU!" then;
	<- char .specialtype@ 25 = if tstc-personality-endsay depths 0= if drop "ESTOY FINALMENTE DEMASIADO FUERTE?" else pops nip then then;
	<- char .specialtype@ 26 = if "Si!" then;
	<- char .specialtype@ 27 = if "glup glup" then;
	<- char .specialtype@ 29 = if "JA! ES HORA DE UNA NUEVA AVENTURA!" then;
	<- char .specialtype@ 30 = if "Esto es mi victoria!" then;
	<- char .specialtype@ 31 = if "ODIO LOS LUNES!" then;
	<- char .specialtype@ 33 = if "Ooo! Never forget me! Oooooo!" then;
	<- char .specialtype@ 34 = if "MUYA!" then;
	<- char .specialtype@ 35 = if "EEEEEEEEEEEEEEEEE!" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "muchisimasgracias" then;
	<- char .specialtype@ 45 = if "We really.... cleaned up!" then;
	<- char .specialtype@ 46 = if "I'm a mercenary.... a mercenary for hire." then;
	<- char .specialtype@ 49 = if "...." then;
	<- char .specialtype@ 50 = if "El medio tiempo 3 no esta saliendo, lo siento." then;
	<- char .specialtype@ 52 = if "HYAAAAAAAAAAAAAAAAAAAAAAAAAAAGH!" fbold then;
	<- char .specialtype@ 58 = if "pedo" then;
	<- char .specialtype@ 61 = if "Abracadabra, nerds!" then;
	<- char anime? if animegirl-personality-endsay depths 0= if drop "Soy Kawaii?" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "DON'T LOOK AT MEEEEEEE!" then;
	<- char .specialtype@ 76 = if "TRONG!" then;
	<- char .specialtype@ 77 = if "nurrrrrp!" then;
	<- char .specialtype@ 81 = if "INTERFERIR CON LA DIVERSION DE LA BRUJA, RECIBIR UN DISPARO DE LA PISTOLA DE LA BRUJA!" then;
	<- char .specialtype@ 82 = if "BLAUGH!" then;
	<- char .specialtype@ 83 = if "blog + laugh" then;
	<- char .perk@ "Reina Esqueleto" $= if "Se lo debo todo a los esqueletos!" then;
	<- char .specialtype@ 88 = if "Escuche que Toronto tiene una escena de LARPing prospera!" then;
	<- char .specialtype@ 90 = if "Wow! Un nuevo lugar para quemarlo." then;
	<- char .specialtype@ 91 = if "Estoy aun atrapado en este disfraz! Ayudame!" then;
	<- char .specialtype@ 92 = if "NO TENGO VACUNO, PAN" then;
	<- char .specialtype@ 93 = if "........." then;
	<- char .specialtype@ 94 = if "ESTA CANASTA!" then;
	<- char .specialtype@ 95 = if "Mis objetivos de mision estan a la vista!" then;
	<- char .specialtype@ 96 = if "Perfecto! Puedo asustar a muchas mas personas aqui!" then;
	<- char .specialtype@ 97 = if "BUEN TRABAJO, BUB!" then;
	<- char .specialtype@ 98 = if "Esta demasiado frio aqui para este traje!" then;
	<- char .specialtype@ 102 = if "Uuurrrrgh ice everywhere." then;
	<- char .specialtype@ 104 = if "AMERICA #1! WOO! WOOOOOOOOOO!" then;
	<- char .specialtype@ 105 = if "Otra victoria para el 100% American Can-Do-ismo!" then;
	<- char .specialtype@ 106 = if "Mi registro dice que esto es un buen lugar para quedarme." then;
	<- char .specialtype@ 108 = if "Yarrrr!" then;
	<- char .charbro? 		   if "Que lastima! NOTA DE TRANSLADOR: ESTO SE APROXIMA A 'YARE YARE DAZE" then;
	<- char .broom?            if "I have a confession to make... I was actually a broom the entire time." then;
	<- char .saguts?		   if "IZARI GER UPPERCUT!" then;
	<- char .bryu?		   	   if "HADOOK! KADOOSHIN!" then;
	<- char .hhell?		   	   if "Heh... all thanks to Sweet Lady Propane." then;
	<- char .efudd?		   	   if "Soy vencedor! Yo! E*FUDD!" then;
	
	<- char dog? if dog-personality-endsay depths 0= if drop "bork." else pops nip then then;
	<- char cat? if "MIAO!" then;
	<- char goat? if "BAAAAA!" then;
	<- char pig? if "OINK!" then;
	<- char ispet? if "CRONK!" then;
	
	<- char .trait@ "CARL" $= if "CAAARRRL!" then;
	<- char .trait@ "ES KEPA" $= if "Hola, he llegue. Gracias por jugar Camino a Canada!" then;
	
	<- char .dexterity@ 2 > if dex-personality-endsay depths 0= if drop "Muy mas que cool!" else pops nip then then;
	
	<- char .trait@ "Fan de Anime" $= if animefan-personality-endsay depths 0= if drop "Te quiero, Canada-chan." else pops nip then then;
	<- char .trait@ "Fenix" $= if "El Fenix se levanta!" then;
	<- char .perk@ "T*S*T*C" $= if tstc-personality-endsay depths 0= if drop "He llegado a ser demasiado musculoso?" else pops nip then then;
	<- char .trait@ "Tipo de Heroe" $= if herotype-personality-endsay depths 0= if drop "Siempre estare tu guardaespaldas." else pops nip then then;
	<- char .trait@ "Gourmet" $= if gourmand-personality-endsay depths 0= if drop "Delicioso!" else pops nip then then;
	
	// If a character has the berserker trait, gives them an ending line for it.
	<- char .trait@ "ENLOQUECER!" $= if berserk-personality-endsay depths 0= if drop "FURIAOSO!" else pops nip then then;
	
	// Rare checks above, common checks below.
	
	<- char .xtreme-stat-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_ATTITUDE = if
		<- char .cattitude+ if
			att-high-endsay depths 0= if drop "Si!" else pops nip then
		then;
		<- char .cattitude- if
			att-low-endsay depths 0= if drop "Bah." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_COMPOSURE = if
		<- char .ctemper+ if
			comp-high-endsay depths 0= if drop "Phew." else pops nip then
		then;
		<- char .ctemper- if
			comp-low-endsay depths 0= if drop "Arg!" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_WITS = if
		<- char .cwits+ if
			wits-high-endsay depths 0= if drop "Lo sabia!" else pops nip then
		then;
		<- char .cwits- if
			wits-low-endsay depths 0= if drop "Que?" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_LOYALTY = if
		<- char .cloyalty+ if
			team-count-alive 1 > if loyal-high-endsay else loyal-high-endsay-solo then 
			depths 0= if drop "se convirtio en un ciudadano standing de Canada.*" else pops nip then
		then;
		<- char .cloyalty- if
			loyal-low-endsay depths 0= if drop "siguio siendo un gran idiota.*" else pops nip then
		then;
	then
		 		
	generic-personality-endsay depths 0= if drop "Hurra!" else pops nip then

;


// Skill sayings
// Note: Needs 4 for each category, minimum, or you could run out of sayings

0 stack
	($ "fue expulsado de Canada despues de negarse a entregar las armas.*" $) shove
	($ "canalizo la obsesion por las armas de EHIS en un pasatiempo productivo: recolectar pinas.*" $) shove
	"se convirtio en una atraccion de tiro trick-shooting en el Circo Canadiense.*" shove
	($ "disparo accidentalmente el propio pie de EHIS, dentro de 5 minutos de entrar en Canada.*" $) shove
	"disparo un pinguino por accidente, violando la Directiva Primera Canadiense.*" shove
value shoot-endsay-base
shoot-endsay-base shuffles var shoot-endsay

0 stack
	($ "es arrestado despues de descubrir que la practica medica de EHIS no esta autorizada en Canada.*" $) shove
	($ "diagnostica a todos los pacientes de EHIS con un problema de flatulencia.*" $) shove
	"intenta curar la infeccion zombi, pero solo hace que su cabello se vea un poco mejor.*" shove
	($ "desarrolla una cura para la flatulencia, que luego se nombra despues de EHIM .*" $) shove
	"hace un trasplante de cabeza de medico loco con un alce. Esto se vuelve muy popular!*" shove
value med-endsay-base
med-endsay-base shuffles var med-endsay

0 stack
	"1.5x damage to Mecha Mounties." shove
	"1.5; //In spanish: designs a very popular line of goofy three wheeled cars." shove
	"se reconoce como heroe despues de inventar una sierra de cadena mas potente.*" shove
	"inventa una nueva version de la sierra de cadena, una con luces coloridas atadas a ella.*" shove
	"se enriquecio al inventar un motor de coche que funciona con poutine.*" shove
	"inventa un ratonera mejor. Tiene fibra de carbono sobre ella y una unidad USB.*" shove
value mech-endsay-base
mech-endsay-base shuffles var mech-endsay

0 stack
	($ "creo un programa de fitness popularmente exitoso basado en su experiencia de supervivencia zombie de EHIS.*" $) shove
	"se convirtio en atleta en los Juegos Olimpicos posteriores al apocalipsis zombi, donde Canada gano todos los medallones!*" shove
	"vivio una vida larga y saludable en Canada. A los 100 anos, fue mordido por un alce y exploto.*" shove
	"tomo el hockey, excelando en el despues de todos esos ejercicios de golpear dientes de zombis.*" shove
	"invento una nueva artes marciales especifica de zombis, luego la enseno a muchos discipulos.*" shove
value fit-endsay-base
fit-endsay-base shuffles var fit-endsay

0 stack
	($ "dedico toda su vida a EHIS para ayudar a restaurar el culto al levantamiento a sus antiguas glorias.*" $) shove
	// NOTE: below line is as long as you can get before hitting three lines
	"empezo a flexionar continuamente despues de cruzar la frontera, y nunca paro. Nadie se quejo.*" shove
	($ "se convirtio en un heroe popularmente conocido tras suplejar a un alce que EHE estaba discutiendo con.*" $) shove
	"solia volver a la frontera, solo para arrojar muebles pesados a mas zombies.*" shove
	($ "mas tarde fue elegido Presidente de Todos los Talaveras debido a EHIS fuerza heroica.*" $) shove
value str-endsay-base
str-endsay-base shuffles var str-endsay

0 stack
	($ "continuo corriendo por esta carretera, hasta que desaparecio EHE por encima del horizonte.*" $) shove
	($ "era ampliamente conocido por la velocidad de correr de EHIS, obteniendo el apodo 'Sonic el Hedorlago'.*" $) shove
	($ "uso las piernas rapidas de EHIS para convertirse en un famoso bailarin.*" $) shove
	"ayudo a proveer energia a nuevas ciudades fronterizas despues de ser puesto en una gran rueda de raton.*" shove
value dex-endsay-base
dex-endsay-base shuffles var dex-endsay

0 stack
	($ "quiso convertirse en un alce. Despues de obtener buenas calificaciones en la escuela de alces, EHE hizo esto posible.*" $) shove
	"se convirtio en un vigilante armado con mascarilla tematica de murcielago. Los abogados de derechos de autor fueron llamados.*" shove
	"se asento en una vida tranquila. Era algo aburrido, sin los zombis.*" shove
	"recorrio las fronteras septentrionales, teniendo mas aventuras pero con menos zombis.*" shove
	"the Zombie Survival Guide' by Max Brooks." shove
	"i'm not sure if this is the correct translation." shove
	"finalmente fue prohibido de manejar autos despues de destruir uno cada semana." shove
	"i'm not a Mountie, but I play one on TV' is a line from a commercial for a brand of cough syrup.** =" shove
	($ "eHE' is a reference to the 'EHE' sound effect that plays when a character is eating food." $) shove
	($ "eHE' is a name, so it should be capitalized." $) shove
value generic-skill-endsay-base
generic-skill-endsay-base shuffles var generic-skill-endsay

0 stack
	"mas tarde conquistaria partes de Canada con un ejercito de perros entrenados.*" shove
	"tuvo una larga vida con muchos perros mascotas.*" shove
	($ "patrullo la frontera con un creciente pack de perros cazadores de zombies.*" $) shove
	($ "paso la vida intentando que uno de sus perros fuera elegido Primer Ministro.*"	$) shove
value dogpal-skill-endsay-base
dogpal-skill-endsay-base shuffles var dogpal-skill-endsay

0 stack
	($ "creo un anime basado en sus aventuras. Tomo algunas libertades creativas en cuanto a la ternura.*" $) shove
	($ "dedico el resto de su vida al anime que le salvo la vida.*" $) shove
	"supero los dibujos animados de la infancia, y paso a leer manga.*" shove
	"escribio un manga que representaba a los zombis como chicas anime. Los fans se convirtieron en una extrana secta.*" shove
value animefan-skill-endsay-base
animefan-skill-endsay-base shuffles var animefan-skill-endsay

0 stack
	($ "estallo espontaneamente. Exactamente como EHE queria irse!*" $) shove
	"fue mordido en el pie por un castor. Ambos explotaron en pedazos.*" shove
	"fue aniquilado cuando le golpeo una bola de nieve. Un punto de vida.*" shove
	"fue exiliado despues de destruir un pueblo en un partido amistoso de hockey.*" shove
value berserk-skill-endsay-base
berserk-skill-endsay-base shuffles var berserk-skill-endsay

0 stack
	"se convirtio en la chica anime mas 'kawaii' de Canada. Nota del Traductor: Kawaii significa lindo.*" shove
	"continuo luchando contra el mal disparando cosas con rayos de corazon enormes.*" shove
	"llego a formar Super Saiyan, lo que le dio principalmente una mayor peluca grande.*" shove
	"FINALMENTE confeso sus sentimientos a su sempai.*" shove
value animegirl-skill-endsay-base
animegirl-skill-endsay-base shuffles var animegirl-skill-endsay

0 stack
	"se integro bien en la sociedad canadiense, a pesar de ser un esqueleto que caminaba.*" shove
	"siguio siendo expulsado de pueblos debido a su forma de bailar de manera misteriosa y espeluznante.*" shove
	"vivio una vida normal y feliz, pero con muchos ruidos innecesarios de clic-clac.*" shove
	($ "nunca pudo figurar exactamente por que o como EHE necesitaba comer alimentos.*" $) shove
value skeleton-skill-endsay-base
skeleton-skill-endsay-base shuffles var skeleton-skill-endsay

0 stack
	($ "se convirtio en un chef experto, muy demandado por la cocina enlatada de EHIS.*" $) shove
	"obtuvo un trabajo como critico gastronomico, lo que tal vez sea el mejor trabajo que hay.*" shove
	"finalmente pudo comer algo que no fuera comida antigua o enlatada.*" shove
	"emprendio una nueva aventura para probar todos los deliciosos platos que Canada tiene para ofrecer.*" shove
value gourmand-skill-endsay-base
gourmand-skill-endsay-base shuffles var gourmand-skill-endsay

0 stack
	"estuvo responsable de una serie de robos en Canada, antes de ser exiliado.*" shove
	"the' is not used in Spanish." shove
	($ "i'm not sure if this is the right word. I'm not sure if it's a word at all. I think it's a word. I'm not sure." $) shove
	"the Royal Jewels' is a euphemism for the Prime Minister's testicles." shove
value bandit-skill-endsay-base
bandit-skill-endsay-base shuffles var bandit-skill-endsay

0 stack
	($ "en su mayoria mordisqueo lo que EHE podia alcanzar con su boca, en serio.*" $) shove
	"marcar la mayor cantidad de territorio posible." shove
	", siendo demasiado acostumbrado a la libertad de la carretera, nunca se hizo casa.*" shove
	($ "paso el resto de la vida de EHI ladrando incansablemente a toda la nueva vida silvestre.*" $) shove
	($ "encontro un hogar maravilloso y felizmente hizo cosas de perro por el resto de su vida.*" $) shove
value dog-skill-endsay-base
dog-skill-endsay-base shuffles var dog-skill-endsay


: fix-pronouns ( text )
	"EHIS" ehis $strrep
	"EHE" ehe $strrep
	"EHIM" ehim $strrep
;


// Main start of epilogue check below, further words above
// then; will exit out of the word should the IF check pass

// This checks for the "habilidades", which are things like strength and mechanical.
// Takes whatever the highest skill is. If there's a tie, picks from the tied skills at random.
// Finally, checks that the highest skill is over 4. If not, goes to a generic pool of phrases.


: epilogue-skill-check args( char )

	// Special Characters
	
	<- char .mason? 		  if "hizo un monton de amigos y abrio un campamento de verano!*" then;
	<- char .hermit? 		  if "se convirtio en un ermitano en Canada. En lugar de ser un ermitano en America.*" then;
	<- char .specialtype@ 3 = if "logro difundir el espiritu de la Navidad en todo Canada.*" then;
	<- char .specialtype@ 4 = if "volco montones enormes de carbon desde su trineo, sobre las casas de todos.*" then;
	<- char .specialtype@ 5 = if "continuo revoloteando.*" then;
	<- char .specialtype@ 6 = if "alcanzo los rangos mas altos en el amado deporte canadiense de Sumo Wrestling.*" then;
	<- char .specialtype@ 7 = if "vuelto a Valhalla, pero no antes de lanzar su martillo a muchos monumentos importantes.*" then;
	<- char .specialtype@ 8 = if "se reunio con sus rivales de lucha libre, y tuvo muchas batallas emocionantes.*" then;
	<- char .specialtype@ 9 = if "corrio por todos lados pateando cosas y murmurando. Personas, animales, estatuas, que importe!*" then;
	<- char .specialtype@ 10 = if "establecio un laboratorio muy bien equipado en Canada, luego creo un ejercito de castores mutantes.*" then;
	<- char .specialtype@ 11 = if "hizo que la mayoria de la fauna canadiense desapareciera, gracias a su ejercito de gatos.*" then;
	<- char .specialtype@ 12 = if "encontro por fin un lugar civilizado para quedarse. Desarrollo una linea de moda popular.*" then;
	<- char .specialtype@ 13 = if "molesto incesantemente al grupo, haciendo que todos arrojaran a la carta el deseo de amistad.*" then;
	<- char .specialtype@ 14 = if "fundo la Division de Patines de los Mounties, temida por todos los malhechores.*" then;
	<- char .specialtype@ 19 = if "emprendio una nueva jornada para llegar a Colombia. Despues de eso, otros paises C.*" then;
	<- char .specialtype@ 20 = if "pudo jubilarse finalmente del traje de abeja, reemplazandolo con un tema de alce.*" then;
	<- char .specialtype@ 21 = if "fue expulsado rapidamente del pais por ser una gran chancho.*" then;
	<- char .specialtype@ 22 = if "subio a las alturas de la vida. Ninguna persona supo que era tres perros pilados uno sobre el otro.*" then;
	<- char .specialtype@ 25 = if "atraia a muchos discipulos bodybuilder. Ya no era el Ultimo Bodybuilder.*" then;
	<- char .specialtype@ 26 = if "se hizo famoso por su humor de stand-up muy popular y perspicaz.*" then;
	<- char .specialtype@ 27 = if "sobrevivio contra todo pronostico. Feliz Dia de Accion de Gracias!*" then;
	<- char .specialtype@ 29 = if "infringio todo tipo de horrores relacionados con payasos en Canada.*" then;
	<- char .specialtype@ 30 = if "deambulo por Canada en busca de oponentes de esgrima dignos.*" then;
	<- char .specialtype@ 31 = if "siguio odiando los lunes.*" then;
	<- char .specialtype@ 33 = if "despidiose de todos. Con lagrimas en los ojos, se convirtio en un arbol.*" then;
	<- char .specialtype@ 34 = if "reunio a un gran seguidor de personas, todas corriendo con mascaras identicas.*" then;
	<- char .specialtype@ 35 = if "fue encerrada en un zoologico despues de que todos se dieran cuenta de que era una panda real.*" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "se hizo famoso como cantante, con su cancion exitosa: 'Muerte carretera a Canada" then;
	<- char .specialtype@ 45 = if "se hizo rico vendiendo un nuevo tipo de trapeador que no se rompe al aplastar zombis.*" then;
	<- char .specialtype@ 46 = if "logro mantener su minigun en Canada. Nadie realmente quiso arrebatarsela.*" then;
	<- char .specialtype@ 49 = if "volvio a ser cientifico. Esto implica principalmente dar golpes con un destornillador.*" then;
	<- char .specialtype@ 50 = if "libero la mitad de Half-Life 3.*" then;
	<- char .specialtype@ 52 = if "se perdio por el resto de su vida, destrozando ceramica.*" then;
	<- char .specialtype@ 58 = if "finalmente encontro un bano en que pudiera defecar a salvo.*" then;
	<- char .specialtype@ 61 = if "predijo que llegaria seguro a Canada, y donde esta ahora?.*" then;
	<- char anime? if animegirl-skill-endsay depths 0= if drop "se convirtio en Anime Verdadero!*" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "estuvo escondido en el campo como una abominacion, a veces asustando a los campesinos. Genial!*" then;
	<- char .specialtype@ 76 = if "es algun tipo de roedor o algo asi? No lo se.*" then;
	<- char .specialtype@ 77 = if "volvio a su familia en Canada, despues de mucho tiempo ausente.*" then;
	<- char .specialtype@ 78 = if skeleton-skill-endsay depths 0= if drop "Adoro esqueletizar!" else pops nip then then;
	<- char .specialtype@ 81 = if "construyo una casa de pan dulce realmente genial.*" then;
	<- char .specialtype@ 82 = if "continuo pasando su vida sin-vida haciendo BLUGH y transformandose en murcielago.*" then;
	<- char .specialtype@ 83 = if "se quedo atrapado en forma de murcielago, alguna manera.*" then;
	<- char .perk@ "Reina Esqueleto" $= if "i'm sorry, I don't speak Spanish." then;
	<- char .specialtype@ 88 = if "became a popular bard in the Royal Court of the King of Canada." then;
	<- char .specialtype@ 90 = if "se fue de Canada despues de enterarse de que era mas dificil quemar debido a la hielo.*" then;
	<- char .specialtype@ 91 = if "destruyo Toronto. No era la ciudad real, solo una pequena replica de carton.*" then;
	<- char .specialtype@ 92 = if "desaparecio de regreso en el Bort Dimension, desde donde habia sido invocado.*" then;
	<- char .specialtype@ 93 = if "tuvo una pelea de jefe con Ascendente Bizarro-Krankor. Se hablaron sus problemas.*" then;
	<- char .specialtype@ 94 = if "continuo inspirando a las personas debido a su gran semejanza con Bart.*" then;
	<- char .specialtype@ 95 = if "se dedico a completar su mision secreta: robar la receta de cafe Tim Hortons.*" then;
	<- char .specialtype@ 96 = if "excavo una hermosa cueva monstruosa. Tenia orcos y goblins y trampas. Que genial!" then;
	<- char .specialtype@ 97 = if "fue confundido con una subespecie rara de lobo europeo y fue puesto en un zoo. No se quejo.*" then;
	<- char .specialtype@ 98 = if "cambio su disfraz a un personaje que usaba ropa gruesa en lugar de tacones.*" then;
	<- char .specialtype@ 102 = if "tomo una siesta ese dia y fue inmediatamente congelada. Despierta en el lejano futuro.*" then;
	<- char .specialtype@ 104 = <- char .specialtype@ 105 = or if "se arrodillo modestamente para solicitar la ciudadania canadiense.*" then;
	<- char .specialtype@ 106 = if "ayudo a los Mounties a desarrollar tecnologia antizombi basada en troncos de arbol.*" then;
	<- char .specialtype@ 108 = if "no puede correr tan rapido debido a su valiosa pata de palo antigua." then;
	<- char .charbro? 		   if "finally' in spanish." then;
	<- char .broom?			   if "se queda atrapada en un armario de escoba, pero esta vez en Canada.*" then;
	<- char .saguts?		   if "i'm not a doctor, but I play one on TV.'** = 'I'm not a" then;
	<- char .bryu?		   	   if "inicia un torneo de lucha en Canada, donde principalmente dispara bolas de fuego a osos" then;
	<- char .hhell?		   	   if "abre un negocio de propano en Canada. La sorpresa: Tambien vende accesorios de propano.*" then;
	<- char .efudd?		   	   if "forma un equipo de baloncesto, solo por si acaso los extraterrestres desafian a la tierra a un juego de canastas.*" then;
	
	<- char dog? if dog-skill-endsay depths 0= if drop "vivio la vida de perro.*" else pops nip then then;
	<- char cat? if "inicio una campana de matanza masiva en la fauna local, como hacen los gatos.*" then;
	<- char goat? if "se convirtio en un cabra canadiense. Lo que es igual que un cabra no canadiense.*" then;
	<- char pig? if "fue ampliamente reconocido en Canada por ser UN PORC ESTRELLA!*" then;
	<- char ispet? if "volvio a ser un animal libre nuevamente, y desaparecio en la selva.*" then;
	
	<- char .trait@ "CARL" $= if "CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRRL!" then;
	<- char .trait@ "ES KEPA" $= if "Consejo secreto: Busca el Pozo de los Deseos en la Cripta de la Decadencia!" then;
	
	<- char .dexterity@ 2 > if dex-endsay depths 0= if drop "se fue rapido." else pops nip then then;
	
	<- char .perk@ "Amigo de Perro" $= if dogpal-skill-endsay depths 0= if drop "siguio siendo un verdadero amigo del perro.*" else pops nip then then;
	<- char .trait@ "ENLOQUECER!" $= if berserk-skill-endsay depths 0= if drop "permanecio berserker'*" else pops nip then then;
	<- char .trait@ "Huron" $= if bandit-skill-endsay depths 0= if drop "vivio una larga vida de robos y hurtos'." else pops nip then then;
	<- char .trait@ "Fan de Anime" $= if animefan-skill-endsay depths 0= if drop "continuo estudios de anime'." else pops nip then then;
	<- char .trait@ "Gourmet" $= if gourmand-skill-endsay depths 0= if drop "ceno y se divirtio en Canada'." else pops nip then then;
		
	// Above, rare case checks that prevent the common checks from happening.
	// Common checks below.
	
	<- char .hiskill-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_SHOOTING = if
		<- char .cshooting+ if
			shoot-endsay depths 0= if drop ($ "se mantuvo en forma en la jubilacion de EHIS'." $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MECHANICAL = if
		<- char .cmechanic+ if
			mech-endsay depths 0= if drop ($ "se mantuvo en forma en la jubilacion de EHIS'." $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MEDICAL = if
		<- char .cmedical+ if
			med-endsay depths 0= if drop ($ "se mantuvo en forma en la jubilacion de EHIS'." $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_DEXTERITY = if
		<- char .dexterity@ 0 > if
		// Extra dexterity ending check if it's their highest skill, which is unlikely.
			dex-endsay depths 0= if drop "se volvio mas rapido que Sonic'." else pops nip then
		then;
	then
	 
	EPILOGUE-PICK STAT_STRENGTH = if
		<- char .cstrength+ if
			str-endsay depths 0= if drop "seguio siendo musculoso en Canada'." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_FITNESS = if
		<- char .cfitness+ if
			fit-endsay depths 0= if drop ($ "se mantuvo en forma en la jubilacion de EHIS'." $) else pops nip then
		then;
	then
	
	// Failsafe placeholder below, this should instead be a generic pool it draws from
	// Like blurb/blogic draws from blurb/blurbdeck.df for generic sayings
	
	generic-skill-endsay depths 0= if drop "comenzo una nueva vida en Canada, con menos zombis'." else pops nip then
		
	// Old test, made each character say their gender
	// <- char .female@ 0 = if	"MASCULINO" else	"FEMENINO" then
;

: epilogue-personality-check-fixed epilogue-personality-check fix-pronouns ;
: epilogue-skill-check-fixed epilogue-skill-check fix-pronouns ;
