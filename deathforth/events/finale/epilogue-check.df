// : statlist STAT_VITALITY for i 1- dup print statname print cr next ;
: statlist STAT_VITALITY for i 1- dup type " - " type statname print next ;

: quick-histat-check
	0 #teamchar .histat-stack shuffles pops statname . 
	1 #teamchar .histat-stack shuffles pops statname .
;

: quick-hiskill-check
	0 #teamchar .hiskill-stack shuffles pops statname .  
	1 #teamchar .hiskill-stack shuffles pops statname .
;

0 value epilogue-gender

// : ehis .. epilogue-gender 1 < if "  su " else "  su " then .. ;
// : ehim .. epilogue-gender 1 < if "  el " else "  su " then .. ;
// : ehe .. epilogue-gender 1 < if "  el " else "  ella " then .. ; 

: ehis epilogue-gender 1 < if "el" else "ella" then ;
: ehim epilogue-gender 1 < if "le" else "ella" then ;
: ehe epilogue-gender 1 < if "el" else "ella" then ; 

// THE REAL FUN BEGINS BELOW

0 value EPILOGUE-PICK

// Personality sayings

0 stack
	"Canada va a ser genial!" shove
	"Esto definitivamente valio la pena toda la carniceria!" shove
	"'Eso no estuvo tan mal!" shove
	"'Lamento que el viaje haya terminado!" shove
value att-high-endsay-base
att-high-endsay-base shuffles var att-high-endsay

0 stack
	"'Hace demasiado frio aqui!" shove
	"Me duelen los pies!" shove
	"Ya odio a Canada! Canada huele mal!" shove
	"'No puedo creer que haya marchado hasta aqui!" shove
	"Canada es malo! Votado negativamente!" shove
value att-low-endsay-base
att-low-endsay-base shuffles var att-low-endsay

0 stack
	"Buen trabajo." shove
	"Bien." shove
	"'Que sigue?" shove
	"Facil." shove
value comp-high-endsay-base
comp-high-endsay-base shuffles var comp-high-endsay

0 stack
	"Estoy emocionado! Estoy emocionado!" shove
	"Woooooo!" shove
	"Extreeeeeme!" shove
	"AAAAAAAAAAAAAAAARGH! I DID IT!" shove
value comp-low-endsay-base
comp-low-endsay-base shuffles var comp-low-endsay

0 stack
	"Todo segun lo planeado!" shove
	"90% de probabilidad de llegar a Canada!" shove
	"Aprendi mucho sobre mi mismo. Y zombies." shove
	"Apostaria a que podria llegar aqui incluso mas facilmente, sabiendo lo que se ahora." shove
value wits-high-endsay-base
wits-high-endsay-base shuffles var wits-high-endsay

0 stack
	"Ya llegamos?" shove
	"Esto es Canada?" shove
	"Huuuuuuh? Oh, I made it." shove
	"'Donde estoy? No estaba prestando atencion." shove
value wits-low-endsay-base
wits-low-endsay-base shuffles var wits-low-endsay

0 stack
	"Lo logramos!" shove
	"Todo esto es gracias al trabajo en equipo!" shove
	"'Seamos amigos para siempre!" shove
	"La amistad es la razon por la que lo logramos!" shove
value loyal-high-endsay-base
loyal-high-endsay-base shuffles var loyal-high-endsay

0 stack
	"'No! Soy el unico!" shove
	"'Por los que no lo lograron." shove
	"Well uh... crap. Guess I'm alone." shove
	"Vaya, vaya. Bueno, supongo que no necesito amigos." shove
value loyal-high-endsay-solo-base
loyal-high-endsay-solo-base shuffles var loyal-high-endsay-solo

0 stack
	"Bien, un pais completamente nuevo para robar." shove
	"I knew that I'd make it hhhhheh." shove
	"'Yo gobernare este lugar!" shove
	"'Mira a todos estos tontos. Me ira bien aqui." shove
value loyal-low-endsay-base
loyal-low-endsay-base shuffles var loyal-low-endsay

0 stack
	"Le di un punetazo a un alce tan fuerte que exploto" shove
	"AAAAAAAAAARGH! AAAAARGH!" shove
	"BERSEEEERKEEEEEEEER!" shove
	"I love 'zerkin!!!" shove
value berserk-personality-endsay-base
berserk-personality-endsay-base shuffles var berserk-personality-endsay

0 stack
	"Lo logre!" shove
	"Es hora de disfrutar de la forma de vida canadiense!" shove
	"Ya he tenido suficientes zombies por hoy, gracias." shove
	"Espera! Deje mi cepillo de dientes en Florida!" shove
	"Touchdooooown!" shove
	"Eran muchos zombis." shove
	"I'm going to need a new car..." shove
	"Me siento inseguro sin sillas para lanzar a la vista." shove
	"Espero poder saquear mas banos mas tarde." shove
	"Hora de relajarse y descansar." shove
	"Victoria!" shove
	"Merezco unas vacaciones." shove
	"Siempre nieva aqui?" shove
	"Hora de la fiesta!" shove
	"Felicitaciones!" shove
	"Whoaaaa!" shove
	"Todo esto es gracias a mi!" shove
value generic-personality-endsay-base
generic-personality-endsay-base shuffles var generic-personality-endsay

0 stack
	"Esto es como en mis animes japoneses!" shove
	"'Se burlaron de mis figuras de anime pero quien se rie AHORA?" shove
	"Hay anime canadiense?" shove
	"Todo esto es gracias a la superioridad del armamento japones!" shove
value animefan-personality-endsay-base
animefan-personality-endsay-base shuffles var animefan-personality-endsay

0 stack
	"= ^_^ =" shove
	"La justicia triunfa!" shove
	"RAYO DE CORAZON!" rainbold shove
	"^O_O^" shove
	"'Bueno, no explote esta vez, asi que esta bien." shove
value animegirl-personality-endsay-base
animegirl-personality-endsay-base shuffles var animegirl-personality-endsay

0 stack
	"TOO SWOLE TO CONTROL, BABY!!!" fbold shove
	"HE ALCANZADO LA MAXIMA HINCHAZON!" fbold shove
	"YEAH!!!!!! TOO SWOLE!" fbold shove
	"I LOVE BEIN STRONG!!!" fbold shove
value tstc-personality-endsay-base
tstc-personality-endsay-base shuffles var tstc-personality-endsay

0 stack
	"'Siempre sere tu guardaespaldas." shove
	"Iiiiii-I-Iiiiiii... wiiiilll always love yoooouuuuu." shove
	"Abajo, senor primer ministro!" shove
	"'Todavia estoy en alerta. Estoy evaluando las amenazas." shove
value herotype-personality-endsay-base
herotype-personality-endsay-base shuffles var herotype-personality-endsay

0 stack
	"Tengo que ir rapido!" shove
	"Mucho mas que genial." shove
	"Comete eso, Dr. Robotnik!" shove
	"'Soy mas rapido que Sonic the Hedgehog!" shove
value dex-personality-endsay-base
dex-personality-endsay-base shuffles var dex-personality-endsay

0 stack
	"I've satisfied my hunger... for victory!" shove
	"Me estaba cansando de comer comida enlatada." shove
	"Necesito otra comida." shove
	"Vas a comer eso? Porque yo si." shove
value gourmand-personality-endsay-base
gourmand-personality-endsay-base shuffles var gourmand-personality-endsay

0 stack
	"GUAU!" shove
	"GUAU! GUAU!" shove
	"GUAU!" shove
	"BJORK!" shove
	"GUAU!" shove
	"pedos.*" shove
	"se lame.*" shove
value dog-personality-endsay-base
dog-personality-endsay-base shuffles var dog-personality-endsay

// Works like the skill check, but picks the personality stats.
// Also instead of the highest, picks the numbers furthest away from 3. So 0 and 6 tie with each other.
// Each one then has different lines for under 2 or over 4 checks. If it fails both, does a generic line.
: epilogue-personality-check args( char )

	// Gender check to ehis for less clumsy pronouns
	// <- char .female@ 0 > if "hembra" . 1 else "macho" . 0 then to epilogue-gender
	
	<- char .female@ 0 > if
 		1 to epilogue-gender
 	else
 		0 to epilogue-gender
	then
	
	// Special Characters
	
	<- char .mason? 		  if "... :D" then;
	<- char .hermit? 		  if "'Feh! No puedo creer que me convencieran de dejar mi cabana." then;
	<- char .specialtype@ 3 = if "Feliz Navidad a todos!" then;
	<- char .specialtype@ 4 = if "JO!JO!JO!JO!JO!JO!JO!JO!JO!JO!JO!JO!JO!" fbold then;
	<- char .specialtype@ 5 = if "burbujeoburbujeo" then;
	<- char .specialtype@ 6 = if "Todo ese entrenamiento fue util!" then;
	<- char .specialtype@ 7 = if "Esa fue una buena batalla. Supongo." then;
	<- char .specialtype@ 8 = if "Eso me hizo pensar en un nuevo movimiento de lucha libre! El MECAPRENSA!" then;
	<- char .specialtype@ 9 = if "One-two... one-two... I'm brutal and ruthless!" then;
	<- char .specialtype@ 10 = if "Knowledge triumphs again! I rule." then;
	<- char .specialtype@ 11 = if "I need more cat food!" then;
	<- char .specialtype@ 12 = if "I'm going to need some stylish winter clothes..." then;
	<- char .specialtype@ 13 = if "What an enchanting land!" then;
	<- char .specialtype@ 14 = if "'That was easy! Rollerderby's more dangerous." then;
	<- char .specialtype@ 19 = if "!!!!" then;
	<- char .specialtype@ 20 = if "'I never believed I'd make it!" then;
	<- char .specialtype@ 21 = if "Hhhhheh I'll be running this place in a week, tops." then;
	<- char .specialtype@ 22 = if "GUAU!" then;
	<- char .specialtype@ 25 = if tstc-personality-endsay depths 0= if drop "AM I FINALLY TOO SWOLE?" else pops nip then then;
	<- char .specialtype@ 26 = if "Yes!" then;
	<- char .specialtype@ 27 = if "gobble gobble" then;
	<- char .specialtype@ 29 = if "HA! TIME FOR A NEW ADVENTURE!" then;
	<- char .specialtype@ 30 = if "This is my victory!" then;
	<- char .specialtype@ 31 = if "I FREAKING HATE MONDAYS!" then;
	<- char .specialtype@ 33 = if "Ooo! Never forget me! Oooooo!" then;
	<- char .specialtype@ 34 = if "RELINCHO!" then;
	<- char .specialtype@ 35 = if "EEEEEEEEEEEEEEEEE!" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "thankyouverymuch" then;
	<- char .specialtype@ 45 = if "We really.... cleaned up!" then;
	<- char .specialtype@ 46 = if "I'm a mercenary.... a mercenary for hire." then;
	<- char .specialtype@ 49 = if "...." then;
	<- char .specialtype@ 50 = if "Half Life 3 NO va a salir, lo siento." then;
	<- char .specialtype@ 52 = if "HYAAAAAAAAAAAAAAAAAAAAAAAAAAAGH!" fbold then;
	<- char .specialtype@ 58 = if "pedo" then;
	<- char .specialtype@ 61 = if "Abracadabra, frikis!" then;
	<- char anime? if animegirl-personality-endsay depths 0= if drop "Soy Kawaii?" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "DON'T LOOK AT MEEEEEEE!" then;
	<- char .specialtype@ 76 = if "GNORT!" then;
	<- char .specialtype@ 77 = if "nurrrrrp!" then;
	<- char .specialtype@ 81 = if "INTERFIERE CON LA DIVERSION DE LA BRUJA, RECIBE UN TIRO DE LA PISTOLA DE LA BRUJA!" then;
	<- char .specialtype@ 82 = if "BLAUGH!" then;
	<- char .specialtype@ 83 = if "blaugh" then;
	<- char .perk@ "Reina Esqueleto" $= if "Lo debo todo a los esqueletos!" then;
	<- char .specialtype@ 88 = if "Escuche que Toronto tiene una prospera escena LARPing!" then;
	<- char .specialtype@ 90 = if "Guau! Un nuevo lugar para quemar." then;
	<- char .specialtype@ 91 = if "'Todavia estoy atrapado en este disfraz! Ayuda!" then;
	<- char .specialtype@ 92 = if "'NO TENGAS VACA HOMBRE" then;
	<- char .specialtype@ 93 = if "........." then;
	<- char .specialtype@ 94 = if "EET PANT!" then;
	<- char .specialtype@ 95 = if "Objetivo de la mision a la vista!" then;
	<- char .specialtype@ 96 = if "Perfecto! Puedo aterrorizar a muchos mas humanos aqui!" then;
	<- char .specialtype@ 97 = if "BUEN TRABAJO, BURBUJA!" then;
	<- char .specialtype@ 98 = if "'Hace demasiado frio aqui para este atuendo!" then;
	<- char .specialtype@ 102 = if "Uuurrrrgh ice everywhere." then;
	<- char .specialtype@ 104 = if "AMERICA #1! WOO! WOOOOOOOOOO!" then;
	<- char .specialtype@ 105 = if "Otra victoria para el 100% del espiritu can do estadounidense!" then;
	<- char .specialtype@ 106 = if "Mi registro dice que este es un buen lugar para quedarse." then;
	<- char .specialtype@ 108 = if "Yarrrr!" then;
	<- char .charbro? 		   if "'Santo cielo! NOTA DEL TRADUCTOR: ESTO SIGNIFICA LIBREMENTE 'YARE YARE DAZE'" then;
	<- char .broom?            if "I have a confession to make... I was actually a broom the entire time." then;
	<- char .saguts?		   if "I GER UPPERCUT!" then;
	<- char .bryu?		   	   if "'HADOOK! KADOOSHIN!" then;
	<- char .hhell?		   	   if "Heh... all thanks to Sweet Lady Propane." then;
	<- char .efudd?		   	   if "Soy victorioso! Yo! E*FUDD!" then;
	
	<- char dog? if dog-personality-endsay depths 0= if drop "bork." else pops nip then then;
	<- char cat? if "MIAU!" then;
	<- char goat? if "BAAAAA!" then;
	<- char pig? if "OINK!" then;
	<- char ispet? if "HRONK!" then;
	
	<- char .trait@ "CARL!" $= if "CAAARRRL!" then;
	<- char .trait@ "ES KEPA" $= if "Oh hey, lo hice. Gracias por jugar Death Road to Canada!" then;
	
	<- char .dexterity@ 2 > if dex-personality-endsay depths 0= if drop "Mucho mas que genial!" else pops nip then then;
	
	<- char .trait@ "Fanatico del anime" $= if animefan-personality-endsay depths 0= if drop "Te amo, Canada chan." else pops nip then then;
	<- char .trait@ "Fenix" $= if "D" then;
	<- char .perk@ "T*S*T*C" $= if tstc-personality-endsay depths 0= if drop "Finalmente estoy demasiado fuerte?" else pops nip then then;
	<- char .trait@ "Tipo de heroe" $= if herotype-personality-endsay depths 0= if drop "'Siempre sere tu guardaespaldas." else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-personality-endsay depths 0= if drop "Delicioso!" else pops nip then then;
	
	// If a character has the berserker trait, gives them an ending line for it.
	<- char .trait@ "LOCO!" $= if berserk-personality-endsay depths 0= if drop "ENLOQUECIDO!" else pops nip then then;
	
	// Rare checks above, common checks below.
	
	<- char .xtreme-stat-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_ATTITUDE = if
		<- char .cattitude+ if
			att-high-endsay depths 0= if drop "Si!" else pops nip then
		then;
		<- char .cattitude- if
			att-low-endsay depths 0= if drop "Feh." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_COMPOSURE = if
		<- char .ctemper+ if
			comp-high-endsay depths 0= if drop "Guau." else pops nip then
		then;
		<- char .ctemper- if
			comp-low-endsay depths 0= if drop "Argh!" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_WITS = if
		<- char .cwits+ if
			wits-high-endsay depths 0= if drop "Lo sabia!" else pops nip then
		then;
		<- char .cwits- if
			wits-low-endsay depths 0= if drop "Uh, que?" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_LOYALTY = if
		<- char .cloyalty+ if
			team-count-alive 1 > if loyal-high-endsay else loyal-high-endsay-solo then 
			depths 0= if drop "espanol" else pops nip then
		then;
		<- char .cloyalty- if
			loyal-low-endsay depths 0= if drop "continuo siendo un idiota enorme.*" else pops nip then
		then;
	then
		 		
	generic-personality-endsay depths 0= if drop "Hurra!" else pops nip then

;


// Skill sayings
// Note: Needs 4 for each category, minimum, or you could run out of sayings

0 stack
	($ "fue expulsado de Canada despues de negarse a entregar las armas.*" $) shove
	($ "canalizo la obsesion de las armas de fuego en un pasatiempo productivo: recolectar pinas.*" $) shove
	"se convirtio en una famosa atraccion de tiro al blanco en el Circo Canadiense.*" shove
	($ "accidentalmente se disparo en el pie, a los 5 minutos de entrar a Canada.*" $) shove
	"disparo a un pinguino por accidente, violando la Directiva Principal Canadiense.*" shove
value shoot-endsay-base
shoot-endsay-base shuffles var shoot-endsay

0 stack
	($ "es arrestado despues de descubrir que su practica medica no tiene licencia en Canada.*" $) shove
	($ "diagnostica a cada uno de sus pacientes con un problema de flatulencias.*" $) shove
	"intenta curar la infeccion zombie, pero solo hace que su cabello sea un poco mas bonito.*" shove
	($ "desarrolla una cura para la flatulencia, que luego lleva su nombre.*" $) shove
	"hace un trasplante de cabeza de doctor loco con un alce. Esto se vuelve muy popular!*" shove
value med-endsay-base
med-endsay-base shuffles var med-endsay

0 stack
	"hace innovaciones increibles a los Mecha Mounties. Ahora sirven cafe*" shove
	"disena una linea muy popular de autos de tres ruedas.*" shove
	"es reconocido como un heroe despues de inventar una motosierra mas poderosa." shove
	"inventa una nueva version de la motosierra, una con luces de colores unidas a ella.*" shove
	"se hace rico despues de inventar un motor de automovil que funciona con poutine.*" shove
	"inventa una mejor trampa para ratones. Tiene fibra de carbono y una unidad USB.*" shove
value mech-endsay-base
mech-endsay-base shuffles var mech-endsay

0 stack
	($ "ideo un programa de ejercicios muy popular basado en la experiencia de supervivencia de zombis de EHIS.*" $) shove
	"se convirtio en atleta en los Juegos Olimpicos posteriores al apocalipsis zombi, donde Canada gano todas las medallas!*" shove
	"vivio una vida larga y saludable en Canada. A la edad de 100 anos, fue mordido por un alce y exploto.*" shove
	"se dedico al hockey, sobresaliendo en el despues de toda esa practica derribando dientes de zombis.*" shove
	"invento un nuevo arte marcial especifico para zombis y luego se lo enseno a muchos discipulos.*" shove
value fit-endsay-base
fit-endsay-base shuffles var fit-endsay

0 stack
	($ "dedico toda la vida de EHIS a ayudar a restaurar el culturismo a su antigua gloria.*" $) shove
	// NOTE: below line is as long as you can get before hitting three lines
	"comenzo a flexionarse continuamente despues de cruzar la frontera y nunca se detuvo. A nadie le importo.*" shove
	($ "se convirtio en un heroe popular legendario despues de aplicar una llave de suplex a un alce con el que EHE estaba discutiendo.*" $) shove
	"a menudo regresaba a la frontera, solo para arrojar muebles pesados a mas zombis.*" shove
	($ "mas tarde fue elegido presidente de todos los lenadores debido a la gran fuerza de EHIS.*" $) shove
value str-endsay-base
str-endsay-base shuffles var str-endsay

0 stack
	($ "continuo corriendo por este camino, hasta que EHE desaparecio mas alla del horizonte.*" $) shove
	($ "'era ampliamente conocido por la velocidad de carrera de EHIS, ganandose el apodo de 'Sonic the Hedgehog'.*" $) shove
	($ "eHIS is a reference to the EHI" $) shove
	"ayudo a suministrar energia a las nuevas ciudades fronterizas despues de ser puesto en una gran rueda de hamster.*" shove
value dex-endsay-base
dex-endsay-base shuffles var dex-endsay

0 stack
	($ "queria convertirse en un alce. Despues de obtener buenas calificaciones en la escuela de alces EHE hizo realidad esto.*" $) shove
	"se convirtio en un vigilante enmascarado con tematica de murcielago. Se llamo a los abogados de derechos de autor.*" shove
	"se instalo en una vida tranquila. Fue algo aburrido, sin los zombis.*" shove
	"deambulo por las fronteras del norte, teniendo mas aventuras pero con menos zombis.*" shove
	"escribio una popular guia de supervivencia zombi que estaba llena de malos consejos.*" shove
	"tuvo dificultades para adaptarse a Canada y finalmente regreso al sur en busca de mas aventuras.*" shove
	"finalmente fue prohibido conducir automoviles despues de destruir uno cada semana.*" shove
	"'intento convertirse en un policia montado, pero realmente no tenia las habilidades para ello.*" shove
	($ "nunca se acostumbro a la comida, demasiado acostumbrado a la comida chatarra que EHE recolectaba en Death Road.*" $) shove
	($ "'no tenia ninguna habilidad fuerte, y EHE tuvo una vida pacifica pero sin incidentes en Canada.*" $) shove
value generic-skill-endsay-base
generic-skill-endsay-base shuffles var generic-skill-endsay

0 stack
	"mas tarde se apoderaria de partes de Canada con un ejercito de perros entrenados.*" shove
	"vivio una vida larga llena de perros mascotas.*" shove
	($ "patrullo la frontera con el creciente grupo de perros de EHIS para cazar zombis.*" $) shove
	($ "paso toda su vida tratando de conseguir que uno de sus perros de EHIS fuera elegido Primer Ministro.*"	$) shove
value dogpal-skill-endsay-base
dogpal-skill-endsay-base shuffles var dogpal-skill-endsay

0 stack
	($ "creo un anime basado en las aventuras de EHIS. Tomo algunas libertades creativas en lo que respecta a la adorabilidad.*" $) shove
	($ "dedico el resto de su vida al anime que le salvo la vida.*" $) shove
	"supero la fase infantil del anime, y paso a manga.*" shove
	"escribio un manga en el que los zombis eran chicas de anime. Los fanaticos crecieron en una extrana secta.*" shove
value animefan-skill-endsay-base
animefan-skill-endsay-base shuffles var animefan-skill-endsay

0 stack
	($ "se desintegro espontaneamente. Nota del traductor EHE queria morir asi.*" $) shove
	"fue mordido por un castor en el pie. Ambos se desintegraron en pedazos.*" shove
	"fue aniquilado al ser golpeado por una nieveballa. Una salud unica.*" shove
	"fue exiliado despues de destruir una ciudad en un juego de hockey amistoso.*" shove
value berserk-skill-endsay-base
berserk-skill-endsay-base shuffles var berserk-skill-endsay

0 stack
	"'se convirtio en la chica anime mas 'kawaii' de Canada. Nota del traductor: Kawaii significa adorable.*" shove
	"continuo luchando contra el mal disparando cosas con rayos gigantes del corazon.*" shove
	"pronto alcanzo la forma de Super Saiyan, que principalmente le dio un peinado mas grande.*" shove
	"FINALMENTE se confeso con sempai.*" shove
value animegirl-skill-endsay-base
animegirl-skill-endsay-base shuffles var animegirl-skill-endsay

0 stack
	"se integro bien en la sociedad canadiense, a pesar de ser un esqueleto andante.*" shove
	"siguio siendo expulsada de la ciudad por bailar de una manera espeluznante.*" shove
	"vivio una vida normal y feliz, pero con muchos ruidos de chasquidos innecesarios.*" shove
	($ "nunca, nunca descubrio exactamente por que o como EHE necesitaba comer.*" $) shove
value skeleton-skill-endsay-base
skeleton-skill-endsay-base shuffles var skeleton-skill-endsay

0 stack
	($ "'se convirtio en un chef experto, muy solicitado por la cocina de comida enlatada de EHIS.*" $) shove
	"consiguio un trabajo como critico gastronomico, que es quizas el mejor trabajo que existe.*" shove
	"'finalmente pudo comer algo que no era comida chatarra vieja o enlatada.*" shove
	"emprendio un nuevo viaje para probar toda la buena cocina que Canada tiene para ofrecer.*" shove
value gourmand-skill-endsay-base
gourmand-skill-endsay-base shuffles var gourmand-skill-endsay

0 stack
	"fue responsable de una serie de robos en Canada, antes de ser exiliado.*" shove
	"establecio un temido sindicato del crimen. Uno donde todos vestian vestidos elegantes.*" shove
	($ "reprimio el impulso de EHIS de robar a la gente en Canada. En cambio, EHE fue simplemente un idiota enorme.*" $) shove
	"'liderar un atraco para robar las joyas reales del primer ministro.*" shove
value bandit-skill-endsay-base
bandit-skill-endsay-base shuffles var bandit-skill-endsay

0 stack
	($ "en su mayoria mordisqueaba lo que EHE podia meterse en la boca, de verdad.*" $) shove
	"marco tanto territorio como fue posible.*" shove
	", estando demasiado acostumbrado a la libertad del camino abierto, nunca fue domesticado.*" shove
	($ "paso el resto de su vida ladrando incesantemente a toda la nueva vida salvaje.*" $) shove
	($ "encontro un buen hogar y felizmente hizo cosas de perros por el resto de su vida.*" $) shove
value dog-skill-endsay-base
dog-skill-endsay-base shuffles var dog-skill-endsay


: fix-pronouns ( text )
	"SU" ehis $strrep
	"EL" ehe $strrep
	"EL" ehim $strrep
;


// Main start of epilogue check below, further words above
// then; will exit out of the word should the IF check pass

// This checks for the "habilidades", which are things like strength and mechanical.
// Takes whatever the highest skill is. If there's a tie, picks from the tied skills at random.
// Finally, checks that the highest skill is over 4. If not, goes to a generic pool of phrases.


: epilogue-skill-check args( char )

	// Special Characters
	
	<- char .mason? 		  if "hizo un monton de amigos y abrio un campamento de verano!*" then;
	<- char .hermit? 		  if "se convirtio en un ermitano en Canada. En lugar de ser un ermitano en Estados Unidos.*" then;
	<- char .specialtype@ 3 = if "pudo difundir la alegria navidena a todo Canada.*" then;
	<- char .specialtype@ 4 = if "'arrojo enormes montones de carbon de su trineo, sobre las casas de todos.*" then;
	<- char .specialtype@ 5 = if "continuo dando vueltas.*" then;
	<- char .specialtype@ 6 = if "llego a los mas altos rangos en el amado deporte canadiense de la lucha de sumo.*" then;
	<- char .specialtype@ 7 = if "regreso a Valhalla, pero no sin antes lanzar su martillo a muchos monumentos importantes.*" then;
	<- char .specialtype@ 8 = if "se reunio con sus rivales de lucha libre y tuvo muchas batallas emocionantes.*" then;
	<- char .specialtype@ 9 = if "corrio dando punetazos a cosas y murmurando. Gente, animales, estatuas, lo que sea.*" then;
	<- char .specialtype@ 10 = if "monto un laboratorio secreto muy bonito en Canada y luego creo un ejercito de castores mutantes.*" then;
	<- char .specialtype@ 11 = if "hizo que la mayor parte de la vida salvaje canadiense se extinguiera, debido a su ejercito de gatos.*" then;
	<- char .specialtype@ 12 = if "finalmente encontro un lugar civilizado donde quedarse. Desarrollo una popular linea de moda.*" then;
	<- char .specialtype@ 13 = if "acoso al grupo para siempre, haciendo que todos se arrepintieran de ese deseo de amistad.*" then;
	<- char .specialtype@ 14 = if "fundo la Division de Patinaje sobre Ruedas de la Policia Montada, temida por todos los malhechores.*" then;
	<- char .specialtype@ 19 = if "comenzo un nuevo viaje para llegar a Colombia. Despues de eso, otros paises C.*" then;
	<- char .specialtype@ 20 = if "finalmente pudo retirar el traje de abeja y reemplazarlo con un tema de alce.*" then;
	<- char .specialtype@ 21 = if "fue expulsado rapidamente del pais por ser un imbecil inmenso.*" then;
	<- char .specialtype@ 22 = if "ascendio alto en la vida. Nadie se dio cuenta de que era tres perros apilados uno encima del otro.*" then;
	<- char .specialtype@ 25 = if "atrajo a muchos discipulos culturistas. Ya no era El Ultimo Culturista.*" then;
	<- char .specialtype@ 26 = if "im not sure if this is the right translation." then;
	<- char .specialtype@ 27 = if "." then;
	<- char .specialtype@ 29 = if "infligio todo tipo de horrores relacionados con payasos en Canada.*" then;
	<- char .specialtype@ 30 = if "deambulo por Canada buscando oponentes dignos de esgrima.*" then;
	<- char .specialtype@ 31 = if "siguio odiando los lunes.*" then;
	<- char .specialtype@ 33 = if "se despidio de todos. Con lagrimas en los ojos, se convirtio en un arbol.*" then;
	<- char .specialtype@ 34 = if "reunio un gran numero de seguidores, todos corriendo con mascaras identicas.*" then;
	<- char .specialtype@ 35 = if "fue puesta en un zoologico despues de que todos se dieran cuenta de que era un panda real.*" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "'se convirtio en un famoso cantante, con su exitosa cancion: 'Death Road to Canada" then;
	<- char .specialtype@ 45 = if "'se hizo rico vendiendo un nuevo tipo de fregona que no se rompe al aplastar zombis.*" then;
	<- char .specialtype@ 46 = if "logro mantener su minigun en Canada. Nadie queria quitarselo.*" then;
	<- char .specialtype@ 49 = if "volvio a ser cientifico. Esto implica principalmente golpear cosas con una palanca.*" then;
	<- char .specialtype@ 50 = if "lanzo Half Life 3.*" then;
	<- char .specialtype@ 52 = if "cometio errores durante el resto de su vida, rompiendo ceramica.*" then;
	<- char .specialtype@ 58 = if "finalmente encontro un bano en el que podia cagar sin problemas." then;
	<- char .specialtype@ 61 = if "look where he is now is a common phrase in spanish that means look at him now or look how he is now but it's not a direct translation." then;
	<- char anime? if animegirl-skill-endsay depths 0= if drop "se convirtio en True Anime!*" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "acechaba en el campo como una abominacion, a veces asustando a los aldeanos. Agradable!*" then;
	<- char .specialtype@ 76 = if "'es una especie de jerbo o algo asi? No lo se.*" then;
	<- char .specialtype@ 77 = if "regreso con su familia en Canada, despues de mucho tiempo de ausencia.*" then;
	<- char .specialtype@ 78 = if skeleton-skill-endsay depths 0= if drop "Me encanta el skeleton!" else pops nip then then;
	<- char .specialtype@ 81 = if "construyo una casa de jengibre realmente genial.*" then;
	<- char .specialtype@ 82 = if "continuo pasando su no vida diciendo BLUGH y convirtiendose en murcielago.*" then;
	<- char .specialtype@ 83 = if "se quedo atrapado en forma de murcielago, de alguna manera.*" then;
	<- char .perk@ "Reina Esqueleto" $= if "crecio un enorme ejercito de esqueletos. Nunca hicieron mucho, a ella simplemente le gustaba coleccionarlos.*" then;
	<- char .specialtype@ 88 = if "se convirtio en un bardo popular en la Corte Real del Rey de Canada.*" then;
	<- char .specialtype@ 90 = if "dejo Canada despues de descubrir que todo era mas dificil de quemar debido al hielo.*" then;
	<- char .specialtype@ 91 = if "destruyo Toronto. No la ciudad real, solo una pequena replica de carton.*" then;
	<- char .specialtype@ 92 = if "desaparecio de nuevo en la Dimension Bort, de donde fue convocado.*" then;
	<- char .specialtype@ 93 = if "tuvo una pelea de jefes con Ascendant Bizarro Krankor. Hablaron de sus problemas.*" then;
	<- char .specialtype@ 94 = if "continuo inspirando a la gente debido a su perfecto parecido con Bart.*" then;
	<- char .specialtype@ 95 = if "continuo para completar su mision secreta: robar la receta del cafe Tim Hortons.*" then;
	<- char .specialtype@ 96 = if "saco un dulce monstruo lleno de mazmorras. Tenia orcos goblins y trampas. Genial!*" then;
	<- char .specialtype@ 97 = if "'fue confundido con una rara subespecie de gloton y fue arrojado a un zoologico. No le importo.*" then;
	<- char .specialtype@ 98 = if "cambio su cosplay a un personaje que vestia ropa gruesa de invierno en lugar de mallas.*" then;
	<- char .specialtype@ 102 = if "tomo una siesta ese dia y fue inmediatamente encerrada en hielo. Ella se desperto en un futuro muy lejano.*" then;
	<- char .specialtype@ 104 = <- char .specialtype@ 105 = or if "solicito la ciudadania canadiense en voz baja y timidamente.*" then;
	<- char .specialtype@ 106 = if "ayudo a los mounties a desarrollar una poderosa tecnologia anti zombi basada en troncos.*" then;
	<- char .specialtype@ 108 = if "'no puede correr tan rapido por su preciada pata de palo antigua." then;
	<- char .charbro? 		   if "finalmente, FINALMENTE consigue patear un balon de futbol.*" then;
	<- char .broom?			   if "se queda atascado en un armario de escobas, pero esta vez en Canada.*" then;
	<- char .saguts?		   if "renuncia a su trabajo como luchador de torneos y comienza a vender populares parches de diseno para ojos.*" then;
	<- char .bryu?		   	   if "inicia un torneo de lucha en Canada, donde principalmente dispara bolas de fuego a los alces" then;
	<- char .hhell?		   	   if "abre un negocio de propano en Canada. El giro: tambien vende accesorios de propano.*" then;
	<- char .efudd?		   	   if "forma un equipo de baloncesto, por si acaso los extraterrestres desafian a la tierra a un juego de aros.*" then;
	
	<- char dog? if dog-skill-endsay depths 0= if drop "vivio esa vida de perro.*" else pops nip then then;
	<- char cat? if "inicio una campana de asesinatos en masa contra la vida silvestre local, como hacen los gatos.*" then;
	<- char goat? if "se convirtio en una cabra canadiense. Lo cual es como una cabra no canadiense.*" then;
	<- char pig? if "fue ampliamente reconocido en Canada como UN CERDO!*" then;
	<- char ispet? if "finalmente volvio a ser un animal libre y desaparecio en la naturaleza.*" then;
	
	<- char .trait@ "CARL!" $= if "CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRRL!" then;
	<- char .trait@ "ES KEPA" $= if "Consejo secreto: Busca el Pozo de los Deseos en la Cripta de la Descomposicion!" then;
	
	<- char .dexterity@ 2 > if dex-endsay depths 0= if drop "fue rapido.*" else pops nip then then;
	
	<- char .perk@ "Amigo del perro" $= if dogpal-skill-endsay depths 0= if drop "siguio siendo un verdadero amigo del perro.*" else pops nip then then;
	<- char .trait@ "LOCO!" $= if berserk-skill-endsay depths 0= if drop "se mantuvo furioso!*" else pops nip then then;
	<- char .trait@ "Bandido" $= if bandit-skill-endsay depths 0= if drop "vivio una larga vida robando.*" else pops nip then then;
	<- char .trait@ "Fanatico del anime" $= if animefan-skill-endsay depths 0= if drop "continuo los estudios de anime.*" else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-skill-endsay depths 0= if drop "bebio y ceno en Canada.*" else pops nip then then;
		
	// Above, rare case checks that prevent the common checks from happening.
	// Common checks below.
	
	<- char .hiskill-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_SHOOTING = if
		<- char .cshooting+ if
			shoot-endsay depths 0= if drop ($ "se mantuvo en forma en su retiro de EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MECHANICAL = if
		<- char .cmechanic+ if
			mech-endsay depths 0= if drop ($ "se mantuvo en forma en su retiro de EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MEDICAL = if
		<- char .cmedical+ if
			med-endsay depths 0= if drop ($ "se mantuvo en forma en su retiro de EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_DEXTERITY = if
		<- char .dexterity@ 0 > if
		// Extra dexterity ending check if it's their highest skill, which is unlikely.
			dex-endsay depths 0= if drop "se volvio mas rapido que Sonic.*" else pops nip then
		then;
	then
	 
	EPILOGUE-PICK STAT_STRENGTH = if
		<- char .cstrength+ if
			str-endsay depths 0= if drop "siguio estando fuerte en Canada.*" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_FITNESS = if
		<- char .cfitness+ if
			fit-endsay depths 0= if drop ($ "se mantuvo en forma en su retiro de EHIS.*" $) else pops nip then
		then;
	then
	
	// Failsafe placeholder below, this should instead be a generic pool it draws from
	// Like blurb/blogic draws from blurb/blurbdeck.df for generic sayings
	
	generic-skill-endsay depths 0= if drop "comenzo una nueva vida en Canada, con menos zombis.*" else pops nip then
		
	// Old test, made each character say their gender
	// <- char .female@ 0 = if	"HOMBRE" else	"MUJER" then
;

: epilogue-personality-check-fixed epilogue-personality-check fix-pronouns ;
: epilogue-skill-check-fixed epilogue-skill-check fix-pronouns ;
