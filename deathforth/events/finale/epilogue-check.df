// : statlist STAT_VITALITY for i 1- dup print statname print cr next ;
: statlist STAT_VITALITY for i 1- dup type " - " type statname print next ;

: quick-histat-check
	0 #teamchar .histat-stack shuffles pops statname . 
	1 #teamchar .histat-stack shuffles pops statname .
;

: quick-hiskill-check
	0 #teamchar .hiskill-stack shuffles pops statname .  
	1 #teamchar .hiskill-stack shuffles pops statname .
;

0 value epilogue-gender

// : ehis .. epilogue-gender 1 < if "  sein " else "  ihr " then .. ;
// : ehim .. epilogue-gender 1 < if "  ihn " else "  ihr " then .. ;
// : ehe .. epilogue-gender 1 < if "  er " else "  sie " then .. ; 

: ehis epilogue-gender 1 < if "seine" else "ihre" then ;
: ehim epilogue-gender 1 < if "ihn" else "ihre" then ;
: ehe epilogue-gender 1 < if "er" else "sie" then ; 

// THE REAL FUN BEGINS BELOW

0 value EPILOGUE-PICK

// Personality sayings

0 stack
	"Kanada wird groartig!" shove
	"Das war definitiv das ganze Gemetzel wert!" shove
	"'Das war nicht so schlimm!" shove
	"'Es tut mir leid dass die Reise jetzt vorbei ist!" shove
value att-high-endsay-base
att-high-endsay-base shuffles var att-high-endsay

0 stack
	"'Hier ist es zu kalt!" shove
	"Meine Fue wehen!" shove
	"Ich hasse Kanada schon! Kanada stinkt!" shove
	"'Ich kann nicht glauben dass ich den ganzen Weg hierher marschiert bin!" shove
	"Kanada ist schlecht! Abgewahlt!" shove
value att-low-endsay-base
att-low-endsay-base shuffles var att-low-endsay

0 stack
	"Gute Arbeit." shove
	"Gut." shove
	"'Was kommt als Nachstes?" shove
	"Einfach." shove
value comp-high-endsay-base
comp-high-endsay-base shuffles var comp-high-endsay

0 stack
	"'Ich bin vollgepumpt! Ich bin vollgepumpt!" shove
	"Woooooo!" shove
	"Extreeeeeme!" shove
	"AAAAAAAAAAAAAAAARGH! I DID IT!" shove
value comp-low-endsay-base
comp-low-endsay-base shuffles var comp-low-endsay

0 stack
	"Alles nach Plan!" shove
	"Meine Vorhersage war eine 90%ige Chance Kanada zu erreichen!" shove
	"Ich habe viel uber mich selbst gelernt. Und Zombies." shove
	"Ich wette, ich konnte jetzt noch einfacher hierher kommen, da ich wei, was ich jetzt wei." shove
value wits-high-endsay-base
wits-high-endsay-base shuffles var wits-high-endsay

0 stack
	"Sind wir schon da?" shove
	"Ist das Kanada?" shove
	"Huuuuuuh? Oh, I made it." shove
	"'Wo bin ich? Ich habe nicht aufgepasst." shove
value wits-low-endsay-base
wits-low-endsay-base shuffles var wits-low-endsay

0 stack
	"Wir haben es geschafft!" shove
	"Das ist alles dem Teamwork zu verdanken!" shove
	"'Lasst uns fur immer Freunde sein!" shove
	"Freundschaft ist der Grund warum wir es geschafft haben!" shove
value loyal-high-endsay-base
loyal-high-endsay-base shuffles var loyal-high-endsay

0 stack
	"Nein! Ich bin der einzige!" shove
	"Hier ist fur diejenigen die es nicht geschafft haben." shove
	"Well uh... crap. Guess I'm alone." shove
	"Err woops. Nun, wer braucht schon Freunde, denke ich." shove
value loyal-high-endsay-solo-base
loyal-high-endsay-solo-base shuffles var loyal-high-endsay-solo

0 stack
	"Nice, a whole new country to rob." shove
	"I knew that I'd make it hhhhheh." shove
	"Ich werde diesen Ort beherrschen!" shove
	"Ich werde hier gut zurecht kommen." shove
value loyal-low-endsay-base
loyal-low-endsay-base shuffles var loyal-low-endsay

0 stack
	"Ich habe einen Elch so hart geschlagen dass er explodierte!" shove
	"AAAAAAAAAARGH! AAAAARGH!" shove
	"BERSEEEERKEEEEEEEER!" shove
	"I love 'zerkin!!!" shove
value berserk-personality-endsay-base
berserk-personality-endsay-base shuffles var berserk-personality-endsay

0 stack
	"Ich habe es geschafft!" shove
	"Zeit den kanadischen Lebensstil zu genieen!" shove
	"'Das sind genug Zombies fur mich, danke." shove
	"Warte! Ich habe meine Zahnburste in Florida vergessen!" shove
	"Touchdooooown!" shove
	"Das waren eine Menge Zombies." shove
	"I'm going to need a new car..." shove
	"Ich fuhle mich unsicher wenn keine Wurfstuhle in Sicht sind." shove
	"Ich hoffe ich kann spater noch mehr Toiletten plundern." shove
	"Zeit sich zuruckzulehnen und zu entspannen." shove
	"Sieg!" shove
	"Ich habe einen Urlaub verdient." shove
	"Schneit es hier immer?" shove
	"Partyzeit!" shove
	"Herzlichen Gluckwunsch!" shove
	"Whoaaaa!" shove
	"Das ist alles mein Verdienst!" shove
value generic-personality-endsay-base
generic-personality-endsay-base shuffles var generic-personality-endsay

0 stack
	"Das ist wie in meinen japanischen Animes!" shove
	"'Sie machten sich uber meine Anime Figuren lustig aber wer lacht JETZT?" shove
	"Gibt es kanadische Animes?" shove
	"Das ist alles dem uberlegenen japanischen Waffenarsenal zu verdanken!" shove
value animefan-personality-endsay-base
animefan-personality-endsay-base shuffles var animefan-personality-endsay

0 stack
	"= ^_^ =" shove
	"Gerechtigkeit siegt!" shove
	"HERZSTRAHL!" rainbold shove
	"^O_O^" shove
	"'Nun, diesmal bin ich nicht explodiert, das ist schon." shove
value animegirl-personality-endsay-base
animegirl-personality-endsay-base shuffles var animegirl-personality-endsay

0 stack
	"TOO SWOLE TO CONTROL, BABY!!!" fbold shove
	"ICH HABE MAXIMALE MUSKELN ERREICHT!" fbold shove
	"YEAH!!!!!! TOO SWOLE!" fbold shove
	"I LOVE BEIN STRONG!!!" fbold shove
value tstc-personality-endsay-base
tstc-personality-endsay-base shuffles var tstc-personality-endsay

0 stack
	"'Ich werde immer dein Leibwachter sein." shove
	"Iiiiii-I-Iiiiiii... wiiiilll always love yoooouuuuu." shove
	"Gehen Sie in Deckung, Herr Premierminister!" shove
	"'Ich bin immer noch in Alarmbereitschaft. Ich prufe die Bedrohungen." shove
value herotype-personality-endsay-base
herotype-personality-endsay-base shuffles var herotype-personality-endsay

0 stack
	"Gotta go fast!" shove
	"Weit uber cool hinaus." shove
	"Nimm das, Dr. Robotnik!" shove
	"Ich bin schneller als Sonic the Hedgehog!" shove
value dex-personality-endsay-base
dex-personality-endsay-base shuffles var dex-personality-endsay

0 stack
	"I've satisfied my hunger... for victory!" shove
	"Ich hatte es satt Dosenfutter zu essen." shove
	"Ich brauche noch eine Mahlzeit." shove
	"Wirst du das essen? Denn ich werde es tun." shove
value gourmand-personality-endsay-base
gourmand-personality-endsay-base shuffles var gourmand-personality-endsay

0 stack
	"BELLEN!" shove
	"WAU! WAU!" shove
	"WAU!" shove
	"BJORK!" shove
	"WAU!" shove
	"furzt.*" shove
	"leckt sich selbst.*" shove
value dog-personality-endsay-base
dog-personality-endsay-base shuffles var dog-personality-endsay

// Works like the skill check, but picks the personality stats.
// Also instead of the highest, picks the numbers furthest away from 3. So 0 and 6 tie with each other.
// Each one then has different lines for under 2 or over 4 checks. If it fails both, does a generic line.
: epilogue-personality-check args( char )

	// Gender check to ehis for less clumsy pronouns
	// <- char .female@ 0 > if "weiblich" . 1 else "mannlich" . 0 then to epilogue-gender
	
	<- char .female@ 0 > if
 		1 to epilogue-gender
 	else
 		0 to epilogue-gender
	then
	
	// Special Characters
	
	<- char .mason? 		  if "... :D" then;
	<- char .hermit? 		  if "'Feh! Ich kann nicht glauben dass ich davon uberzeugt wurde meine Kabine zu verlassen." then;
	<- char .specialtype@ 3 = if "Frohe Weihnachten an alle!" then;
	<- char .specialtype@ 4 = if "HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!" fbold then;
	<- char .specialtype@ 5 = if "blubberblubber" then;
	<- char .specialtype@ 6 = if "All das Training hat sich ausgezahlt!" then;
	<- char .specialtype@ 7 = if "Das war ein guter Kampf. Glaube ich." then;
	<- char .specialtype@ 8 = if "Das hat mich an einen neuen Wrestling Move denken lassen! Den MECHA PRESS!" then;
	<- char .specialtype@ 9 = if "One-two... one-two... I'm brutal and ruthless!" then;
	<- char .specialtype@ 10 = if "Wissen triumphiert wieder! Ich regiere." then;
	<- char .specialtype@ 11 = if "Ich brauche mehr Katzenfutter!" then;
	<- char .specialtype@ 12 = if "I'm going to need some stylish winter clothes..." then;
	<- char .specialtype@ 13 = if "Was fur ein bezauberndes Land!" then;
	<- char .specialtype@ 14 = if "'Das war einfach! Rollerderby ist gefahrlicher." then;
	<- char .specialtype@ 19 = if "!!!!" then;
	<- char .specialtype@ 20 = if "'Ich hatte nie geglaubt dass ich es schaffen wurde!" then;
	<- char .specialtype@ 21 = if "Hhhhheh I'll be running this place in a week, tops." then;
	<- char .specialtype@ 22 = if "WAU!" then;
	<- char .specialtype@ 25 = if tstc-personality-endsay depths 0= if drop "BIN ICH ENDLICH ZU STARK?" else pops nip then then;
	<- char .specialtype@ 26 = if "Ja!" then;
	<- char .specialtype@ 27 = if "schluck schluck" then;
	<- char .specialtype@ 29 = if "HA! ZEIT FUR EIN NEUES ABENTEUER!" then;
	<- char .specialtype@ 30 = if "Das ist mein Sieg!" then;
	<- char .specialtype@ 31 = if "Ich HASSE MONTAGS!" then;
	<- char .specialtype@ 33 = if "Ooo! Never forget me! Oooooo!" then;
	<- char .specialtype@ 34 = if "WIEHERN!" then;
	<- char .specialtype@ 35 = if "EEEEEEEEEEEEEEEEE!" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "vielen Dank" then;
	<- char .specialtype@ 45 = if "We really.... cleaned up!" then;
	<- char .specialtype@ 46 = if "I'm a mercenary.... a mercenary for hire." then;
	<- char .specialtype@ 49 = if "...." then;
	<- char .specialtype@ 50 = if "Half Life 3 kommt NICHT raus, sorry." then;
	<- char .specialtype@ 52 = if "HYAAAAAAAAAAAAAAAAAAAAAAAAAAAGH!" fbold then;
	<- char .specialtype@ 58 = if "pups" then;
	<- char .specialtype@ 61 = if "Abrakadabra, Nerds!" then;
	<- char anime? if animegirl-personality-endsay depths 0= if drop "Bin ich Kawaii?" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "DON'T LOOK AT MEEEEEEE!" then;
	<- char .specialtype@ 76 = if "GNORT!" then;
	<- char .specialtype@ 77 = if "nurrrrrp!" then;
	<- char .specialtype@ 81 = if "'STORT DIE HEXE BEIM SPASS, WIRD VON DER HEXE ABGESCHOSSEN!" then;
	<- char .specialtype@ 82 = if "BLAUGH!" then;
	<- char .specialtype@ 83 = if "blaugh" then;
	<- char .perk@ "Skelettkonigin" $= if "Ich verdanke alles den Skeletten!" then;
	<- char .specialtype@ 88 = if "Ich hore Toronto hat eine bluhende LARP Szene!" then;
	<- char .specialtype@ 90 = if "Wow! Ein neuer Ort zum Niederbrennen." then;
	<- char .specialtype@ 91 = if "'Ich stecke immer noch in diesem Kostum fest! Hilfe!" then;
	<- char .specialtype@ 92 = if "'HABEN SIE KEINE KUH MANN" then;
	<- char .specialtype@ 93 = if "........." then;
	<- char .specialtype@ 94 = if "ESSEN PANT!" then;
	<- char .specialtype@ 95 = if "Missionsziel in Sicht!" then;
	<- char .specialtype@ 96 = if "Perfekt! Ich kann hier viel mehr Menschen terrorisieren!" then;
	<- char .specialtype@ 97 = if "GUTE ARBEIT, BUB!" then;
	<- char .specialtype@ 98 = if "Es ist viel zu kalt hier fur dieses Outfit!" then;
	<- char .specialtype@ 102 = if "Uuurrrrgh ice everywhere." then;
	<- char .specialtype@ 104 = if "AMERICA #1! WOO! WOOOOOOOOOO!" then;
	<- char .specialtype@ 105 = if "Ein weiterer Sieg fur 100% amerikanischen Konnen!" then;
	<- char .specialtype@ 106 = if "Hier ist ein guter Ort zum Verweilen." then;
	<- char .specialtype@ 108 = if "Yarrrr!" then;
	<- char .charbro? 		   if "'GOOD GRIEF' IN JAPANESE" then;
	<- char .broom?            if "I have a confession to make... I was actually a broom the entire time." then;
	<- char .saguts?		   if "I GER UPPERCUT!" then;
	<- char .bryu?		   	   if "HADOUKEN! K" then;
	<- char .hhell?		   	   if "Heh... all thanks to Sweet Lady Propane." then;
	<- char .efudd?		   	   if "Ich bin siegreich! Ich! E*FUDD!" then;
	
	<- char dog? if dog-personality-endsay depths 0= if drop "bork." else pops nip then then;
	<- char cat? if "MIAU!" then;
	<- char goat? if "BAAAAA!" then;
	<- char pig? if "OINK!" then;
	<- char ispet? if "HRONK!" then;
	
	<- char .trait@ "CARL!" $= if "CAAARRRL!" then;
	<- char .trait@ "IST KEPA" $= if "Oh hey, ich habe es geschafft. Danke, dass du Death Road to Canada gespielt hast!" then;
	
	<- char .dexterity@ 2 > if dex-personality-endsay depths 0= if drop "Bei weitem cool!" else pops nip then then;
	
	<- char .trait@ "Anime Fan" $= if animefan-personality-endsay depths 0= if drop "Ich liebe dich, Kanada chan." else pops nip then then;
	<- char .trait@ "Phoenix" $= if "=" then;
	<- char .perk@ "T*S*T*C" $= if tstc-personality-endsay depths 0= if drop "Bin ich endlich zu gro?" else pops nip then then;
	<- char .trait@ "Heldentyp" $= if herotype-personality-endsay depths 0= if drop "'Ich werde immer dein Leibwachter sein." else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-personality-endsay depths 0= if drop "Lecker!" else pops nip then then;
	
	// If a character has the berserker trait, gives them an ending line for it.
	<- char .trait@ "BERSERKER!" $= if berserk-personality-endsay depths 0= if drop "BERSERKED!" else pops nip then then;
	
	// Rare checks above, common checks below.
	
	<- char .xtreme-stat-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_ATTITUDE = if
		<- char .cattitude+ if
			att-high-endsay depths 0= if drop "Ja!" else pops nip then
		then;
		<- char .cattitude- if
			att-low-endsay depths 0= if drop "Feh." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_COMPOSURE = if
		<- char .ctemper+ if
			comp-high-endsay depths 0= if drop "Puh." else pops nip then
		then;
		<- char .ctemper- if
			comp-low-endsay depths 0= if drop "Argh!" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_WITS = if
		<- char .cwits+ if
			wits-high-endsay depths 0= if drop "Ich wusste es!" else pops nip then
		then;
		<- char .cwits- if
			wits-low-endsay depths 0= if drop "Ah, was?" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_LOYALTY = if
		<- char .cloyalty+ if
			team-count-alive 1 > if loyal-high-endsay else loyal-high-endsay-solo then 
			depths 0= if drop "wurde ein standhafter Burger von Kanada.*" else pops nip then
		then;
		<- char .cloyalty- if
			loyal-low-endsay depths 0= if drop "weiterhin ein riesiges Arschloch.*" else pops nip then
		then;
	then
		 		
	generic-personality-endsay depths 0= if drop "Hurra!" else pops nip then

;


// Skill sayings
// Note: Needs 4 for each category, minimum, or you could run out of sayings

0 stack
	($ "wurde aus Kanada rausgeschmissen nachdem er sich weigerte seine Waffen aufzugeben.*" $) shove
	($ "lenkte seine EHIS Waffenbesessenheit in ein produktives Hobby um: Tannenzapfen sammeln.*" $) shove
	"wurde eine beruhmte Trick Shooting Attraktion im kanadischen Zirkus.*" shove
	($ "hat sich innerhalb von 5 Minuten nach seiner Einreise nach Kanada versehentlich seinen eigenen Fu abgeschossen.*" $) shove
	"hat versehentlich einen Pinguin erschossen und damit die kanadische Prime Directive verletzt.*" shove
value shoot-endsay-base
shoot-endsay-base shuffles var shoot-endsay

0 stack
	($ "wird verhaftet nachdem herausgefunden wurde dass seine Arztpraxis in Kanada nicht lizenziert ist.*" $) shove
	($ "diagnostiziert bei jedem seiner Patienten ein Furzproblem.*" $) shove
	"versucht, die Zombie Infektion zu heilen, macht aber nur ihre Haare etwas schoner.*" shove
	($ "entwickelt ein Heilmittel gegen Blahungen, das dann nach EHIM benannt wird.*" $) shove
	"macht eine verruckte Kopftransplantation mit einem Elch. Das wird sehr beliebt!*" shove
value med-endsay-base
med-endsay-base shuffles var med-endsay

0 stack
	"bringt unglaubliche Innovationen fur die Mecha Mounties. Sie servieren jetzt Kaffee.*" shove
	"entwirft eine sehr beliebte Linie von albernen Dreirad Autos.*" shove
	"wird als Held anerkannt nachdem er eine starkere Kettensage erfunden hat.*" shove
	"erfindet eine neue Version der Kettensage, eine mit bunten Lichtern.*" shove
	"wird reich nachdem er einen Automotor erfunden hat der mit Poutine betrieben wird.*" shove
	"erfindet eine bessere Mausefalle. Es hat Kohlefaser und ein USB Laufwerk.*" shove
value mech-endsay-base
mech-endsay-base shuffles var mech-endsay

0 stack
	($ "hat ein sehr beliebtes Fitnessprogramm entwickelt das auf EHIS Zombie Uberlebenserfahrung basiert.*" $) shove
	"wurde ein Athlet bei den Olympischen Spielen nach der Zombieapokalypse, bei denen Kanada jede Medaille gewann!*" shove
	"lebte ein langes, gesundes Leben in Kanada. Im Alter von 100 Jahren wurde er von einem Elch gebissen und explodierte.*" shove
	"nahm Hockey auf und zeichnete sich darin aus, nachdem er all diese Ubungszahne von Zombies niedergeschlagen hatte.*" shove
	"erfand eine neue zombie spezifische Kampfkunst und lehrte sie dann vielen Schulern.*" shove
value fit-endsay-base
fit-endsay-base shuffles var fit-endsay

0 stack
	($ "widmete EHIS ganzes Leben der Wiederherstellung des Bodybuildings zu seinem fruheren Glanz.*" $) shove
	// NOTE: below line is as long as you can get before hitting three lines
	"fing an, sich nach dem Grenzubertritt kontinuierlich zu beugen und horte nie mehr auf. Es storte niemanden.*" shove
	($ "wurde ein legendarer Volksheld nachdem er einen Elch suplexiert hatte mit dem EHE sich stritt.*" $) shove
	"kehrte oft zur Grenze zuruck, nur um schwerere Mobel auf mehr Zombies zu werfen.*" shove
	($ "wurde spater aufgrund seiner gewaltigen Starke zum Prasidenten aller Holzfaller gewahlt.*" $) shove
value str-endsay-base
str-endsay-base shuffles var str-endsay

0 stack
	($ "lief weiter diese Strae entlang, bis EHE am Horizont verschwand.*" $) shove
	($ "'war weithin bekannt fur EHIS Laufgeschwindigkeit und erhielt den Spitznamen 'Sonic the Hedgehog'.*" $) shove
	($ "benutzte SEINE superschnellen Beine um ein beruhmter Tanzer zu werden.*" $) shove
	"half dabei neue Grenzstadte mit Strom zu versorgen nachdem er in ein groes Hamsterrad gesteckt wurde.*" shove
value dex-endsay-base
dex-endsay-base shuffles var dex-endsay

0 stack
	($ "wollte ein Elch werden. Nachdem EHE gute Noten in der Elchschule bekommen hatte wurde dies wahr.*" $) shove
	"wurde ein maskierter Vigilant im Fledermaus Stil. Urheberrechtsanwalte wurden hinzugezogen.*" shove
	"lie sich in ein ruhiges Leben nieder. Es war irgendwie langweilig, ohne die Zombies.*" shove
	"durchstreifte die nordlichen Grenzen und erlebte mehr Abenteuer, aber mit weniger Zombies.*" shove
	"schrieb einen beliebten Zombie Uberlebensleitfaden der nur voller schlechter Ratschlage war.*" shove
	"hatte Schwierigkeiten, sich an Kanada anzupassen, und kehrte schlielich fur mehr Abenteuer in den Suden zuruck.*" shove
	"wurde schlielich vom Autofahren ausgeschlossen nachdem er jede Woche einen zerstort hatte.*" shove
	"'versuchte, ein Mountie zu werden, hatte aber nicht wirklich die Fahigkeiten dafur.*" shove
	($ "hatte sich nie an das Essen gewohnt, zu sehr an das Junkfood gewohnt, das EHE auf der Death Road geplundert hatte.*" $) shove
	($ "'hatte keine starken Fahigkeiten, und EHE hatte ein friedliches, aber ereignisloses Leben in Kanada.*" $) shove
value generic-skill-endsay-base
generic-skill-endsay-base shuffles var generic-skill-endsay

0 stack
	"wurde spater Teile Kanadas mit einer Armee ausgebildeter Hunde ubernehmen.*" shove
	"hatte ein langes Leben mit vielen Haustieren.*" shove
	($ "eHIS is a reference to the Epic Hunting and Information Service from the Epic series by Conor Kostick." $) shove
	($ "im not sure if this is a correct translation. Im not sure what the original sentence is supposed to mean."	$) shove
value dogpal-skill-endsay-base
dogpal-skill-endsay-base shuffles var dogpal-skill-endsay

0 stack
	($ "*In deutsch machte ein Anime basierend auf EHIS Abenteuern. Es nahm sich einige kreative Freiheiten in Bezug auf Niedlichkeit heraus." $) shove
	($ " *" $) shove
	"entwuchs kindlichen Animes und wechselte zu Mangas.*" shove
	"schrieb einen Manga der Zombies als Anime Madchen darstellte. Die Fans entwickelten sich zu einem bizarren Kult.*" shove
value animefan-skill-endsay-base
animefan-skill-endsay-base shuffles var animefan-skill-endsay

0 stack
	($ "verbrannte spontan. Genau so wie EHE gehen wollte!*" $) shove
	"wurde von einem Biber am Fu gebissen. Beide explodierten in Stucke.*" shove
	"wurde ausgeloscht als er von einem Schneeball getroffen wurde. Eine Gesundheit.*" shove
	"wurde verbannt nachdem er in einem Freundschaftsspiel eine Stadt zerstort hatte.*" shove
value berserk-skill-endsay-base
berserk-skill-endsay-base shuffles var berserk-skill-endsay

0 stack
	"'wurde das kawaii ste Anime Madchen in Kanada. Anmerkung des Ubersetzers: Kawaii bedeutet niedlich.*" shove
	"kampfte weiterhin gegen das Bose indem sie Dinge mit riesigen Herzstrahlen in die Luft jagte.*" shove
	"erreichte bald die Super Saiyajin Form, die ihr hauptsachlich eine groere Frisur verlieh.*" shove
	"Gestand ihrem Senpai ENDLICH ihre Liebe.*" shove
value animegirl-skill-endsay-base
animegirl-skill-endsay-base shuffles var animegirl-skill-endsay

0 stack
	"integrierte sich gut in die kanadische Gesellschaft, obwohl sie ein wandelndes Skelett war.*" shove
	"wurde immer wieder aus der Stadt vertrieben weil sie auf gruselige Weise tanzte.*" shove
	"lebte ein normales und gluckliches Leben, aber mit vielen unnotigen Klickgerauschen.*" shove
	($ "fand nie heraus, warum oder wie EHE Nahrung zu sich nehmen musste.*" $) shove
value skeleton-skill-endsay-base
skeleton-skill-endsay-base shuffles var skeleton-skill-endsay

0 stack
	($ "'wurde ein Experte Koch, der sehr gefragt ist nach EHIS Konserven Kuche.*" $) shove
	"bekam einen Job als Essenskritiker, was vielleicht der beste Job ist, den es gibt.*" shove
	"'bekam endlich etwas zu essen das nicht alter Junkfood oder Konserven war.*" shove
	"ging auf eine neue Reise um all die feine Kuche zu probieren die Kanada zu bieten hat.*" shove
value gourmand-skill-endsay-base
gourmand-skill-endsay-base shuffles var gourmand-skill-endsay

0 stack
	"war verantwortlich fur eine Reihe von Raububerfallen in Kanada, bevor er verbannt wurde.*" shove
	"grundete ein gefurchtetes Verbrechersyndikat. Eines in dem jeder schicke Kleider trug.*" shove
	($ "unterdruckte EHIS Drang, Menschen in Kanada auszurauben. Stattdessen war EHE einfach nur ein riesiger Idiot.*" $) shove
	"'fuhrte einen Uberfall an um die koniglichen Juwelen des Premierministers zu stehlen.*" shove
value bandit-skill-endsay-base
bandit-skill-endsay-base shuffles var bandit-skill-endsay

0 stack
	($ "nagte meistens an allem, was EHE in den Mund bekam, wirklich.*" $) shove
	"markierte so viel Territorium wie moglich.*" shove
	", da er zu sehr an die Freiheit der offenen Strae gewohnt war, wurde er nie stubenrein.*" shove
	($ "verbrachte den Rest von EHIS Leben damit unaufhorlich all die neuen Wildtiere anzubellen.*" $) shove
	($ "fand ein gutes Zuhause und machte glucklich Hundesachen fur den Rest von EHIS Leben.*" $) shove
value dog-skill-endsay-base
dog-skill-endsay-base shuffles var dog-skill-endsay


: fix-pronouns ( text )
	"EHIS" ehis $strrep
	"EHE" ehe $strrep
	"EHIM" ehim $strrep
;


// Main start of epilogue check below, further words above
// then; will exit out of the word should the IF check pass

// This checks for the "fahigkeiten", which are things like strength and mechanical.
// Takes whatever the highest skill is. If there's a tie, picks from the tied skills at random.
// Finally, checks that the highest skill is over 4. If not, goes to a generic pool of phrases.


: epilogue-skill-check args( char )

	// Special Characters
	
	<- char .mason? 		  if "hatte eine Menge Freunde gewonnen und ein Sommercamp eroffnet!*" then;
	<- char .hermit? 		  if "wurde ein Einsiedler in Kanada. Anstatt ein Einsiedler in Amerika zu sein.*" then;
	<- char .specialtype@ 3 = if "konnte Weihnachtsfreude in ganz Kanada verbreiten.*" then;
	<- char .specialtype@ 4 = if "'hatte riesige Kohlehaufen aus seinem Schlitten auf die Hauser aller geworfen.*" then;
	<- char .specialtype@ 5 = if "hatte weiter herumgefummelt.*" then;
	<- char .specialtype@ 6 = if "hatte die hochsten Range im beliebten kanadischen Sport Sumo Ringen erreicht.*" then;
	<- char .specialtype@ 7 = if "war nach Walhalla zuruckgekehrt, aber nicht, bevor sie ihren Hammer auf viele wichtige Denkmaler geworfen hatte.*" then;
	<- char .specialtype@ 8 = if "wurde mit seinen Wrestling Rivalen wiedervereinigt und hatte viele aufregende Kampfe.*" then;
	<- char .specialtype@ 9 = if "rannte herum und schlug auf Dinge ein und murmelte. Menschen, Tiere, Statuen, was auch immer.*" then;
	<- char .specialtype@ 10 = if "errichtete ein sehr schones geheimes Labor in Kanada und stellte dann eine Armee mutierter Biber auf.*" then;
	<- char .specialtype@ 11 = if "lie die meisten kanadischen Wildtiere aufgrund ihrer Katzenarmee aussterben.*" then;
	<- char .specialtype@ 12 = if "fand endlich einen zivilisierten Ort zum Verweilen. Sie entwickelte eine beliebte Modelinie.*" then;
	<- char .specialtype@ 13 = if "belastigte die Gruppe ewig und lie jeden diesen Wunsch nach Freundschaft bereuen.*" then;
	<- char .specialtype@ 14 = if "grundete die Mountie Rollerskating Division, die von allen Ubeltatern gefurchtet wird.*" then;
	<- char .specialtype@ 19 = if "begann eine neue Reise, um es nach Kolumbien zu schaffen. Danach andere C Lander.*" then;
	<- char .specialtype@ 20 = if "konnte den Bienenanzug endlich ablegen und durch ein Elchthema ersetzen.*" then;
	<- char .specialtype@ 21 = if "wurde schnell aus dem Land geworfen weil er ein immenser Idiot war.*" then;
	<- char .specialtype@ 22 = if "stieg hoch im Leben auf. Niemand hat jemals herausgefunden dass er drei ubereinander gestapelte Hunde war.*" then;
	<- char .specialtype@ 25 = if "zog viele Bodybuilder Junger an. Er war nicht mehr der letzte Bodybuilder.*" then;
	<- char .specialtype@ 26 = if "wurde beruhmt fur seine sehr beliebte und aufschlussreiche Stand up Comedy.*" then;
	<- char .specialtype@ 27 = if "uberlebte gegen alle Widrigkeiten. Frohes Erntedankfest!*" then;
	<- char .specialtype@ 29 = if "fugte Kanada alle moglichen Clown bezogenen Schrecken zu.*" then;
	<- char .specialtype@ 30 = if "im not sure if this is the correct translation. Im not sure what worthy means in this context." then;
	<- char .specialtype@ 31 = if "hasst Montags weiterhin." then;
	<- char .specialtype@ 33 = if "wunschte allen Lebewohl. Mit Tranen in den Augen verwandelte er sich in einen Baum.*" then;
	<- char .specialtype@ 34 = if "versammelte eine groe Gruppe von Menschen um sich, die alle in identischen Masken herumliefen.*" then;
	<- char .specialtype@ 35 = if "wurde in einen Zoo gesteckt nachdem alle erkannt hatten dass sie ein echter Panda war.*" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "'wurde ein beruhmter Sanger mit seinem Hit: Death Road to Canada" then;
	<- char .specialtype@ 45 = if "'wurde reich indem er einen neuen Mopp verkaufte der beim Zerschlagen von Zombies nicht kaputt geht.*" then;
	<- char .specialtype@ 46 = if "konnte seine Minigun in Kanada behalten. Niemand wollte sie ihm wirklich wegnehmen.*" then;
	<- char .specialtype@ 49 = if "wurde wieder Wissenschaftler. Das beinhaltet hauptsachlich Dinge mit einem Brecheisen zu schlagen.*" then;
	<- char .specialtype@ 50 = if "veroffentlichte Half Life 3.*" then;
	<- char .specialtype@ 52 = if "stolperte fur den Rest seines Lebens herum und zerschmetterte Topferwaren.*" then;
	<- char .specialtype@ 58 = if "fand endlich ein Badezimmer in dem er sicher kacken konnte.*" then;
	<- char .specialtype@ 61 = if "'sagte voraus, dass er es sicher nach Kanada schaffen wurde, und siehe, wo er jetzt ist.*" then;
	<- char anime? if animegirl-skill-endsay depths 0= if drop "wurde True Anime!*" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "lauerte als Grauel auf dem Land herum und erschreckte manchmal Dorfbewohner. Schon!*" then;
	<- char .specialtype@ 76 = if "'ist eine Art Rennmaus oder so? Ich wei es nicht.*" then;
	<- char .specialtype@ 77 = if "kehrte nach langer Abwesenheit zu seiner Familie in Kanada zuruck.*" then;
	<- char .specialtype@ 78 = if skeleton-skill-endsay depths 0= if drop "Ich liebe Skeletonfahren!" else pops nip then then;
	<- char .specialtype@ 81 = if "baute ein wirklich cooles Lebkuchenhaus.*" then;
	<- char .specialtype@ 82 = if "fuhr fort sein Untotenleben damit zu verbringen BLUGH zu machen und sich in eine Fledermaus zu verwandeln.*" then;
	<- char .specialtype@ 83 = if "steckte irgendwie in Fledermausgestalt fest.*" then;
	<- char .perk@ "Skelettkonigin" $= if "lie eine riesige Skelettarmee wachsen. Sie taten nie viel, sie sammelte sie nur gerne.*" then;
	<- char .specialtype@ 88 = if "wurde ein beliebter Barde am Konigshof des Konigs von Kanada.*" then;
	<- char .specialtype@ 90 = if "verlie Kanada nachdem er herausgefunden hatte dass aufgrund des Eises alles schwieriger zu verbrennen war.*" then;
	<- char .specialtype@ 91 = if "zerstorte Toronto. Nicht die echte Stadt, nur eine kleine Pappnachbildung.*" then;
	<- char .specialtype@ 92 = if "verschwand zuruck in die Bort Dimension, aus der er beschworen wurde.*" then;
	<- char .specialtype@ 93 = if "hatte einen Bosskampf mit Ascendant Bizarro Krankor. Sie redeten ihre Probleme aus.*" then;
	<- char .specialtype@ 94 = if "inspirierte die Menschen aufgrund seiner perfekten Ahnlichkeit mit Bart weiterhin.*" then;
	<- char .specialtype@ 95 = if "machte sich daran seine geheime Mission zu erfullen: das Rezept fur Tim Hortons Kaffee zu stehlen.*" then;
	<- char .specialtype@ 96 = if "grub ein sues Monster gefulltes Verlies aus. Es hatte Orks und Kobolde und Fallen. Nett!*" then;
	<- char .specialtype@ 97 = if "'wurde fur eine seltene Unterart des Vielfraes gehalten und in einen Zoo geworfen. Es machte ihm nichts aus.*" then;
	<- char .specialtype@ 98 = if "anderte sein Cosplay in eine Figur die dicke Winterkleidung anstelle von Strumpfhosen trug.*" then;
	<- char .specialtype@ 102 = if "machte an diesem Tag ein Nickerchen und wurde sofort in Eis eingeschlossen. Sie wachte in ferner Zukunft auf.*" then;
	<- char .specialtype@ 104 = <- char .specialtype@ 105 = or if "beantragte leise und verlegen die kanadische Staatsburgerschaft.*" then;
	<- char .specialtype@ 106 = if "half den Mounties eine leistungsstarke auf Protokollen basierende Anti Zombie Technologie zu entwickeln.*" then;
	<- char .specialtype@ 108 = if "'kann nicht so schnell rennen weil sie ein antikes Holzbein hat." then;
	<- char .charbro? 		   if "bekommt endlich, ENDLICH einen Fuball zu treten.*" then;
	<- char .broom?			   if "bleibt in einem Besenschrank stecken, diesmal aber in Kanada.*" then;
	<- char .saguts?		   if "kundigt seinen Job als Turnierkampfer und beginnt mit dem Verkauf beliebter Designer Augenklappen.*" then;
	<- char .bryu?		   	   if "startet ein Kampfturnier in Kanada, bei dem er hauptsachlich Feuerballe auf Elche" then;
	<- char .hhell?		   	   if "eroffnet ein Propangeschaft in Kanada. Der Clou: Er verkauft auch Propangas Zubehor.*" then;
	<- char .efudd?		   	   if "bildet ein Basketballteam, nur fur den Fall, dass Auerirdische die Erde zu einem Basketballspiel herausfordern.*" then;
	
	<- char dog? if dog-skill-endsay depths 0= if drop "lebte dieses Hundeleben.*" else pops nip then then;
	<- char cat? if "startete eine Massenmordkampagne gegen die ortliche Tierwelt, wie es Katzen tun.*" then;
	<- char goat? if "wurde eine kanadische Ziege. Was genau wie eine nicht kanadische Ziege ist.*" then;
	<- char pig? if "wurde in Kanada allgemein als EIN SCHWEIN anerkannt!*" then;
	<- char ispet? if "war endgultig wieder ein freies Tier geworden und verschwand in die Wildnis.*" then;
	
	<- char .trait@ "CARL!" $= if "CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRRL!" then;
	<- char .trait@ "IST KEPA" $= if "Geheime Tip: Suche den Brunnen der Wunsche im Krypta der Verfallenheit!" then;
	
	<- char .dexterity@ 2 > if dex-endsay depths 0= if drop "ging schnell.*" else pops nip then then;
	
	<- char .perk@ "Freund des Hundes" $= if dogpal-skill-endsay depths 0= if drop "blieb ein wahrer Freund des Hundes.*" else pops nip then then;
	<- char .trait@ "BERSERKER!" $= if berserk-skill-endsay depths 0= if drop "blieb wahnsinnig!*" else pops nip then then;
	<- char .trait@ "Bandit" $= if bandit-skill-endsay depths 0= if drop "lebte eine lange Leben von Plundern und Dieben.*" else pops nip then then;
	<- char .trait@ "Anime Fan" $= if animefan-skill-endsay depths 0= if drop "setzte sich weiter in der Anime Ausbildung fort.*" else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-skill-endsay depths 0= if drop "trank und essen im Kanada.*" else pops nip then then;
		
	// Above, rare case checks that prevent the common checks from happening.
	// Common checks below.
	
	<- char .hiskill-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_SHOOTING = if
		<- char .cshooting+ if
			shoot-endsay depths 0= if drop ($ "blieb fit im Ruhestand des EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MECHANICAL = if
		<- char .cmechanic+ if
			mech-endsay depths 0= if drop ($ "blieb fit im Ruhestand des EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MEDICAL = if
		<- char .cmedical+ if
			med-endsay depths 0= if drop ($ "blieb fit im Ruhestand des EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_DEXTERITY = if
		<- char .dexterity@ 0 > if
		// Extra dexterity ending check if it's their highest skill, which is unlikely.
			dex-endsay depths 0= if drop "ward schneller als Sonic.*" else pops nip then
		then;
	then
	 
	EPILOGUE-PICK STAT_STRENGTH = if
		<- char .cstrength+ if
			str-endsay depths 0= if drop "setzte sich weiter in Kanada fort um immer muskuloser zu bleiben.*" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_FITNESS = if
		<- char .cfitness+ if
			fit-endsay depths 0= if drop ($ "blieb fit im Ruhestand des EHIS.*" $) else pops nip then
		then;
	then
	
	// Failsafe placeholder below, this should instead be a generic pool it draws from
	// Like blurb/blogic draws from blurb/blurbdeck.df for generic sayings
	
	generic-skill-endsay depths 0= if drop "began a new life in Canada, with fewer zombies.*" else pops nip then
		
	// Old test, made each character say their gender
	// <- char .female@ 0 = if	"MANNLICH" else	"WEIBLICH" then
;

: epilogue-personality-check-fixed epilogue-personality-check fix-pronouns ;
: epilogue-skill-check-fixed epilogue-skill-check fix-pronouns ;
