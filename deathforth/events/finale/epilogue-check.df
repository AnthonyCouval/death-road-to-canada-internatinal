// : statlist STAT_VITALITY for i 1- dup print statname print cr next ;
: statlist STAT_VITALITY for i 1- dup type " - " type statname print next ;

: quick-histat-check
	0 #teamchar .histat-stack shuffles pops statname . 
	1 #teamchar .histat-stack shuffles pops statname .
;

: quick-hiskill-check
	0 #teamchar .hiskill-stack shuffles pops statname .  
	1 #teamchar .hiskill-stack shuffles pops statname .
;

0 value epilogue-gender

// : ehis .. epilogue-gender 1 < if " " else " " then .. ;
// : ehim .. epilogue-gender 1 < if "  lui " else " " then .. ;
// : ehe .. epilogue-gender 1 < if "  lui " else "  lei " then .. ; 

: ehis epilogue-gender 1 < if "lui" else "lei" then ;
: ehim epilogue-gender 1 < if "lui" else "lei" then ;
: ehe epilogue-gender 1 < if "lui" else "lei" then ; 

// THE REAL FUN BEGINS BELOW

0 value EPILOGUE-PICK

// Personality sayings

0 stack
	"Il Canada sara fantastico!" shove
	"Questo valeva sicuramente tutta la carneficina!" shove
	"'Non e stato poi cosi male!" shove
	"'Mi dispiace che il viaggio sia finito!" shove
value att-high-endsay-base
att-high-endsay-base shuffles var att-high-endsay

0 stack
	"'Fa troppo freddo qui!" shove
	"Mi fanno male i piedi!" shove
	"Odio gia il Canada! Il Canada puzza!" shove
	"'Non riesco a credere di aver marciato fin qui!" shove
	"Il Canada fa schifo! Votato negativamente!" shove
value att-low-endsay-base
att-low-endsay-base shuffles var att-low-endsay

0 stack
	"Bel lavoro." shove
	"Bene." shove
	"'Cosa c'e dopo?" shove
	"Facile." shove
value comp-high-endsay-base
comp-high-endsay-base shuffles var comp-high-endsay

0 stack
	"Sono carico! Sono CARICO!" shove
	"Woooooo!" shove
	"Extreeeeeme!" shove
	"AAAAAAAAAAAAAAAARGH! I DID IT!" shove
value comp-low-endsay-base
comp-low-endsay-base shuffles var comp-low-endsay

0 stack
	"Tutto secondo i piani!" shove
	"La mia previsione era una probabilita del 90% di raggiungere il Canada!" shove
	"Ho imparato molto su me stesso. E sugli zombie." shove
	"Scommetto che potrei arrivare qui ancora piu facilmente, sapendo cosa so adesso." shove
value wits-high-endsay-base
wits-high-endsay-base shuffles var wits-high-endsay

0 stack
	"Siamo gia arrivati?" shove
	"Questo e il Canada?" shove
	"Huuuuuuh? Oh, I made it." shove
	"'Dove sono? Non stavo facendo attenzione." shove
value wits-low-endsay-base
wits-low-endsay-base shuffles var wits-low-endsay

0 stack
	"Ce labbiamo fatta!" shove
	"Questo e tutto grazie al lavoro di squadra!" shove
	"'Siamo amici per sempre!" shove
	"Lamicizia e il motivo per cui ce labbiamo fatta!" shove
value loyal-high-endsay-base
loyal-high-endsay-base shuffles var loyal-high-endsay

0 stack
	"'No! Sono l'unico!" shove
	"'Brindiamo a quelli che non ce l'hanno fatta." shove
	"Well uh... crap. Guess I'm alone." shove
	"Ehi, ops. Beh, chi ha bisogno di amici, immagino." shove
value loyal-high-endsay-solo-base
loyal-high-endsay-solo-base shuffles var loyal-high-endsay-solo

0 stack
	"Bello, un intero nuovo paese da rapinare." shove
	"I knew that I'd make it hhhhheh." shove
	"'Governero questo posto!" shove
	"'Guarda tutti questi poveracci. Qui mi trovero bene." shove
value loyal-low-endsay-base
loyal-low-endsay-base shuffles var loyal-low-endsay

0 stack
	"Ho preso a pugni un alce cosi forte che e esploso!" shove
	"AAAAAAAAAARGH! AAAAARGH!" shove
	"BERSEEEERKEEEEEEEER!" shove
	"I love 'zerkin!!!" shove
value berserk-personality-endsay-base
berserk-personality-endsay-base shuffles var berserk-personality-endsay

0 stack
	"Ce lho fatta!" shove
	"E ora di godersi lo stile di vita canadese!" shove
	"'Per me bastano questi zombi, grazie." shove
	"Aspetta! Ho lasciato il mio spazzolino in Florida!" shove
	"Touchdooooown!" shove
	"Erano un sacco di zombi." shove
	"I'm going to need a new car..." shove
	"Mi sento insicuro senza sedie da lancio in vista." shove
	"Spero di poter saccheggiare altri bagni piu tardi." shove
	"E ora di rilassarsi." shove
	"Vittoria!" shove
	"Mi merito una vacanza." shove
	"Nevica sempre qui?" shove
	"Festa in arrivo!" shove
	"Congratulazioni!" shove
	"Whoaaaa!" shove
	"Questo e tutto grazie a me!" shove
value generic-personality-endsay-base
generic-personality-endsay-base shuffles var generic-personality-endsay

0 stack
	"E proprio come nei miei anime giapponesi!" shove
	"'Si sono fatti beffe delle mie statuette anime ma chi ride ADESSO?" shove
	"Esistono anime canadesi?" shove
	"Tutto questo e merito della superiorita delle armi giapponesi!" shove
value animefan-personality-endsay-base
animefan-personality-endsay-base shuffles var animefan-personality-endsay

0 stack
	"= ^_^ =" shove
	"La giustizia trionfa!" shove
	"RAGGIO DI CUORE!" rainbold shove
	"^O_O^" shove
	"'Beh, questa volta non sono esploso, quindi va bene." shove
value animegirl-personality-endsay-base
animegirl-personality-endsay-base shuffles var animegirl-personality-endsay

0 stack
	"TOO SWOLE TO CONTROL, BABY!!!" fbold shove
	"HO RAGGIUNTO LA MASSIMA FORZA!" fbold shove
	"YEAH!!!!!! TOO SWOLE!" fbold shove
	"I LOVE BEIN STRONG!!!" fbold shove
value tstc-personality-endsay-base
tstc-personality-endsay-base shuffles var tstc-personality-endsay

0 stack
	"'Saro sempre la tua guardia del corpo." shove
	"Iiiiii-I-Iiiiiii... wiiiilll always love yoooouuuuu." shove
	"Abbassati, signor Primo Ministro!" shove
	"'Sono ancora in allerta. Sto valutando le minacce." shove
value herotype-personality-endsay-base
herotype-personality-endsay-base shuffles var herotype-personality-endsay

0 stack
	"Devo andare veloce!" shove
	"Troppo figo." shove
	"Mangia questa, Dr. Robotnik!" shove
	"'Sono piu veloce di Sonic the Hedgehog!" shove
value dex-personality-endsay-base
dex-personality-endsay-base shuffles var dex-personality-endsay

0 stack
	"I've satisfied my hunger... for victory!" shove
	"Mi stavo stancando di mangiare cibo in scatola." shove
	"Ho bisogno di un altro pasto." shove
	"Hai intenzione di mangiarlo? Perche io lo faro." shove
value gourmand-personality-endsay-base
gourmand-personality-endsay-base shuffles var gourmand-personality-endsay

0 stack
	"ABBAIA!" shove
	"BAUBAU! BAUBAU!" shove
	"BAU!" shove
	"BJORC!" shove
	"BAUBAU!" shove
	"fa le puzzette.*" shove
	"si lecca.*" shove
value dog-personality-endsay-base
dog-personality-endsay-base shuffles var dog-personality-endsay

// Works like the skill check, but picks the personality stats.
// Also instead of the highest, picks the numbers furthest away from 3. So 0 and 6 tie with each other.
// Each one then has different lines for under 2 or over 4 checks. If it fails both, does a generic line.
: epilogue-personality-check args( char )

	// Gender check to ehis for less clumsy pronouns
	// <- char .female@ 0 > if "femmina" . 1 else "maschio" . 0 then to epilogue-gender
	
	<- char .female@ 0 > if
 		1 to epilogue-gender
 	else
 		0 to epilogue-gender
	then
	
	// Special Characters
	
	<- char .mason? 		  if "... :D" then;
	<- char .hermit? 		  if "'Feh! Non posso credere di essermi lasciato convincere a lasciare la mia cabina." then;
	<- char .specialtype@ 3 = if "Buon Natale a tutti!" then;
	<- char .specialtype@ 4 = if "HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!" fbold then;
	<- char .specialtype@ 5 = if "burbleburble" then;
	<- char .specialtype@ 6 = if "Tutto quellallenamento e stato utile!" then;
	<- char .specialtype@ 7 = if "E stata una bella battaglia. Immagino." then;
	<- char .specialtype@ 8 = if "Questo mi ha fatto pensare a una nuova mossa di wrestling! La MECHA PRESS!" then;
	<- char .specialtype@ 9 = if "One-two... one-two... I'm brutal and ruthless!" then;
	<- char .specialtype@ 10 = if "La conoscenza trionfa ancora! Io governo." then;
	<- char .specialtype@ 11 = if "Ho bisogno di piu cibo per gatti!" then;
	<- char .specialtype@ 12 = if "I'm going to need some stylish winter clothes..." then;
	<- char .specialtype@ 13 = if "Che terra incantevole!" then;
	<- char .specialtype@ 14 = if "'E stato facile! Il rollerderby e piu pericoloso." then;
	<- char .specialtype@ 19 = if "!!!!" then;
	<- char .specialtype@ 20 = if "'Non avrei mai creduto di farcela!" then;
	<- char .specialtype@ 21 = if "Hhhhheh I'll be running this place in a week, tops." then;
	<- char .specialtype@ 22 = if "BAUBAU!" then;
	<- char .specialtype@ 25 = if tstc-personality-endsay depths 0= if drop "SONO FINALMENTE TROPPO FORTE?" else pops nip then then;
	<- char .specialtype@ 26 = if "Si!" then;
	<- char .specialtype@ 27 = if "gobble gobble" then;
	<- char .specialtype@ 29 = if "AH! ORA DI UNA NUOVA AVVENTURA!" then;
	<- char .specialtype@ 30 = if "Questa e la mia vittoria!" then;
	<- char .specialtype@ 31 = if "ODIO I LUNEDI!" then;
	<- char .specialtype@ 33 = if "Ooo! Never forget me! Oooooo!" then;
	<- char .specialtype@ 34 = if "NI!" then;
	<- char .specialtype@ 35 = if "EEEEEEEEEEEEEEEEE!" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "thankyouverymuch" then;
	<- char .specialtype@ 45 = if "We really.... cleaned up!" then;
	<- char .specialtype@ 46 = if "I'm a mercenary.... a mercenary for hire." then;
	<- char .specialtype@ 49 = if "...." then;
	<- char .specialtype@ 50 = if "Half Life 3 NON uscira, mi dispiace." then;
	<- char .specialtype@ 52 = if "HYAAAAAAAAAAAAAAAAAAAAAAAAAAAGH!" fbold then;
	<- char .specialtype@ 58 = if "puzza" then;
	<- char .specialtype@ 61 = if "Abracadabra, nerd!" then;
	<- char anime? if animegirl-personality-endsay depths 0= if drop "Sono kawaii?" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "DON'T LOOK AT MEEEEEEE!" then;
	<- char .specialtype@ 76 = if "GNORT!" then;
	<- char .specialtype@ 77 = if "nurrrrrp!" then;
	<- char .specialtype@ 81 = if "'INTERFERISCI CON IL DIVERTIMENTO DELLA STREGA, SPARATI CON LA PISTOLA DELLA STREGA!" then;
	<- char .specialtype@ 82 = if "BLAUGH!" then;
	<- char .specialtype@ 83 = if "blaugh" then;
	<- char .perk@ "Regina Scheletro" $= if "Lo devo tutto agli scheletri!" then;
	<- char .specialtype@ 88 = if "Ho sentito che Toronto ha una fiorente scena LARP!" then;
	<- char .specialtype@ 90 = if "Wow! Un nuovo posto da bruciare." then;
	<- char .specialtype@ 91 = if "'Sono ancora bloccato in questo costume! Aiuto!" then;
	<- char .specialtype@ 92 = if "'NON AVERE L'UOMO Mucca" then;
	<- char .specialtype@ 93 = if "........." then;
	<- char .specialtype@ 94 = if "EET PANT!" then;
	<- char .specialtype@ 95 = if "Missione compiuta!" then;
	<- char .specialtype@ 96 = if "Perfetto! Posso terrorizzare molti piu umani qui!" then;
	<- char .specialtype@ 97 = if "OTTIMO LAVORO, BUB!" then;
	<- char .specialtype@ 98 = if "'Fa troppo freddo qui per questo vestito!" then;
	<- char .specialtype@ 102 = if "Uuurrrrgh ice everywhere." then;
	<- char .specialtype@ 104 = if "AMERICA #1! WOO! WOOOOOOOOOO!" then;
	<- char .specialtype@ 105 = if "Unaltra vittoria per il 100% americano Can Do ism!" then;
	<- char .specialtype@ 106 = if "Il mio registro dice che questo e un buon posto dove stare." then;
	<- char .specialtype@ 108 = if "Yarrrr!" then;
	<- char .charbro? 		   if "'Santo cielo! NOTA DEL TRADUTTORE: QUESTO SIGNIFICA LIBERAMENTE YARE YARE DAZE" then;
	<- char .broom?            if "I have a confession to make... I was actually a broom the entire time." then;
	<- char .saguts?		   if "I GER UPPERCUT!" then;
	<- char .bryu?		   	   if "'HADOOK! KADOOSHIN'!" then;
	<- char .hhell?		   	   if "Heh... all thanks to Sweet Lady Propane." then;
	<- char .efudd?		   	   if "Sono vittorioso! Io! E*FUDD!" then;
	
	<- char dog? if dog-personality-endsay depths 0= if drop "bork." else pops nip then then;
	<- char cat? if "MIAO!" then;
	<- char goat? if "BAAAAA!" then;
	<- char pig? if "OINK!" then;
	<- char ispet? if "HRONK!" then;
	
	<- char .trait@ "CARL!" $= if "CAAARRRL!" then;
	<- char .trait@ "E KEPA" $= if "Oh hey, ce lho fatta. Grazie per aver giocato a Death Road to Canada!" then;
	
	<- char .dexterity@ 2 > if dex-personality-endsay depths 0= if drop "Molto cool!" else pops nip then then;
	
	<- char .trait@ "Fan degli anime" $= if animefan-personality-endsay depths 0= if drop "Ti amo, Canada chan." else pops nip then then;
	<- char .trait@ "Fenice" $= if "La Fenice si alza! = The Phoenix rises!" then;
	<- char .perk@ "T*S*T*C" $= if tstc-personality-endsay depths 0= if drop "Sono finalmente troppo muscoloso?" else pops nip then then;
	<- char .trait@ "Tipo Eroe" $= if herotype-personality-endsay depths 0= if drop "'Saro sempre la tua guardia del corpo." else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-personality-endsay depths 0= if drop "Delizioso!" else pops nip then then;
	
	// If a character has the berserker trait, gives them an ending line for it.
	<- char .trait@ "BERSERK!" $= if berserk-personality-endsay depths 0= if drop "IMPAZZITO!" else pops nip then then;
	
	// Rare checks above, common checks below.
	
	<- char .xtreme-stat-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_ATTITUDE = if
		<- char .cattitude+ if
			att-high-endsay depths 0= if drop "Si!" else pops nip then
		then;
		<- char .cattitude- if
			att-low-endsay depths 0= if drop "Feh." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_COMPOSURE = if
		<- char .ctemper+ if
			comp-high-endsay depths 0= if drop "Phew." else pops nip then
		then;
		<- char .ctemper- if
			comp-low-endsay depths 0= if drop "Agh!" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_WITS = if
		<- char .cwits+ if
			wits-high-endsay depths 0= if drop "Lo sapevo!" else pops nip then
		then;
		<- char .cwits- if
			wits-low-endsay depths 0= if drop "Uh, cosa?" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_LOYALTY = if
		<- char .cloyalty+ if
			team-count-alive 1 > if loyal-high-endsay else loyal-high-endsay-solo then 
			depths 0= if drop "divenne un cittadino modello del Canada.*" else pops nip then
		then;
		<- char .cloyalty- if
			loyal-low-endsay depths 0= if drop "continuo ad essere un enorme stronzo.*" else pops nip then
		then;
	then
		 		
	generic-personality-endsay depths 0= if drop "Evviva!" else pops nip then

;


// Skill sayings
// Note: Needs 4 for each category, minimum, or you could run out of sayings

0 stack
	($ "venne cacciato dal Canada dopo essersi rifiutato di rinunciare alle armi.*" $) shove
	($ "incanalo lossessione per la pistola EHIS in un hobby produttivo: la raccolta di pigne." $) shove
	"divenne una famosa attrazione di tiro a segno al Canadian Circus." shove
	($ "si sparo accidentalmente a un piede, entro 5 minuti dallingresso in Canada." $) shove
	"sparo a un pinguino per sbaglio, violando la direttiva primaria canadese." shove
value shoot-endsay-base
shoot-endsay-base shuffles var shoot-endsay

0 stack
	($ "viene arrestato dopo aver scoperto che la sua pratica medica non e autorizzata in Canada." $) shove
	($ "diagnostica a tutti i suoi pazienti un problema di peti." $) shove
	"cerca di curare linfezione zombie, ma rende solo i loro capelli un po piu belli." shove
	($ "sviluppa una cura per la flatulenza, che viene poi chiamata con il suo nome." $) shove
	"fa un trapianto di testa di dottore pazzo con un alce. Questo diventa molto popolare!" shove
value med-endsay-base
med-endsay-base shuffles var med-endsay

0 stack
	"apporta incredibili innovazioni ai Mecha Mounties. Ora servono il caffe." shove
	"progetta una linea molto popolare di buffe auto a tre ruote." shove
	"e riconosciuto come un eroe dopo aver inventato una motosega piu potente." shove
	"inventa una nuova versione della motosega, con luci colorate attaccate." shove
	"diventa ricco dopo aver inventato un motore per auto che funziona a poutine." shove
	"inventa una migliore trappola per topi. Ha fibra di carbonio e ununita USB.*" shove
value mech-endsay-base
mech-endsay-base shuffles var mech-endsay

0 stack
	($ "ha inventato un programma di fitness molto popolare basato sullesperienza di sopravvivenza agli zombi EHIS.*" $) shove
	"e diventato un atleta alle Olimpiadi post zombocalypse, dove il Canada ha vinto ogni medaglia!*" shove
	"ha vissuto una lunga e sana vita in Canada. Alleta di 100 anni, e stato morso da un alce ed e esploso.*" shove
	"ha iniziato a giocare a hockey, eccellendo dopo tutta quella pratica nel colpire i denti degli zombi.*" shove
	"ha inventato una nuova arte marziale specifica per gli zombi, poi lha insegnata a molti discepoli.*" shove
value fit-endsay-base
fit-endsay-base shuffles var fit-endsay

0 stack
	($ "ha dedicato lintera vita di EHIS ad aiutare a ripristinare il bodybuilding alla sua antica gloria.*" $) shove
	// NOTE: below line is as long as you can get before hitting three lines
	"ha iniziato a flettersi continuamente dopo aver attraversato il confine e non si e mai fermato. A nessuno importava.*" shove
	($ "e diventato un leggendario eroe popolare dopo aver eseguito una suplex su un alce con cui EHE stava litigando.*" $) shove
	"spesso tornava al confine, solo per lanciare mobili pesanti contro altri zombi.*" shove
	($ "in seguito e stato eletto Presidente di tutti i boscaioli grazie alla sua possente forza.*" $) shove
value str-endsay-base
str-endsay-base shuffles var str-endsay

0 stack
	($ "ha continuato a correre su questa strada, finche EHE non e scomparso oltre lorizzonte.*" $) shove
	($ "'era ampiamente noto per la sua velocita di EHIS, guadagnando il soprannome di 'Sonic il Riccio'.*" $) shove
	($ "ha usato le sue gambe di EHIS a grande velocita per diventare un ballerino famoso.*" $) shove
	"ha aiutato a fornire energia alle nuove citta del fronteira dopo essere stato messo in una ruota da topo enorme.*" shove
value dex-endsay-base
dex-endsay-base shuffles var dex-endsay

0 stack
	($ "voleva diventare un alce. Dopodiche avendo ottenuto buoni voti alla scuola dellalce EHE lo fece realizzare.*" $) shove
	"si e trasformato in una maschera da pipistrello tematica. Furono chiamati avvocati dei diritti dautore.*" shove
	"si stabili in una vita tranquilla. Era un po noia, senza i zombie.*" shove
	"cammino per le frontiere settentrionali, avendo ancora piu avventure ma con meno zombie.*" shove
	"ha scritto un guida per la sopravvivenza ai zombie piena di cattivi consigli.*" shove
	"aveva difficolta a adattarsi al Canada, e infine e tornato a sud per di piu avventure.*" shove
	"fu infine bandito dal guidare le automobili dopo aver distrutte una ogni settimana.*" shove
	"'ha cercato di diventare un Mountie, ma realmente non aveva le abilita per farlo.*" shove
	($ "non si e mai abituato alla cucina, troppo usato a scavare il cibo di EHE sulla Strada della Morte.*" $) shove
	($ "." $) shove
value generic-skill-endsay-base
generic-skill-endsay-base shuffles var generic-skill-endsay

0 stack
	"in the future the dogs will take over Canada with an army of trained dogs." shove
	"ha avuto una lunga vita con un sacco di cani domestici.*" shove
	($ "ha pattugliato il confine con EHIS con il suo branco sempre piu numeroso di cani cacciatori di zombi.*" $) shove
	($ "ha trascorso la sua vita cercando di far eleggere uno dei suoi cani come Primo Ministro.*"	$) shove
value dogpal-skill-endsay-base
dogpal-skill-endsay-base shuffles var dogpal-skill-endsay

0 stack
	($ "ha realizzato un anime basato sulle sue avventure. Si e preso alcune liberta creative per quanto riguarda la carineria.*" $) shove
	($ "ha dedicato il resto della sua vita allanime che lha salvata.*" $) shove
	"e cresciuto rispetto allanime infantile ed e passato al manga.*" shove
	"ha scritto un manga che ritraeva gli zombi come ragazze anime. I fan sono diventati un bizzarro culto.*" shove
value animefan-skill-endsay-base
animefan-skill-endsay-base shuffles var animefan-skill-endsay

0 stack
	($ "e esploso spontaneamente. Esattamente come voleva EHE!*" $) shove
	"e stato morso da un castoro sul piede. Entrambi sono esplosi in pezzi.*" shove
	"e stato annientato quando e stato colpito da una palla di neve. Una salute.*" shove
	"e stato esiliato dopo aver distrutto una citta in una amichevole partita di hockey.*" shove
value berserk-skill-endsay-base
berserk-skill-endsay-base shuffles var berserk-skill-endsay

0 stack
	"'e diventata la ragazza anime piu kawaii del Canada. Nota del traduttore: Kawaii significa carina.*" shove
	"ha continuato a combattere il male facendo esplodere le cose con giganteschi raggi di cuore.*" shove
	"ha presto raggiunto la forma Super Saiyan, che le ha dato soprattutto unacconciatura piu grande.*" shove
	"FINALMENTE confessato a sempai.*" shove
value animegirl-skill-endsay-base
animegirl-skill-endsay-base shuffles var animegirl-skill-endsay

0 stack
	"integrato bene nella societa canadese, nonostante sia uno scheletro ambulante.*" shove
	"continuava a essere cacciato dalla citta a causa del ballo in modo inquietante.*" shove
	"vissuto una vita normale e felice, ma con un sacco di inutili rumori di battito.*" shove
	($ "non ha mai capito esattamente perche o come EHE avesse bisogno di mangiare cibo.*" $) shove
value skeleton-skill-endsay-base
skeleton-skill-endsay-base shuffles var skeleton-skill-endsay

0 stack
	($ "'e diventato uno chef esperto, molto richiesto per la sua cucina in scatola EHIS.*" $) shove
	"ha ottenuto un lavoro come critico gastronomico, che e forse il miglior lavoro che ci sia.*" shove
	"'finalmente ha potuto mangiare qualcosa che non fosse vecchio cibo spazzatura o in scatola.*" shove
	"e partito per un nuovo viaggio per assaggiare tutta la raffinata cucina che il Canada ha da offrire.*" shove
value gourmand-skill-endsay-base
gourmand-skill-endsay-base shuffles var gourmand-skill-endsay

0 stack
	"e stato responsabile di una serie di rapine in Canada, prima di essere esiliato.*" shove
	"ha creato un temuto sindacato criminale. Uno in cui tutti indossavano abiti eleganti.*" shove
	($ "ha soppresso limpulso di EHIS di rapinare le persone in Canada. Invece, EHE era solo un enorme idiota.*" $) shove
	"'ha guidato una rapina per rubare i gioielli reali del Primo Ministro.*" shove
value bandit-skill-endsay-base
bandit-skill-endsay-base shuffles var bandit-skill-endsay

0 stack
	($ "per lo piu rosicchiato qualunque cosa EHE potesse mettere in bocca, davvero.*" $) shove
	"marcato tanto territorio quanto possibile.*" shove
	", essendo troppo abituato alla liberta della strada aperta, non divenne mai addomesticato.*" shove
	($ "trascorse il resto della sua vita abbaiando incessantemente a tutta la nuova fauna selvatica.*" $) shove
	($ "trovo una buona casa e fece felicemente cose da cane per il resto della sua vita.*" $) shove
value dog-skill-endsay-base
dog-skill-endsay-base shuffles var dog-skill-endsay


: fix-pronouns ( text )
	"EHE" ehis $strrep
	"EHE" ehe $strrep
	"EHE" ehim $strrep
;


// Main start of epilogue check below, further words above
// then; will exit out of the word should the IF check pass

// This checks for the "abilita", which are things like strength and mechanical.
// Takes whatever the highest skill is. If there's a tie, picks from the tied skills at random.
// Finally, checks that the highest skill is over 4. If not, goes to a generic pool of phrases.


: epilogue-skill-check args( char )

	// Special Characters
	
	<- char .mason? 		  if "si fece un sacco di amici e apri un campo estivo!*" then;
	<- char .hermit? 		  if "divenne un eremita in Canada. Invece di essere un eremita in America.*" then;
	<- char .specialtype@ 3 = if "riusci a diffondere lallegria natalizia in tutto il Canada.*" then;
	<- char .specialtype@ 4 = if "'scarico enormi cumuli di carbone dalla sua slitta, sulle case di tutti.*" then;
	<- char .specialtype@ 5 = if "continuo ad agitarsi.*" then;
	<- char .specialtype@ 6 = if "raggiunse i piu alti ranghi nellamato sport canadese del Sumo Wrestling.*" then;
	<- char .specialtype@ 7 = if "e tornato al Valhalla, ma non prima di aver lanciato il suo martello su molti monumenti importanti.*" then;
	<- char .specialtype@ 8 = if "si e riunito con i suoi rivali di wrestling e ha avuto molte battaglie entusiasmanti.*" then;
	<- char .specialtype@ 9 = if "correva in giro a prendere a pugni le cose e borbottare. Persone, animali, statue, tutto cio che ti viene in mente.*" then;
	<- char .specialtype@ 10 = if "ha allestito un laboratorio segreto molto carino in Canada, poi ha creato un esercito di castori mutanti.*" then;
	<- char .specialtype@ 11 = if "ha reso estinta la maggior parte della fauna selvatica canadese, a causa del suo esercito di gatti.*" then;
	<- char .specialtype@ 12 = if "ha finalmente trovato un posto civile in cui stare. Ha sviluppato una popolare linea di moda.*" then;
	<- char .specialtype@ 13 = if "ha infastidito il gruppo per sempre, facendo rimpiangere a tutti quel desiderio di amicizia.*" then;
	<- char .specialtype@ 14 = if "ha fondato la divisione di pattinaggio Mountie, temuta da tutti i malfattori.*" then;
	<- char .specialtype@ 19 = if "ha iniziato un nuovo viaggio per raggiungere la Colombia. Dopo di che, altri paesi C.*" then;
	<- char .specialtype@ 20 = if "e finalmente riuscito a ritirare la tuta da ape, sostituendola con un tema alce.*" then;
	<- char .specialtype@ 21 = if "e stato rapidamente espulso dal paese per essere stato un immenso idiota.*" then;
	<- char .specialtype@ 22 = if "si e elevato nella vita. Nessuno ha mai scoperto che era tre cani impilati luno sullaltro.*" then;
	<- char .specialtype@ 25 = if "ha attirato molti discepoli culturisti. Non era piu lultimo bodybuilder.*" then;
	<- char .specialtype@ 26 = if "e diventato famoso per la sua commedia stand up molto popolare e perspicace.*" then;
	<- char .specialtype@ 27 = if "sopravvissuto contro ogni previsione. Felice Ringraziamento!*" then;
	<- char .specialtype@ 29 = if "inflitto ogni sorta di orrore circense al Canada.*" then;
	<- char .specialtype@ 30 = if "vagato per il Canada in cerca di degni avversari di scherma.*" then;
	<- char .specialtype@ 31 = if "continuato a odiare i lunedi.*" then;
	<- char .specialtype@ 33 = if "salutato tutti. Con le lacrime agli occhi, si e trasformato in un albero.*" then;
	<- char .specialtype@ 34 = if "radunato un grande seguito di persone, tutte che correvano in giro con maschere identiche.*" then;
	<- char .specialtype@ 35 = if "messo in uno zoo dopo che tutti si sono resi conto che era un vero panda.*" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "'diventato un famoso cantante, con la sua hit: 'Death Road to Canada" then;
	<- char .specialtype@ 45 = if "'arricchito vendendo un nuovo tipo di mocio che non si rompe quando si schiacciano gli zombi.*" then;
	<- char .specialtype@ 46 = if "riuscito a tenere la sua mitragliatrice in Canada. Nessuno voleva davvero portargliela via.*" then;
	<- char .specialtype@ 49 = if "tornato a fare lo scienziato. Cio comporta principalmente colpire le cose con un piede di porco.*" then;
	<- char .specialtype@ 50 = if "rilasciato Half Life 3.*" then;
	<- char .specialtype@ 52 = if "vagabondato in giro per il resto della sua vita, rompendo ceramiche.*" then;
	<- char .specialtype@ 58 = if "finalmente trovato un bagno in cui poteva tranquillamente fare la cacca.*" then;
	<- char .specialtype@ 61 = if "i'm not sure if this is the correct translation, but I think it's close enough. If you have a better translation, please let me know." then;
	<- char anime? if animegirl-skill-endsay depths 0= if drop "anime Vero!  True Anime!" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "the in Italian." then;
	<- char .specialtype@ 76 = if "i'm not sure about this translation." then;
	<- char .specialtype@ 77 = if "ritornato alla sua famiglia in Canada, dopo tanto tempo lontano." then;
	<- char .specialtype@ 78 = if skeleton-skill-endsay depths 0= if drop "Mi piace fare lo scheletrino!" else pops nip then then;
	<- char .specialtype@ 81 = if "costruito una casa di pan di zenzero davvero cool." then;
	<- char .specialtype@ 82 = if "bLUGH is the sound a vampire makes when hes turning into a bat." then;
	<- char .specialtype@ 83 = if "si e bloccato in forma di pipistrello, in qualche modo.*" then;
	<- char .perk@ "Regina Scheletro" $= if "fece crescere un enorme esercito di scheletri. Non fecero mai molto, a lei piaceva solo collezionarli.*" then;
	<- char .specialtype@ 88 = if "divenne un popolare bardo nella Corte Reale del Re del Canada.*" then;
	<- char .specialtype@ 90 = if "lascio il Canada dopo aver scoperto che tutto era piu difficile da bruciare a causa del ghiaccio.*" then;
	<- char .specialtype@ 91 = if "distrusse Toronto. Non la vera citta, solo una piccola replica di cartone.*" then;
	<- char .specialtype@ 92 = if "svani nella Dimensione Bort, da dove era stato evocato.*" then;
	<- char .specialtype@ 93 = if "ebbe uno scontro con lAscendente Bizarro Krankor. Risolsero i loro problemi parlando.*" then;
	<- char .specialtype@ 94 = if "continuo a ispirare le persone grazie alla sua perfetta somiglianza con Bart.*" then;
	<- char .specialtype@ 95 = if "ando avanti a completare la sua missione segreta: rubare la ricetta del caffe di Tim Hortons.*" then;
	<- char .specialtype@ 96 = if "scavo un dolce sotterraneo pieno di mostri. Cerano orchi goblin e trappole. Bello!*" then;
	<- char .specialtype@ 97 = if "'fu scambiato per una rara sottospecie di ghiottone e fu gettato in uno zoo. Non gli importava.*" then;
	<- char .specialtype@ 98 = if "cambio il suo cosplay in un personaggio che indossava spessi abiti invernali invece di calzamaglie.*" then;
	<- char .specialtype@ 102 = if "fece un pisolino quel giorno e fu immediatamente rinchiusa nel ghiaccio. Si sveglio in un lontano futuro.*" then;
	<- char .specialtype@ 104 = <- char .specialtype@ 105 = or if "chiese tranquillamente e timidamente la cittadinanza canadese.*" then;
	<- char .specialtype@ 106 = if "aiuto i mounties a sviluppare una potente tecnologia anti zombie basata sui tronchi.*" then;
	<- char .specialtype@ 108 = if "'non puo correre cosi velocemente a causa della sua preziosa gamba di legno antica." then;
	<- char .charbro? 		   if "finalmente, FINALLY riesce a calare un pallone da football.*" then;
	<- char .broom?			   if "si blocca in un armadio a scopa, ma stavolta in Canada.*" then;
	<- char .saguts?		   if "abbandona il suo lavoro da lottatore di tornei e inizia a vendere occhiali da sole popolari.*" then;
	<- char .bryu?		   	   if "apre un torneo di lotta in Canada, dove principalmente spara palle di fuoco ai cervi" then;
	<- char .hhell?		   	   if "apre un business di gas propano in Canada. La sorpresa: Vende anche accessori per gas propano.*" then;
	<- char .efudd?		   	   if "forma una squadra di pallacanestro, solo per caso gli alieni sfidino la Terra a una partita di pallacanestro.*" then;
	
	<- char dog? if dog-skill-endsay depths 0= if drop "viveva la vita canina.*" else pops nip then then;
	<- char cat? if "ha avviato una campagna di omicidi di massa sulla fauna locale, come fanno i gatti.*" then;
	<- char goat? if "diventa un capra canadese. Cio e proprio come una capra non canadese.*" then;
	<- char pig? if "era ampiamente riconosciuto in Canada come essendo UN MAIALE!*" then;
	<- char ispet? if "era finalmente un animale libero di nuovo, e scomparve nella selvaggina.*" then;
	
	<- char .trait@ "CARL!" $= if "CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRRL!" then;
	<- char .trait@ "E KEPA" $= if "Consiglio Segreto: Cerca il Pozzo dei Desideri nel Cripta dellAvvelenamento!" then;
	
	<- char .dexterity@ 2 > if dex-endsay depths 0= if drop "andava veloce.*" else pops nip then then;
	
	<- char .perk@ "Amico del cane" $= if dogpal-skill-endsay depths 0= if drop "rimase un vero amico di cane.*" else pops nip then then;
	<- char .trait@ "BERSERK!" $= if berserk-skill-endsay depths 0= if drop "rimase berserk!*" else pops nip then then;
	<- char .trait@ "Bandito" $= if bandit-skill-endsay depths 0= if drop "visse una lunga vita di rapine e furti.*" else pops nip then then;
	<- char .trait@ "Fan degli anime" $= if animefan-skill-endsay depths 0= if drop "continuo gli studi di anime.*" else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-skill-endsay depths 0= if drop "bevve e ceno in Canada.*" else pops nip then then;
		
	// Above, rare case checks that prevent the common checks from happening.
	// Common checks below.
	
	<- char .hiskill-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_SHOOTING = if
		<- char .cshooting+ if
			shoot-endsay depths 0= if drop ($ "si mantenne in forma nel pensionamento EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MECHANICAL = if
		<- char .cmechanic+ if
			mech-endsay depths 0= if drop ($ "si mantenne in forma nel pensionamento EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MEDICAL = if
		<- char .cmedical+ if
			med-endsay depths 0= if drop ($ "si mantenne in forma nel pensionamento EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_DEXTERITY = if
		<- char .dexterity@ 0 > if
		// Extra dexterity ending check if it's their highest skill, which is unlikely.
			dex-endsay depths 0= if drop "divenne piu veloce di Sonic.*" else pops nip then
		then;
	then
	 
	EPILOGUE-PICK STAT_STRENGTH = if
		<- char .cstrength+ if
			str-endsay depths 0= if drop "continuo ad essere grosso in Canada.*" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_FITNESS = if
		<- char .cfitness+ if
			fit-endsay depths 0= if drop ($ "si mantenne in forma nel pensionamento EHIS.*" $) else pops nip then
		then;
	then
	
	// Failsafe placeholder below, this should instead be a generic pool it draws from
	// Like blurb/blogic draws from blurb/blurbdeck.df for generic sayings
	
	generic-skill-endsay depths 0= if drop "inizio una nuova vita in Canada, con meno zombi.*" else pops nip then
		
	// Old test, made each character say their gender
	// <- char .female@ 0 = if	"MASCHIO" else	"FEMMINA" then
;

: epilogue-personality-check-fixed epilogue-personality-check fix-pronouns ;
: epilogue-skill-check-fixed epilogue-skill-check fix-pronouns ;
