// : statlist STAT_VITALITY for i 1- dup print statname print cr next ;
: statlist STAT_VITALITY for i 1- dup type " - " type statname print next ;

: quick-histat-check
	0 #teamchar .histat-stack shuffles pops statname . 
	1 #teamchar .histat-stack shuffles pops statname .
;

: quick-hiskill-check
	0 #teamchar .hiskill-stack shuffles pops statname .  
	1 #teamchar .hiskill-stack shuffles pops statname .
;

0 value epilogue-gender

// : ehis .. epilogue-gender 1 < if "  dele " else "  dela " then .. ;
// : ehim .. epilogue-gender 1 < if "  ele " else "  dela " then .. ;
// : ehe .. epilogue-gender 1 < if "  ele " else "  ela " then .. ; 

: ehis epilogue-gender 1 < if "dele" else "dela" then ;
: ehim epilogue-gender 1 < if "ele" else "dela" then ;
: ehe epilogue-gender 1 < if "ele" else "ela" then ; 

// THE REAL FUN BEGINS BELOW

0 value EPILOGUE-PICK

// Personality sayings

0 stack
	"O Canada vai ser otimo!" shove
	"Definitivamente valeu toda a carnificina!" shove
	"'Isso nao foi tao ruim!" shove
	"'Sinto muito que a jornada tenha acabado agora!" shove
value att-high-endsay-base
att-high-endsay-base shuffles var att-high-endsay

0 stack
	"'Esta muito frio aqui!" shove
	"Meus pes doem!" shove
	"Eu ja odeio o Canada! O Canada cheira mal!" shove
	"'Nao acredito que marchei ate aqui!" shove
	"O Canada e ruim! Votado negativamente!" shove
value att-low-endsay-base
att-low-endsay-base shuffles var att-low-endsay

0 stack
	"Bom trabalho." shove
	"Bom." shove
	"'Qual e o proximo?" shove
	"Facil." shove
value comp-high-endsay-base
comp-high-endsay-base shuffles var comp-high-endsay

0 stack
	"'Estou empolgado! Estou EMPOLGADO!" shove
	"Woooooo!" shove
	"Extreeeeeme!" shove
	"AAAAAAAAAAAAAAAARGH! I DID IT!" shove
value comp-low-endsay-base
comp-low-endsay-base shuffles var comp-low-endsay

0 stack
	"Tudo de acordo com o plano!" shove
	"Minha previsao era de 90% de chance de chegar ao Canada!" shove
	"Aprendi muito sobre mim mesmo. E zumbis." shove
	"Aposto que conseguiria chegar aqui ainda mais facil, sabendo o que sei agora." shove
value wits-high-endsay-base
wits-high-endsay-base shuffles var wits-high-endsay

0 stack
	"Ja chegamos?" shove
	"Is isso Canada?" shove
	"Huuuuuuh? Oh, I made it." shove
	"'Onde estou? Nao estava me preocupando." shove
value wits-low-endsay-base
wits-low-endsay-base shuffles var wits-low-endsay

0 stack
	"Conseguimos!" shove
	"Tudo isto e gracas ao trabalho em equipe!" shove
	"'Queremos ser amigos para sempre!" shove
	"A amizade nos fez isso!" shove
value loyal-high-endsay-base
loyal-high-endsay-base shuffles var loyal-high-endsay

0 stack
	"'Nao! Sou o unico!" shove
	"'Aqui esta para os que nao fizeram." shove
	"Well uh... crap. Guess I'm alone." shove
	"Err, deus me livre. Bem, talvez eu nao preciso de amigos nada." shove
value loyal-high-endsay-solo-base
loyal-high-endsay-solo-base shuffles var loyal-high-endsay-solo

0 stack
	"Nice, uma nova terra para roubar." shove
	"I knew that I'd make it hhhhheh." shove
	"'Vou reinar neste lugar!" shove
	"'Veja todos esses canguros. Vou fazer bem aqui." shove
value loyal-low-endsay-base
loyal-low-endsay-base shuffles var loyal-low-endsay

0 stack
	"Eu soquei um alce tao forte que ele explodiu!" shove
	"AAAAAAAAAARGH! AAAAARGH!" shove
	"BERSEEEERKEEEEEEEER!" shove
	"I love 'zerkin!!!" shove
value berserk-personality-endsay-base
berserk-personality-endsay-base shuffles var berserk-personality-endsay

0 stack
	"Eu consegui!" shove
	"Hora de aproveitar o jeito canadense de viver!" shove
	"'Ja vi zumbis demais, obrigado." shove
	"Espera! Esqueci minha escova de dente na Florida!" shove
	"Touchdooooown!" shove
	"Foram muitos zumbis." shove
	"I'm going to need a new car..." shove
	"Me sinto inseguro sem nenhuma cadeira para arremessar por perto." shove
	"Espero poder saquear mais banheiros depois." shove
	"Hora de relaxar e descansar." shove
	"Vitoria!" shove
	"Mereco ferias." shove
	"Sempre neva aqui?" shove
	"Hora da festa!" shove
	"Parabens!" shove
	"Whoaaaa!" shove
	"Isso e tudo gracas a mim!" shove
value generic-personality-endsay-base
generic-personality-endsay-base shuffles var generic-personality-endsay

0 stack
	"E igualzinho aos meus animes japoneses!" shove
	"'Eles riram das minhas figuras de anime mas quem esta rindo AGORA?" shove
	"Existe anime canadense?" shove
	"Tudo isso gracas a superioridade das armas japonesas!" shove
value animefan-personality-endsay-base
animefan-personality-endsay-base shuffles var animefan-personality-endsay

0 stack
	"= ^_^ =" shove
	"A justica triunfa!" shove
	"RAIO DO CORACAO!" rainbold shove
	"^O_O^" shove
	"'Bem, eu nao explodi dessa vez, entao isso e legal." shove
value animegirl-personality-endsay-base
animegirl-personality-endsay-base shuffles var animegirl-personality-endsay

0 stack
	"TOO SWOLE TO CONTROL, BABY!!!" fbold shove
	"EU ALCANCEI O MUSCULO MAXIMO!" fbold shove
	"YEAH!!!!!! TOO SWOLE!" fbold shove
	"I LOVE BEIN STRONG!!!" fbold shove
value tstc-personality-endsay-base
tstc-personality-endsay-base shuffles var tstc-personality-endsay

0 stack
	"'Eu sempre serei seu guarda costas." shove
	"Iiiiii-I-Iiiiiii... wiiiilll always love yoooouuuuu." shove
	"Abaixe se, Sr Primeiro Ministro!" shove
	"'Ainda estou em alerta. Estou avaliando as ameacas." shove
value herotype-personality-endsay-base
herotype-personality-endsay-base shuffles var herotype-personality-endsay

0 stack
	"Tem que ir rapido!" shove
	"Muito alem do legal." shove
	"Coma isso, Dr. Robotnik!" shove
	"'Sou mais rapido que o Sonic the Hedgehog!" shove
value dex-personality-endsay-base
dex-personality-endsay-base shuffles var dex-personality-endsay

0 stack
	"I've satisfied my hunger... for victory!" shove
	"Eu estava ficando cansado de comer comida enlatada." shove
	"Eu preciso de outra refeicao." shove
	"Vai comer isso? Porque eu vou." shove
value gourmand-personality-endsay-base
gourmand-personality-endsay-base shuffles var gourmand-personality-endsay

0 stack
	"BARK!" shove
	"AU! AU!" shove
	"BORK!" shove
	"BJORK!" shove
	"AU AU!" shove
	"peidos.*" shove
	"se lambe.*" shove
value dog-personality-endsay-base
dog-personality-endsay-base shuffles var dog-personality-endsay

// Works like the skill check, but picks the personality stats.
// Also instead of the highest, picks the numbers furthest away from 3. So 0 and 6 tie with each other.
// Each one then has different lines for under 2 or over 4 checks. If it fails both, does a generic line.
: epilogue-personality-check args( char )

	// Gender check to ehis for less clumsy pronouns
	// <- char .female@ 0 > if "mulher" . 1 else "homem" . 0 then to epilogue-gender
	
	<- char .female@ 0 > if
 		1 to epilogue-gender
 	else
 		0 to epilogue-gender
	then
	
	// Special Characters
	
	<- char .mason? 		  if "... :D" then;
	<- char .hermit? 		  if "'Feh! Nao acredito que fui convencido a sair da minha cabana." then;
	<- char .specialtype@ 3 = if "Feliz Natal a todos!" then;
	<- char .specialtype@ 4 = if "HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!HO!" fbold then;
	<- char .specialtype@ 5 = if "borbulhaborbulha" then;
	<- char .specialtype@ 6 = if "Todo aquele treinamento foi util!" then;
	<- char .specialtype@ 7 = if "Essa foi uma boa batalha. Eu acho." then;
	<- char .specialtype@ 8 = if "Isso me fez pensar em um novo movimento de luta livre! A PRENSA MECHA!" then;
	<- char .specialtype@ 9 = if "One-two... one-two... I'm brutal and ruthless!" then;
	<- char .specialtype@ 10 = if "O conhecimento triunfa novamente! Eu governo." then;
	<- char .specialtype@ 11 = if "Preciso de mais comida de gato!" then;
	<- char .specialtype@ 12 = if "I'm going to need some stylish winter clothes..." then;
	<- char .specialtype@ 13 = if "Que terra encantadora!" then;
	<- char .specialtype@ 14 = if "Isso foi facil! Rollerderby e mais perigoso." then;
	<- char .specialtype@ 19 = if "!!!!" then;
	<- char .specialtype@ 20 = if "Eu nunca acreditei que eu conseguiria!" then;
	<- char .specialtype@ 21 = if "Hhhhheh I'll be running this place in a week, tops." then;
	<- char .specialtype@ 22 = if "AU AU!" then;
	<- char .specialtype@ 25 = if tstc-personality-endsay depths 0= if drop "ESTOU FINALMENTE MUITO SARADO?" else pops nip then then;
	<- char .specialtype@ 26 = if "Sim!" then;
	<- char .specialtype@ 27 = if "glu glu" then;
	<- char .specialtype@ 29 = if "HA! HORA DE UMA NOVA AVENTURA!" then;
	<- char .specialtype@ 30 = if "Esta e minha vitoria!" then;
	<- char .specialtype@ 31 = if "EU ODEIO SEGUNDAS!" then;
	<- char .specialtype@ 33 = if "Ooo! Never forget me! Oooooo!" then;
	<- char .specialtype@ 34 = if "RELINCHO!" then;
	<- char .specialtype@ 35 = if "EEEEEEEEEEEEEEEEE!" then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "obrigadomuito" then;
	<- char .specialtype@ 45 = if "We really.... cleaned up!" then;
	<- char .specialtype@ 46 = if "I'm a mercenary.... a mercenary for hire." then;
	<- char .specialtype@ 49 = if "...." then;
	<- char .specialtype@ 50 = if "Half Life 3 NAO vai sair, desculpe." then;
	<- char .specialtype@ 52 = if "HYAAAAAAAAAAAAAAAAAAAAAAAAAAAGH!" fbold then;
	<- char .specialtype@ 58 = if "pum" then;
	<- char .specialtype@ 61 = if "Abracadabra, nerds!" then;
	<- char anime? if animegirl-personality-endsay depths 0= if drop "Sou Kawaii?" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "DON'T LOOK AT MEEEEEEE!" then;
	<- char .specialtype@ 76 = if "TROG! backwards" then;
	<- char .specialtype@ 77 = if "nurrrrrp!" then;
	<- char .specialtype@ 81 = if "'INTERFIRA NA DIVERSAO DA BRUXA, LEVE UM TIRO DA ARMA DA BRUXA!" then;
	<- char .specialtype@ 82 = if "ECA!" then;
	<- char .specialtype@ 83 = if "eca" then;
	<- char .perk@ "Rainha Esqueleta" $= if "Devo tudo aos esqueletos!" then;
	<- char .specialtype@ 88 = if "Eu ouvi que Toronto tem uma cena de LARPing prospera!" then;
	<- char .specialtype@ 90 = if "Uau! Um novo lugar para incendiar." then;
	<- char .specialtype@ 91 = if "'Ainda estou preso nessa fantasia! Socorro!" then;
	<- char .specialtype@ 92 = if "'NAO TENHA VACA MAN" then;
	<- char .specialtype@ 93 = if "........." then;
	<- char .specialtype@ 94 = if "EET PANT!" then;
	<- char .specialtype@ 95 = if "Objetivo da missao a vista!" then;
	<- char .specialtype@ 96 = if "Perfeito! Posso aterrorizar muito mais humanos aqui!" then;
	<- char .specialtype@ 97 = if "BOM TRABALHO, BUB!" then;
	<- char .specialtype@ 98 = if "'Esta muito frio aqui para essa roupa!" then;
	<- char .specialtype@ 102 = if "Uuurrrrgh ice everywhere." then;
	<- char .specialtype@ 104 = if "AMERICA #1! WOO! WOOOOOOOOOO!" then;
	<- char .specialtype@ 105 = if "Mais uma vitoria para o Can Do ism 100% americano!" then;
	<- char .specialtype@ 106 = if "Meu log diz que este e um bom lugar para ficar." then;
	<- char .specialtype@ 108 = if "Yarrrr!" then;
	<- char .charbro? 		   if "'Santo Deus! NOTA DO TRADUTOR: ISSO SIGNIFICA LITERALMENTE YARE YARE DAZE" then;
	<- char .broom?            if "I have a confession to make... I was actually a broom the entire time." then;
	<- char .saguts?		   if "I GER UPPERCUT!" then;
	<- char .bryu?		   	   if "'HADOOK! KADOOSHIN'!" then;
	<- char .hhell?		   	   if "Heh... all thanks to Sweet Lady Propane." then;
	<- char .efudd?		   	   if "Sou vitorioso! Eu! E*FUDD!" then;
	
	<- char dog? if dog-personality-endsay depths 0= if drop "bork." else pops nip then then;
	<- char cat? if "MIAU!" then;
	<- char goat? if "BAAAAA!" then;
	<- char pig? if "OINK!" then;
	<- char ispet? if "HRONK!" then;
	
	<- char .trait@ "CARL!" $= if "CAAARRRL!" then;
	<- char .trait@ "E KEPA" $= if "Oh hey, eu consegui. Obrigado por jogar Death Road to Canada!" then;
	
	<- char .dexterity@ 2 > if dex-personality-endsay depths 0= if drop "Muito legal!" else pops nip then then;
	
	<- char .trait@ "Fa de Anime" $= if animefan-personality-endsay depths 0= if drop "Eu te amo, Canada chan." else pops nip then then;
	<- char .trait@ "Fenix" $= if "D" then;
	<- char .perk@ "T*S*T*C" $= if tstc-personality-endsay depths 0= if drop "Sera que finalmente estou muito bombado?" else pops nip then then;
	<- char .trait@ "Tipo de Heroi" $= if herotype-personality-endsay depths 0= if drop "'Eu sempre serei seu guarda costas." else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-personality-endsay depths 0= if drop "Delicioso!" else pops nip then then;
	
	// If a character has the berserker trait, gives them an ending line for it.
	<- char .trait@ "BERSERK!" $= if berserk-personality-endsay depths 0= if drop "ENLOQUECIDO!" else pops nip then then;
	
	// Rare checks above, common checks below.
	
	<- char .xtreme-stat-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_ATTITUDE = if
		<- char .cattitude+ if
			att-high-endsay depths 0= if drop "Sim!" else pops nip then
		then;
		<- char .cattitude- if
			att-low-endsay depths 0= if drop "Feh." else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_COMPOSURE = if
		<- char .ctemper+ if
			comp-high-endsay depths 0= if drop "Ufa." else pops nip then
		then;
		<- char .ctemper- if
			comp-low-endsay depths 0= if drop "Argh!" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_WITS = if
		<- char .cwits+ if
			wits-high-endsay depths 0= if drop "Eu sabia!" else pops nip then
		then;
		<- char .cwits- if
			wits-low-endsay depths 0= if drop "Uh, o que?" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_LOYALTY = if
		<- char .cloyalty+ if
			team-count-alive 1 > if loyal-high-endsay else loyal-high-endsay-solo then 
			depths 0= if drop "tornou se um cidadao exemplar do Canada.*" else pops nip then
		then;
		<- char .cloyalty- if
			loyal-low-endsay depths 0= if drop "continuou sendo um enorme idiota.*" else pops nip then
		then;
	then
		 		
	generic-personality-endsay depths 0= if drop "Viva!" else pops nip then

;


// Skill sayings
// Note: Needs 4 for each category, minimum, or you could run out of sayings

0 stack
	($ "foi expulso do Canada depois de se recusar a entregar as armas.*" $) shove
	($ "canalizou a obsessao por armas em um hobby produtivo: colecionar pinhas.*" $) shove
	"tornou se uma famosa atracao de tiro ao alvo no Circo Canadense.*" shove
	($ "acidentalmente atirou no proprio pe, 5 minutos depois de entrar no Canada.*" $) shove
	"atirou em um pinguim por acidente, violando a Primeira Diretriz Canadense.*" shove
value shoot-endsay-base
shoot-endsay-base shuffles var shoot-endsay

0 stack
	($ "foi preso depois que descobriram que sua pratica medica nao era licenciada no Canada.*" $) shove
	($ "diagnostica todos os seus pacientes com um problema de peido.*" $) shove
	"tenta curar a infeccao zumbi, mas so deixa o cabelo deles um pouco mais bonito.*" shove
	($ "desenvolve uma cura para flatulencia, que recebe o seu nome.*" $) shove
	"faz um transplante de cabeca de medico louco com um alce. Isso se torna muito popular!*" shove
value med-endsay-base
med-endsay-base shuffles var med-endsay

0 stack
	"faz inovacoes incriveis nos Mecha Mounties. Agora eles servem cafe.*" shove
	"projeta uma linha muito popular de carros patetas de tres rodas.*" shove
	"e reconhecido como um heroi depois de inventar uma motosserra mais potente.*" shove
	"im going to cut you upIn portuguese Im going to" shove
	"poutine is a Canadian dish originating from Quebec made with french fries cheese curds and gravy. It is a very popular dish in Canada." shove
	"ratoeira is the portuguese word for mousetrap. Rato means mouse. Ratoeira is a trap for the rato." shove
value mech-endsay-base
mech-endsay-base shuffles var mech-endsay

0 stack
	($ "eHIS stands for Epic Human Immune System" $) shove
	"tornou se um atleta nas Olimpiadas pos apocalipse zumbi, onde o Canada ganhou todas as medalhas!*" shove
	"viveu uma vida longa e saudavel no Canada. Aos 100 anos, foi mordido por um alce e explodiu.*" shove
	"comecou a jogar hoquei, destacando se nele depois de toda aquela pratica derrubando dentes de zumbi.*" shove
	"inventou uma nova arte marcial especifica para zumbis e a ensinou a muitos discipulos.*" shove
value fit-endsay-base
fit-endsay-base shuffles var fit-endsay

0 stack
	($ "dedicou toda a sua vida a ajudar a restaurar o fisiculturismo a sua antiga gloria.*" $) shove
	// NOTE: below line is as long as you can get before hitting three lines
	"comecou a flexionar continuamente depois de cruzar a fronteira e nunca mais parou. Ninguem se importou.*" shove
	($ "tornou se um lendario heroi popular depois de aplicar um suplex em um alce com o qual estava discutindo.*" $) shove
	"frequentemente voltava a fronteira, apenas para jogar moveis pesados em mais zumbis.*" shove
	($ "mais tarde foi eleito Presidente de Todos os Lenhadores devido a sua forca poderosa.*" $) shove
value str-endsay-base
str-endsay-base shuffles var str-endsay

0 stack
	($ "continuou correndo por esta estrada ate desaparecer no horizonte.*" $) shove
	($ "'era amplamente conhecido por sua velocidade de corrida, ganhando o apelido de 'Sonic the Hedgehog'.*" $) shove
	($ "usou suas pernas super rapidas para se tornar um dancarino famoso.*" $) shove
	"ajudou a fornecer energia para novas cidades fronteiricas depois de ser colocado em uma grande roda de hamster.*" shove
value dex-endsay-base
dex-endsay-base shuffles var dex-endsay

0 stack
	($ "queria se tornar um alce. Depois de tirar boas notas na escola de alces ele fez isso se tornar realidade.*" $) shove
	"se transformou em um vigilante tematico de morcego. Os advogados de direitos autorais foram chamados em.*" shove
	"se estabeleceu numa vida tranquila. Era um pouco aborrecido, sem zumbis.*" shove
	"percorreu as fronteiras nortenas, tendo mais aventuras mas com menos zumbis.*" shove
	"escreveu um guia de sobrevivencia a zumbis que estava cheio de maus conselhos.*" shove
	"teve dificuldades para se adaptar no Canada, e acabou voltando ao sul por mais aventuras.*" shove
	"foi proibido de dirigir carros apos destrui lo uma vez por semana.*" shove
	"'tentou se tornar um Mountie, mas realmente nao tinha as habilidades para isso.*" shove
	($ "nunca se acostumou com a comida, muito utilizado as merces de EHE escavadas na Rodovia da Morte.*" $) shove
	($ "'nao tinha nenhuma habilidade forte e EHE teve uma vida tranquila mas sem eventos no Canada.*" $) shove
value generic-skill-endsay-base
generic-skill-endsay-base shuffles var generic-skill-endsay

0 stack
	"depois teria tomado partes do Canada com um exercito de caes treinados.*" shove
	"teve uma longa vida com muitos caes de estimacao.*" shove
	($ "patrulhou a fronteira com o crescente bando de caes de caca de zumbis de EHIS.*" $) shove
	($ "his is a typo it should be their"	$) shove
value dogpal-skill-endsay-base
dogpal-skill-endsay-base shuffles var dogpal-skill-endsay

0 stack
	($ "eHI is the name of the character." $) shove
	($ "dedicou o resto de SUA vida ao anime que a salvou.*" $) shove
	"superou o anime infantil e mudou para o manga.*" shove
	"escreveu um manga que retratava zumbis como garotas de anime. Os fas se tornaram um culto bizarro.*" shove
value animefan-skill-endsay-base
animefan-skill-endsay-base shuffles var animefan-skill-endsay

0 stack
	($ "combustao espontanea. Exatamente como ELE queria ir!*" $) shove
	"foi mordido por um castor no pe. Ambos explodiram em pedacos.*" shove
	"foi obliterado quando atingido por uma bola de neve. Uma saude.*" shove
	"foi exilado depois de destruir uma cidade em um amistoso jogo de hoquei.*" shove
value berserk-skill-endsay-base
berserk-skill-endsay-base shuffles var berserk-skill-endsay

0 stack
	"'tornou se a garota de anime mais kawaii do Canada. Nota do tradutor: Kawaii significa fofo.*" shove
	"continuou lutando contra o mal explodindo coisas com raios gigantescos de coracao.*" shove
	"logo alcancou a forma Super Saiyajin, que principalmente deu a ela um penteado maior.*" shove
	"FINALMENTE se confessou para o sempai.*" shove
value animegirl-skill-endsay-base
animegirl-skill-endsay-base shuffles var animegirl-skill-endsay

0 stack
	"integrou se bem na sociedade canadense, apesar de ser um esqueleto ambulante.*" shove
	"continuou sendo expulsa da cidade por dancar de forma assustadora.*" shove
	"viveu uma vida normal e feliz, mas com muitos ruidos de clique desnecessarios.*" shove
	($ "nunca, nunca descobri exatamente por que ou como EHE precisava comer comida.*" $) shove
value skeleton-skill-endsay-base
skeleton-skill-endsay-base shuffles var skeleton-skill-endsay

0 stack
	($ "st place in the st round of the st season of the st EHIS." $) shove
	"conseguiu um emprego como critico gastronomico, que e talvez o melhor emprego que existe.*" shove
	"'finalmente consegui comer algo que nao era comida velha ou enlatada.*" shove
	"partiu em uma nova jornada para provar toda a boa culinaria que o Canada tem a oferecer.*" shove
value gourmand-skill-endsay-base
gourmand-skill-endsay-base shuffles var gourmand-skill-endsay

0 stack
	"foi responsavel por uma serie de roubos no Canada, antes de ser exilado.*" shove
	"estabeleceu um temido sindicato do crime. Um onde todos usavam vestidos elegantes.*" shove
	($ "suprimiu o desejo de roubar as pessoas no Canada. Em vez disso, EHE era apenas um idiota enorme.*" $) shove
	"'liderou um assalto para roubar as joias reais do primeiro ministro.*" shove
value bandit-skill-endsay-base
bandit-skill-endsay-base shuffles var bandit-skill-endsay

0 stack
	($ "na maioria das vezes roia qualquer coisa que EHE pudesse colocar na boca, realmente.*" $) shove
	"marcou o maximo de territorio possivel.*" shove
	", estando muito acostumado a liberdade da estrada aberta, nunca se tornou domesticado.*" shove
	($ "passou o resto de sua vida latindo incessantemente para todos os novos animais selvagens.*" $) shove
	($ "encontrou um bom lar e felizmente fez coisas de cachorro pelo resto de sua vida.*" $) shove
value dog-skill-endsay-base
dog-skill-endsay-base shuffles var dog-skill-endsay


: fix-pronouns ( text )
	"EHIS" ehis $strrep
	"EHE" ehe $strrep
	"EHIM" ehim $strrep
;


// Main start of epilogue check below, further words above
// then; will exit out of the word should the IF check pass

// This checks for the "habilidades", which are things like strength and mechanical.
// Takes whatever the highest skill is. If there's a tie, picks from the tied skills at random.
// Finally, checks that the highest skill is over 4. If not, goes to a generic pool of phrases.


: epilogue-skill-check args( char )

	// Special Characters
	
	<- char .mason? 		  if "fiz uma tonelada de amigos e abri um acampamento de verao!*" then;
	<- char .hermit? 		  if "tornou se um eremita no Canada. Em vez de ser um eremita na America.*" then;
	<- char .specialtype@ 3 = if "foi capaz de espalhar a alegria do Natal por todo o Canada.*" then;
	<- char .specialtype@ 4 = if "'despejou enormes pilhas de carvao de seu treno sobre as casas de todos.*" then;
	<- char .specialtype@ 5 = if "continuou se debatendo.*" then;
	<- char .specialtype@ 6 = if "alcancou as mais altas classificacoes no amado esporte canadense de luta de sumo.*" then;
	<- char .specialtype@ 7 = if "retornou para Valhalla, mas nao antes de atirar seu martelo em muitos monumentos importantes.*" then;
	<- char .specialtype@ 8 = if "se reuniu com seus rivais de luta livre e teve muitas batalhas emocionantes.*" then;
	<- char .specialtype@ 9 = if "correu por ai socando coisas e resmungando. Pessoas, animais, estatuas, o que voce quiser.*" then;
	<- char .specialtype@ 10 = if "." then;
	<- char .specialtype@ 11 = if "gato is the portuguese word for cat." then;
	<- char .specialtype@ 12 = if "finalmente encontrei um lugar civilizado para ficar. Ela desenvolveu uma linha de moda popular.*" then;
	<- char .specialtype@ 13 = if "incomodou o grupo para sempre, fazendo com que todos se arrependessem daquele desejo de amizade.*" then;
	<- char .specialtype@ 14 = if "fundou a Divisao de Patinacao Mountie, temida por todos os malfeitores.*" then;
	<- char .specialtype@ 19 = if "comecou uma nova jornada para chegar a Colombia. Depois disso, outros paises C.*" then;
	<- char .specialtype@ 20 = if "finalmente conseguiu aposentar o traje de abelha, substituindo o por um tema de alce.*" then;
	<- char .specialtype@ 21 = if "rapidamente foi expulso do pais por ser um idiota imenso.*" then;
	<- char .specialtype@ 22 = if "subiu alto na vida. Ninguem jamais descobriu que ele era tres cachorros empilhados um sobre o outro.*" then;
	<- char .specialtype@ 25 = if "atraiu muitos discipulos fisiculturistas. Ele nao era mais o Ultimo Fisiculturista.*" then;
	<- char .specialtype@ 26 = if "ficou famoso por seu stand up comedy muito popular e perspicaz.*" then;
	<- char .specialtype@ 27 = if "sobreviveu contra todas as probabilidades. Feliz Dia de Acao de Gracas!*" then;
	<- char .specialtype@ 29 = if "infligiu todos os tipos de horrores relacionados a palhacos no Canada.*" then;
	<- char .specialtype@ 30 = if "vagou pelo Canada em busca de oponentes dignos de esgrima.*" then;
	<- char .specialtype@ 31 = if "continuou a odiar segundas feiras.*" then;
	<- char .specialtype@ 33 = if "desejou adeus a todos. Com lagrimas nos olhos, ele se transformou em uma arvore.*" then;
	<- char .specialtype@ 34 = if "mascaras is the word for masks in portuguese, but it can also mean faces in a more metaphorical sense." then;
	<- char .specialtype@ 35 = if "panda is a slang term for a person who is not really black but acts like one." then;
	<- char .specialtype@ 36 = <- char .specialtype@ 37 = or if "'se tornou um cantor famoso, com seu hit: 'Death Road to Canada" then;
	<- char .specialtype@ 45 = if "'ficou rico vendendo um novo tipo de esfregao que nao quebra ao esmagar zumbis.*" then;
	<- char .specialtype@ 46 = if "conseguiu manter sua minigun no Canada. Ninguem realmente queria tira la dele.*" then;
	<- char .specialtype@ 49 = if "voltou a ser cientista. Isso envolve principalmente bater em coisas com um pe de cabra.*" then;
	<- char .specialtype@ 50 = if "lancou Half Life 3.*" then;
	<- char .specialtype@ 52 = if "perambulou pelo resto de sua vida, quebrando ceramica.*" then;
	<- char .specialtype@ 58 = if "finalmente encontrou um banheiro onde pudesse fazer coco com seguranca.*" then;
	<- char .specialtype@ 61 = if "'previu que chegaria com seguranca ao Canada, e veja onde ele esta agora.*" then;
	<- char anime? if animegirl-skill-endsay depths 0= if drop "tornou se True Anime!*" else pops nip then then;
	<- char .specialtype@ 73 = <- char .specialtype@ 74 = or if "espreitava no campo como uma abominacao, as vezes assustando os aldeoes. Legal!*" then;
	<- char .specialtype@ 76 = if "'e uma especie de gerbil ou algo assim? Nao sei.*" then;
	<- char .specialtype@ 77 = if "retornou para sua familia no Canada, depois de muito tempo fora.*" then;
	<- char .specialtype@ 78 = if skeleton-skill-endsay depths 0= if drop "Eu amo esqueleto!" else pops nip then then;
	<- char .specialtype@ 81 = if "construiu uma casa de pao de gengibre muito legal.*" then;
	<- char .specialtype@ 82 = if "continuou gastando sua vida imortal passando pelas frases BLUGH e se transformando em morcego.*" then;
	<- char .specialtype@ 83 = if "ficou preso na forma de morcego, alguma coisa.*" then;
	<- char .perk@ "Rainha Esqueleta" $= if "teve um exercito esqueletico enorme. Elas nunca fizeram muito, ela apenas gostava de coleciona los.*" then;
	<- char .specialtype@ 88 = if "se tornou uma popular barda na Corte Real do Rei do Canada.*" then;
	<- char .specialtype@ 90 = if "deixou o Canada apos descobrir que tudo era mais dificil queimar devido a gelo.*" then;
	<- char .specialtype@ 91 = if "destruiu Toronto. Nao a cidade real, apenas uma pequena replica de papelao.*" then;
	<- char .specialtype@ 92 = if "desapareceu de volta para o Dimension Bort, da qual ele havia sido invocado.*" then;
	<- char .specialtype@ 93 = if "teve um combate contra Ascendente Bizarro Krankor. Eles discutiram suas questoes.*" then;
	<- char .specialtype@ 94 = if "continuou inspirando as pessoas devido a sua semelhanca perfeita com Bart.*" then;
	<- char .specialtype@ 95 = if "seguiu para completar sua missao secreta: roubando a receita de cafe da Tim Hortons.*" then;
	<- char .specialtype@ 96 = if "escavou uma bela caverna cheia de monstros. Ela tinha orcs e goblins e armadilhas. Legal!*" then;
	<- char .specialtype@ 97 = if "'foi confundido por uma subespecie rara de lobo guara e foi lancado em um zoologico. Ele nao se importava.*" then;
	<- char .specialtype@ 98 = if "mudou seu cosplay para um personagem que usava roupas grossas de inverno em vez de meia calca.*" then;
	<- char .specialtype@ 102 = if "tirou uma soneca naquele dia e foi imediatamente envolvida em gelo. Ela acordou em um futuro muito muito distante.*" then;
	<- char .specialtype@ 104 = <- char .specialtype@ 105 = or if "silenciosamente e timidamente solicitou a cidadania canadense.*" then;
	<- char .specialtype@ 106 = if "ajudou a policia montada a desenvolver uma poderosa tecnologia anti zumbi baseada em toras.*" then;
	<- char .specialtype@ 108 = if "nao pode correr tao rapido conta sua preciosa perna de madeira antiga.'" then;
	<- char .charbro? 		   if "finalmente, FINALMENTE consegue chutar uma bola de futebol.*" then;
	<- char .broom?			   if "fica preso em um armario de vassouras, mas no Canada desta vez.*" then;
	<- char .saguts?		   if "pede demissao de seu emprego como lutador de torneio e comeca a vender tapa olhos de grife populares.*" then;
	<- char .bryu?		   	   if "inicia um torneio de luta no Canada, onde ele atira principalmente bolas de fogo em alces" then;
	<- char .hhell?		   	   if "abre um negocio de propano no Canada. A novidade: ele tambem vende acessorios de propano.*" then;
	<- char .efudd?		   	   if "forma um time de basquete, apenas no caso de alienigenas desafiarem a Terra para um jogo de basquete.*" then;
	
	<- char dog? if dog-skill-endsay depths 0= if drop "viveu aquela vida de cachorro.*" else pops nip then then;
	<- char cat? if "comecou uma campanha de assassinato em massa na vida selvagem local, como os gatos fazem.*" then;
	<- char goat? if "tornou se uma cabra canadense. O que e como uma cabra nao canadense.*" then;
	<- char pig? if "foi amplamente reconhecido no Canada como sendo ALGUM PORCO!*" then;
	<- char ispet? if "finalmente era um animal livre novamente, e desapareceu na selva.*" then;
	
	<- char .trait@ "CARL!" $= if "CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRRRRRRRRRRRRL!" then;
	<- char .trait@ "E KEPA" $= if "Dica Secreta: Procure o Poco dos Desejos na Cripta da Decadencia!" then;
	
	<- char .dexterity@ 2 > if dex-endsay depths 0= if drop "foi rapido.*" else pops nip then then;
	
	<- char .perk@ "Amigo do Cachorro" $= if dogpal-skill-endsay depths 0= if drop "permaneceu um verdadeiro amigo de cachorro.*" else pops nip then then;
	<- char .trait@ "BERSERK!" $= if berserk-skill-endsay depths 0= if drop "ficou furioso!*" else pops nip then then;
	<- char .trait@ "Bandido" $= if bandit-skill-endsay depths 0= if drop "viveu uma longa vida roubando e saqueando.*" else pops nip then then;
	<- char .trait@ "Fa de Anime" $= if animefan-skill-endsay depths 0= if drop "continuou os estudos de anime.*" else pops nip then then;
	<- char .trait@ "Gourmand" $= if gourmand-skill-endsay depths 0= if drop "jantou e se divertiu no Canada.*" else pops nip then then;
		
	// Above, rare case checks that prevent the common checks from happening.
	// Common checks below.
	
	<- char .hiskill-stack depths 0= if 0 else shuffles pops then to EPILOGUE-PICK drop
	
	EPILOGUE-PICK STAT_SHOOTING = if
		<- char .cshooting+ if
			shoot-endsay depths 0= if drop ($ "manteve a forma na aposentadoria do EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MECHANICAL = if
		<- char .cmechanic+ if
			mech-endsay depths 0= if drop ($ "manteve a forma na aposentadoria do EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_MEDICAL = if
		<- char .cmedical+ if
			med-endsay depths 0= if drop ($ "manteve a forma na aposentadoria do EHIS.*" $) else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_DEXTERITY = if
		<- char .dexterity@ 0 > if
		// Extra dexterity ending check if it's their highest skill, which is unlikely.
			dex-endsay depths 0= if drop "tornou se mais rapido que o Sonic.*" else pops nip then
		then;
	then
	 
	EPILOGUE-PICK STAT_STRENGTH = if
		<- char .cstrength+ if
			str-endsay depths 0= if drop "continuou sendo bombado no Canada.*" else pops nip then
		then;
	then
	
	EPILOGUE-PICK STAT_FITNESS = if
		<- char .cfitness+ if
			fit-endsay depths 0= if drop ($ "manteve a forma na aposentadoria do EHIS.*" $) else pops nip then
		then;
	then
	
	// Failsafe placeholder below, this should instead be a generic pool it draws from
	// Like blurb/blogic draws from blurb/blurbdeck.df for generic sayings
	
	generic-skill-endsay depths 0= if drop "comecou uma nova vida no Canada, com menos zumbis.*" else pops nip then
		
	// Old test, made each character say their gender
	// <- char .female@ 0 = if	"MASCULINO" else	"FEMININO" then
;

: epilogue-personality-check-fixed epilogue-personality-check fix-pronouns ;
: epilogue-skill-check-fixed epilogue-skill-check fix-pronouns ;
