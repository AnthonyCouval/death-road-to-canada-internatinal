cyoa{

: coffeed pchar statmod{ dup .coffee .untired } ;
: coffeed? pchar statmod{ .coffee? } ;

cyoa-choice: coffee-get2
	($ cname .. " 'usa todas " .. chis .. " 'utiliza habilidades mecanicas para averiguar que hacen los innumerables botones del cafetera. " .. cHe .. " 'prepara el cafe perfecto! Esta delicioso! La cafetera salta, desprende humo y muere." $) cyoa-text!
		coffeed	pchar statmod{ .unsick }
		morale2+ dexterity++ goodfx clear-cyoa mechanicREV
;

cyoa-choice: coffee-get1
	pchar statmod{ .sick? } if
		($ cname .. " 'se siente demasiado enfermo para disfrutar del cafe que ha estado en una maquina durante quien sabe cuanto tiempo." $) cyoa-text! badfx 50 %chance if sting-- then
	then;
	coffeed? if
		($ cname .. " 'bebe AUN MAS cafe y luego se siente bastante mal despues. Es dificil decir si fue la gran cantidad de cafeina, las tazas sucias o como el cafe ha estado echando a perder durante un tiempo desconocido." $) cyoa-text! badfx pchar statmod{ dup .sick .uncoffee }
	else
		($ cname .. " 'rociar un poco de cafe en una taza vieja que anda por ahi y luego bebe." .. cHe .. " 'se siente TODOS COFFEE'D UP." $) cyoa-text!
			goodfx coffeed
	then
;

cyoa: coffee-get
	"Cafe Apocaliptico" cyoa-title!
	picon!
	"Este aparato de cafe enorme y complejo fue construido para sobrevivir a algunos tipos diferentes de escenarios del fin del mundo. Esto fue una parte importante de la campana publicitaria de este cafe.	Verdad en el anuncio, sigue funcionando!" cyoa-text!
	chumany? not if
		($ pname .. "no tiene la primera idea sobre como operarlo. Y realmente, " .. cdogcat .. "debieron dejar de beber cafe." $) +crtext	
	then;
		pchar charchoice( " 'obtiene CAFE" )choice: coffee-get1
		cmechanic+ if
			pchar charchoice( " 'jugua con los ajustes" )choice: coffee-get2
		then
	choice( "Dejemoslo solo." )choice
;

}
		
map{ roomgen{

: coffeemachine
	spawn special_objects48_base_id 0x 6 + lt .spriteid!
	rndflip bbox immovable as-metal
	cyoa{ ' coffee-get cyoa! }
;
} }

locdef{
	
location: coffee
		max-rooms: 2
		entry-tags: coffee
		script: set-theme-restaurant

		room-choice: coffee
			room-weight: 10
			room-count: 1
			room-script: 
			room-post-script: 10diff %zombs map{ room-garbage }
			filter-only		

		room-choice: restroom
			room-weight: 10
			room-count: 1
			room-script: floor-bath
			
}