(* uses base.df
uses charfilt.df
uses charstats.df
uses road.df
uses charstatmods.df *)

// Mason, Octodad, Boxer, Mad Scientist, Sumo, Valkyrie, Rambeux

road{

0 value madsci-countdown
0 value mason-countdown
0 value mason-curse

}

cyoa{ road{

cyoa-bridge: ramb-recruit
	ricon recruitee .strengthREV recruitee .fitnessREV recruitee .shootingREV
	team-count 3 > if
		($  rname .. " vous devez faire sortir quelqu'un de l'equipe pour laisser place a quelqu'un d'autre. cela est necessaire depuis que vous avez deja abandonne votre part de nourriture." $) cyoa-text! -10 trunk-food+ recruit-replace?
	then;
	($ rname  .. " il se remplit et son mitraillette dans la voiture. il refuse categoriquement de mettre. " .. "BERTHE" pbold .. " dans le coffre de sa voiture et il affirme qu'on ne pourra jamais l'enlever a lui." $) cyoa-text! goodfx
		-10 trunk-food+	recruited
;

cyoa: ramb-test
	"PREMIER COUP DE REAR" cyoa-title!
	char-gen to recruitee
	"Rambeux" recruitee .name!
	ricon
	4 recruitee .morale! recruitee .rambify
	($ Thegroup .. " approche d'une ville, il entend des barrages de tirs de fusil mitrailleur massifs... dans le milieu de la ville se trouve un homme arme d'un minigun. autour de lui, des troupes d'undead re-animees... il declare etre un mercenaire a gage, paye a l'avance." $) cyoa-text! basic-tone
	trunk-food 9 > if
		choice( "Employez-le a titre de salarie a 10 aliments." )choice: ramb-recruit
	then
		choice( "Desole, je ne peux pas m'en passer de la nourriture." )choice
;

cyoa-choice: valk-recruit
	ricon
	team-count 3 > if
		($  rname .. " votre groupe est plein." .. "Quelqu'un doit prendre la fuite." pbold .. 
		" Elle jette son marteau et il retentit. " .. cname .. " dans la tete, a juste dessus du crane ..." .. cname .. " a quitte l'equipe !" $) cyoa-text! cchar .kill
	else
		($ rname  .. " elle leve dramatiquement son marteau. un flash d'eclair le frappe !. le reste de l'equipe est presque sourd et ne peut plus voir la plupart des couleurs pendant le reste de la journee." $) cyoa-text! goodfx
	then
		recruitee .strengthREV recruitee .fitnessREV
		recruited
;

cyoa: valk-test
	"Pont arc-en-ciel vers valhalla." cyoa-title!
	char-gen to recruitee
	someone choosechar
	"Valquaire" recruitee .name!
	ricon
	4 recruitee .morale! recruitee .valkify
	($ "Une nuageuse s'eloigne et apparait un arc-en-ciel. une valkyrie monte sur un licorne le long de l'arc-en-ciel..." .. "Vous avez tue des tonnes de choses. je viens ici a votre appelle par ordre de thor et autres. cela n'est rien de bien grand, alors n'y prenez pas beaucoup de temps pour vous en inquieter." pbold $) cyoa-text! basic-tone
		choice( "Accepter son offre" )choice: valk-recruit
		choice( "Refuser sa proposition." )choice
;

cyoa-bridge: sumo-recruit
	ricon recruitee .strengthREV recruitee .fitnessREV
	team-count 3 > if 
		($  rname .. " apprecie la proposition au depart, mais ensuite, il devient bien evident que 5 personnes ne peuvent pas s'y integrer dans la voiture. beaucoup moins 4 personnes et un sumo wrestler... . 		replace 'at first' with 'initially':" $) cyoa-text! recruit-replace?
	then;
	($ rname  .. " mon passeur entre dans la voiture. la suspension tombe vraiment, vraiment bas sur le cote gauche, mais la voiture parvient tout de meme a roulier le long de la route." $) cyoa-text! goodfx
		recruited
;

cyoa: sumo-test
	"LAISSE-NOUS LUTTER EN SUMO" cyoa-title!
	char-gen to recruitee
	ricon
	4 recruitee .morale! recruitee .sumoify
	($ Thegroup .. " le heros cherche des approvisionnements et tombe sur un dojo de arts martiaux fortifie. a l'interieur se trouve un lutteur sumo... . 	il explique qu'il survit, mais il veut voyager. tous sont partis de leur ville quelque temps ago. avant cela, il n'y avait pas beaucoup de demande d'entrainement de lutteurs sumo sur la cote est des etats-unis... ." .. "Entends que le sumo soit assez important au canada ! plus grand que le hockey !" pbold $) cyoa-text! basic-tone
		choice( "Engager-le" )choice: sumo-recruit
		choice( "Laissez-le etre" )choice
;

cyoa-choice: madsci-give
	ricon
		(*  Here, take one of my old experiments! It'll work a couple times." **gras** ... **nom** " hands you a TELEPORTER MK 1! *)
	($ "Prenez l'un de mes anciens experiences ! ." pbold .. rname .. " cet appareil est un teleporteur mark 1. elle s'en va continuer sa decouverte." $) cyoa-text! goodfx
		-20 LOOT_SHOTGUN_SHELL trunk.loot+
		7 WEAPON_SMOKEBOMB trunk.weapon+
;

cyoa-bridge: madsci-recruit
	ricon 2 4 rnd to madsci-countdown recruitee .witsREV recruitee .mechanicREV recruitee .shootingREV
	($  "Sur le chemin vers son laboratoire, il a discute avec la chercheuse." .. "Je vais vous en remerciier en nommant ma prochaine invention apres vous." pbold $) cyoa-text! goodfx
		team-count 3 > if
			"La groupe est trop grand pour la recruter ! remplace quelqu'un :" +crtext
			recruit-replace?
		then; recruited
;

cyoa: madsci-test
	"Faire un don a des recherches scientifiques" cyoa-title!
	char-gen to recruitee
	ricon
	"Documentation" recruitee .name! 4 recruitee .morale! recruitee .madscify
	($ Thegroup .. " le scientifique apparait soudainement... alors qu'il verifie ses affaires, il y a brusquement une eclaircissement intense !" .. "Vous avez besoin de retourner a votre laboratoire. je peux vous offrir un transport, ou bien 20 coquilles pour votre fusil a chasses scientifique." pbold $) cyoa-text! basic-tone
		choice( "Offrez-lui un depart en voiture." )choice: madsci-recruit
		trunk-shotgun-shell 19 > if
		choice( "Donnez-lui 20 coquilles de fusil a pompe." )choice: madsci-give
		then
		choice( "Desole, je ne peux pas vous aider." )choice
;

// boxer-recruit sometimes gives a stack error that I haven't been able to track down yet
cyoa-bridge: boxer-recruit
	ricon "S'opposer, se disputer, se confronter." recruitee .name! recruitee .strengthREV recruitee .fitnessREV recruitee .attitudeREV
	team-count 3 > if
		($  rname .. " elle se met en colere quand tous les gens la pressent pour qu'elle entre. elle lance une grande coup de poing haut. " .. cname .. "le menton de 'lui." .. "C'est une gifle reelle qui met k.o !" pbold .. 
		" La equipe fait place pour le boxeur en jetant:" $) cyoa-text!
		sting-- badfx recruit-replace?
	then;
	($ rname  .. " frappe ses gants l'un contre l'autre." .. "Preparation a l'entrainement routier !" pbold $) cyoa-text! goodfx
		recruited
;

cyoa: boxer-test
	"La grande bataille" cyoa-title!
	char-gen to recruitee
	someone choosechar
	ricon
	4 recruitee .morale! recruitee .boxerify
	($ Thegroup .. " voici une femme qui s'entraine seule dans un ancien gymnase de boxe abandonne. elle porte toute l'equipement de boxe et frappe a la vitesse incroyable sur un sac d'entrainement. ses reponses lors de la conversation sont toutes des phrases non-liees, des citations aleatoires sur le boxe." $) cyoa-text! basic-tone
		choice( "La recrutez" )choice: boxer-recruit
		choice( "Laissez-la tranquille" )choice
;

cyoa-choice: octodad-recruit
	ricon
	team-count 3 > if
		($ "Le nouvel engage se revele plutot snbe et s'insere dans la voiture !" .. rname .. " se joint a l'equipe !. .  puis, lors d'une conduite sur l'autoroute, il se jette par la fenetre dans une etrange accidents de circonstance, en compagnie de l'arme et des vivres qu'il transportait avec lui.. ." .. rname .. " quitte l'equipe !" $) cyoa-text!
	then;
	($ " Il fait prendre " .. rname .. " d'abord, il faut approximativement quinze minutes pour ouvrir la porte de voiture, monter dedans et mettre son ceintre de securite. puis, le cendrier et les approvisionnements sont jetes dans un wc voisin et ne peuvent plus etre recuperes." $) cyoa-text! badfx
	recruitee .temperREV recruitee .attitudeREV
	recruited
;

: octodadname 1 5 rnd case
	1 of "obtient" endof
	2 of "*burble*" endof
	3 of "*bleu bruit*" endof
	4 of "Nouveau arrivant" endof
	5 of "Recruter" endof
endcase ;

cyoa: octodad-test
	"Personne normale" cyoa-title!
	char-gen to recruitee
	ricon
	octodadname recruitee .name!
	4 recruitee .morale! recruitee .octodadify
	($ Thegroup .. " un survivant plutot discret est decouvert dans un aquarium abandonne... il semble etre une personne agreable. a plus pres, il porte une mine claymore et un sac a dos plein de vivres !" $) cyoa-text! basic-tone
		choice( "Engager-le" )choice: octodad-recruit
		choice( "Laissez-le etre" )choice
;

cyoa-choice: mason-recruit
	ricon 2 3 rnd to mason-countdown 1 to mason-curse
	team-count 3 > if
		($ "La equipe s'arrete au bord de la route pour rencontrer le conducteur d'autostop. d'abord il y avait trop de gens pour integrer une nouvelle personne dans la voiture, mais ensuite... " .. cname .. " disparait de la surface de la terre... . 		a quelle pensee etrange !" $) cyoa-text!
		cchar .kill
	else
		($ rname  .. " ouvre la porte de la voiture et s'asseoir en silence. paraissez avoir un nouvel ami !" $) cyoa-text! goodfx
	then
		recruitee .strengthREV recruitee .fitnessREV
		recruited
;

cyoa: mason-test
	"Rencontrez de nouvelles amis" cyoa-title!
	someone choosechar
	char-gen to recruitee
	ricon
	"???" recruitee .name!
	5 recruitee .morale! recruitee .masonify
	($ Thegroup .. " le conducteur apercoit un cambrioleur par la route. il porte une masque de hockey et reste immobile, comme une statue, regardant vers rien en particulier. dans une main il tient une scie a chaine, dans l'autre un machette... . 	lorsque la voiture se rapproche, le cambrioleur tourne legerement la tete pour regarder droit vers le conducteur. " .. thegroup .. "." $) cyoa-text! basic-tone
		choice( "Arretez pour lui, quels que soient les circonstances." )choice: mason-recruit
		choice( "Conduise beaucoup plus vite." )choice
;



} }


