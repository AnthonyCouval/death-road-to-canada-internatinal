
cyoa{

: npc-cat-recruit
	cchar to recruitee goodfx clear-cyoa
	($ "Deve " .. pname .. "  recrutar o gato?" $) +crtext
	pchar .morale3+ 
	// pchar .loyaltyREV pchar .attitudeREV
	recruitee .loyaltyREV recruitee .fitnessREV
	0.25 cchar .ai.wander_chance! 0 nearest .unseen!
	recruit-yesno
;

cyoa-bridge: npc-cat-oscar
	cchar to recruitee clear-cyoa
	0.25 cchar .ai.wander_chance! 0 nearest .unseen!
	recruit-yes
	pchar .morale3+ 
	recruitee .loyaltyREV recruitee .fitnessREV recruitee .temperREV
	"'BONUS: O moral de Oscar sempre fica acima de zero!" fbold +crtext
	
;

cyoa-bridge: npc-cat-food
	LOOT_FOOD pchar .lootamt@ 0 > if
		($ pname .. "  oferece um pouco de comida para o gato. O gato cheira cuidadosamente e entao devora a comida num instante. Ele decide nao matar " .. pname .. "  neste momento." $) text!
		npc-cat-recruit
		-1 add-food
	else
		($ pname .. " has no food right now! Hopefully there's some in a nearby building..." $) text!
	then
;

cyoa-bridge: npc-cat-poke
	($ "Bem, e sua decisao, eu acho.	" .. pname .. "  tenta cutucar o gato mas e interrompido por " .. "SER ASSASSINADO" fbold .. "  por uma saraivada de garras e mordidas." $) text!
	pchar .kill
;

// pchar .nonfatal if then

cyoa: npc-catrecruit
	nearest .character@ choosechar cicon
	
	cchar .bodytype@ 9 = if
		"O Ultimo Bom Gato" cyoa-title!
			($ pname .. " finds a cat that has made its den here. It seems different than all other post-zombocalypse cats. 
			The cat is super calm and doesn't radiate a desire to murder humans! How bizarre!
			He is wearing a name tag that reads:" .. "  OSCAR" rainbold $) text!
		choice( "Deixar Oscar para tras" )choice
		choice( "Recrutar Oscar!" )choice: npc-cat-oscar
	then;
	
	"O Ninho do Gato" cyoa-title!
	($ pname .. "  encontra um gato que fez sua toca nesta casa destruida. O gato olha para " .. phim .. "  com um olhar preguicoso que e tingido com " .. "INTENSAO ASSASSINA." rainbold $) text!
	// "Os gatos ficaram enormes algum tempo apos o apocalipse. Os gatos pequenos do passado agora sao uma coisa de memoria distante." +crtext 
	"AVISO: Vai te matar. Se nao agora, talvez mais tarde." rbold +crtext
		choice( "Deixe o sozinho" )choice
		choice( "Cutucar o gato! Sim!" fbold )choice: npc-cat-poke
		choice( "Persuadi lo com comida" )choice: npc-cat-food
;

}

: .catrecruit args( char )
	<- char
	2 %chance kspet-checker 1 < and if
		.oscarcatify
	else
		.catify
	then
	<- char cyoa{ ' npc-catrecruit cyoa! }
	drop
;

locdef{
		
location
		tags: catnest
		max-rooms: 2
		entry-tags: trashed
		script: set-theme-house
		pre-script: set-theme-house
		
		room-choice: trashed
			room-weight: 10
			room-count: 2
			room-script: nad
			room-post-script: still-npc .catrecruit 3 5 rnd for skelscat next
			filter-only
			
}