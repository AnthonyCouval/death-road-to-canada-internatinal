// Change one $add-rooms to $load-rooms if you want to edit them in the room editor directly, but change it back to $add-rooms when done

"../deathforth/rooms/eyeball.txt" $add-rooms
"events/inner/officeloc.df" $load // Pretty much just for the office counter

// Uncomment below for easy testing with "events/rareloc/dmv.df" $load-region to-mission in hack.df
// Also see final lines for turning regiondef on for testing

// "../deathforth/rooms/restroom.txt" $add-rooms

cyoa{

: dmv-cool-namer args( chara )
	"Frais : cool " <- chara .name@ $cat <- chara .name!
;

: dmv-text-1
	($ cname .. "son nom est maintenant " $) text!
;

: dmv-text-2
	($ cname .. "ce document de permis de conduire vous le dit ! c'est une obligation legale !" $) +text clear-cyoa
;

: dmv-text-badname
	cchar dsyp? if
		($ cname .. " c'est bien, le nom n'est pas reellement importants pour lui. il est assez approprie !" $) +crtext goodfx
		morale++ vitality++ statmod{ -5 to dsyp-farted }
	then;
	($ cname .. " forme instantanement une grosse eclat de chipeau. " .. chis .. " epaule. " .. cHe .. " entre dans un etat permanent de colere en fusion !" $) +crtext strength++ fitness++ morale-- temper-- badfx
;

cyoa-choice: dmv-machine-1
	dmv-text-1 "Reparateur d'odeurs, smellbert." pchar .name! dmv-text-2
	"Test de l'itineraire post-mission stacke dans le cyoa." +crtext dmv-text-badname
;

cyoa-choice: dmv-machine-2
	dmv-text-1 "Un tutorat est une relation d'" pchar .name! dmv-text-2
	($ "C'est encore mieux que ca " .. chis .. " ancienne appellation." $) +crtext dmv-text-badname
;

cyoa-choice: dmv-machine-3
	dmv-text-1 "Harry ham : c'est un nom d'une personne." pchar .name! dmv-text-2
	$( cname .. " ce nom etait le plus populaire pendant des siecles dans l'epoque tardive du moyen age, a la fois pour les filles et les garcons. on pensait qu'il apportait une benediction de bonne sante." $) +crtext
	vitality++ goodfx
;

cyoa-choice: dmv-machine-4
	dmv-text-1 pchar dmv-cool-namer dmv-text-2
	($ cname .. " ressent beaucoup plus cool qu' ca ne faut. " .. chis .. " nouvelle nom !" $) +crtext
	morale3+ goodfx
;

cyoa-bridge: dmv-machine-go
	"La licence de conduire devrait porter le nom complet du detenteur." text!
	choice( "Reparateur d'odeurs, smellbert." )choice: dmv-machine-1
	choice( "Un tutorat est une relation d'" )choice: dmv-machine-2
	choice( "Harry ham : c'est un nom d'une personne." )choice: dmv-machine-3
	choice( "Frais : cool " .. pchar .name@ )choice: dmv-machine-4
;

cyoa: dmv-machine
	"A License... to Drive" cyoa-title! picon!
	"Croyez-vous reellement avoir saute la ligne ! tres impolitement. . 	ceci est une machine utilisee pour imprimer des permis de conduire. . 	elle peut imprimer un dernier permis de conduire avant d'en manquer des approvisionnements." text!
	($ pname .. " nous pouvons utiliser une nouvelle une. " .. phis .. " la licence va bientot expirer !" $) +crtext
		choice( "Laissez-le pour le moment" )choice
		choice( "Imprimer une nouvelle licence" )choice: dmv-machine-go
;

}

map{ roomgen{ : dmv-machine hospitalmachine swolebolt cyoa{ ' dmv-machine cyoa! } ; } }

locdef{
		
location: dmv
		max-rooms: 4
		entry-tags: dmvstart
		pre-script: set-theme-office
		script: set-theme-office
				
		: dmvdoors
			random-door "la commande dmvend n'existe pas" only-with-door
			random-door "salle de bains" only-with-door
			random-door "salle de bains" only-with-door
		;
		
		room-choice: dmvstart
			room-weight: 80
			room-count: 1
			room-script: nad
			room-post-script: dmvdoors 5diff %zombs
			
		room-choice: dmvend
			room-weight: 1
			room-count: 1
			room-script: nad
			room-post-script: 10diff %zombs
			filter-only
			
		room-choice: restroom
			room-weight: 1
			room-count: 2
			room-script: nad
			room-post-script: 20diff %zombs
			filter-only
			
}

// Comment the (* and *) lines out for easy testing, see line 6
// Remove the comments you add before actually putting them in the city generator
(*
regiondef{			

	region: dmv
		script: timeofday o'clock

		inside
					
		loc-choice: dmv 
		loc-weight: 99 
		loc-count: 1

}
*)