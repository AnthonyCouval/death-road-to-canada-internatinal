
cyoa{

// Unused
: npc-panda-go 
	($ cname .. " comeca a seguir " .. pname .. "  por um tempo!" $) +crtext ccharget
;

: npc-panda-recruit
	cchar to recruitee goodfx clear-cyoa
	($ "O panda parece querer seguir " .. pname .. "!" $) +crtext
	pchar .morale3+ pchar .loyaltyREV pchar .attitudeREV
	recruitee .strengthREV recruitee .fitnessREV
	0.25 cchar .ai.wander_chance! 0 nearest .unseen!
	recruit-yesno
;

: npc-panda-attack
	($ "O panda " .. " ataca!" rbold $) +crtext pchar .ouch-- bitefx
;

cyoa-bridge: npc-panda-food
	($ pname .. "  oferece um pouco de comida ao panda." $) text!
	50 %chance if 
		npc-panda-recruit
	else
		($ "O panda mastiga a comida e depois a cospe. Pandas sao comedores exigentes, mas voce pode continuar tentando com mais comida." $) +crtext badfx
	then	
	-1 add-food
;

cyoa-bridge: npc-panda-pull
	($ pname .. "  puxa o panda em direcao a " .. phim .. " ' na esperanca de que o animal siga. Parece que vale a pena tentar." $) text!
	50 %chance if 
		npc-panda-recruit
	else
		npc-panda-attack
	then	
	
;

cyoa-bridge: npc-panda-charm
	pchar isdogpal? if
		($ pname .. " usando " .. phis .. "  PSICOLOGIA CANINA no panda, que e um tipo de cachorro." $) text!
		npc-panda-recruit
	else
		pchar charming? if 
			($ pname .. " usando " .. phis .. "  charme natural para persuadir o panda a seguir." $) text!
			npc-panda-recruit
		else
			($ "O panda parece irritado com " .. pname .. "." $) text!
			npc-panda-attack
		then
	then
;

// pchar .nonfatal if then

cyoa: npc-panda
	"Panico do Panda" cyoa-title!
	nearest .character@ choosechar cicon
	($ "'E um panda, parado perto de um predio enlodado. Olha para voce. " .. pname .. " with a blank expression. It may be possible to get it to follow you..." $) text!
	"'AVISO: Provavelmente te matara a menos que esteja oferecendolhe comida. E uma coisa com 50% de chance de desperdicar sua comida." rbold +crtext
		choice( "Deixeo sozinho" )choice
		choice( "Puxe o panda" )choice: npc-panda-pull
		LOOT_FOOD pchar .lootamt@ 0 > if
			choice( "Atraiao com comida" )choice: npc-panda-food
		then
		choice( "O coaxe com charme" )choice: npc-panda-charm	
;

}

: .panda args( char )
	35 <- char .specialtype!
	"Panda" <- char .name!
	WEAPON_FIERCE <- char .weapon_default!
	2 STAT_STRENGTH <- char .bonus!
	6 <- char .strength!
	6 <- char .fitness!
	1 <- char .female!
	1 <- char .carrying.slot_count!
	"e um panda. Realmente fofo a menos que irritado." <- char .job!
	<- char cyoa{ ' npc-panda cyoa! }
	drop
;

locdef{
		
location
		tags: panda
		max-rooms: 2
		entry-tags: trashed
		script: set-theme-house
		pre-script: set-theme-house
		
		room-choice: trashed
			room-weight: 10
			room-count: 2
			room-script: nad
			room-post-script: still-npc .panda
			filter-only
			
}