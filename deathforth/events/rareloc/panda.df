
cyoa{

// Unused
: npc-panda-go 
	($ cname .. " suivez ces instructions : " .. pname .. " pendant un moment !" $) +crtext ccharget
;

: npc-panda-recruit
	cchar to recruitee goodfx clear-cyoa
	($ "Le panda semble vouloir suivre. " .. pname .. "!" $) +crtext
	pchar .morale3+ pchar .loyaltyREV pchar .attitudeREV
	recruitee .strengthREV recruitee .fitnessREV
	0.25 cchar .ai.wander_chance! 0 nearest .unseen!
	recruit-yesno
;

: npc-panda-attack
	($ "Le panda " .. "se jette sur quelqu'un a coups de fouets !" rbold $) +crtext pchar .ouch-- bitefx
;

cyoa-bridge: npc-panda-food
	($ pname .. " offre un aliment a la pandemonium." $) text!
	50 %chance if 
		npc-panda-recruit
	else
		($ "Le panda mache sur la nourriture et ensuite l'expulse. les pandas sont des mangeurs selectifs, mais vous pouvez continuer d'essayer avec de nouvelles quantites de nourriture." $) +crtext badfx
	then	
	-1 add-food
;

cyoa-bridge: npc-panda-pull
	($ pname .. " tire vers le panda. " .. phim .. " esperons qu'l'animal le suit : cela parait valable une essai." $) text!
	50 %chance if 
		npc-panda-recruit
	else
		npc-panda-attack
	then	
	
;

cyoa-bridge: npc-panda-charm
	pchar isdogpal? if
		($ pname .. " biais. " .. phis .. " La psychologie canine sur le panda, qui est un type de chien." $) text!
		npc-panda-recruit
	else
		pchar charming? if 
			($ pname .. " biais. " .. phis .. " une belle naturelle pour attirer le panda pour suivre." $) text!
			npc-panda-recruit
		else
			($ "Le panda semble inquiet, voire irrite. " .. pname .. "." $) text!
			npc-panda-attack
		then
	then
;

// pchar .nonfatal if then

cyoa: npc-panda
	"Ne le faites pas !" cyoa-title!
	nearest .character@ choosechar cicon
	($ "C'est un panda qui se tient devant l'immeuble en ruines. il regarde autour de lui. " .. pname .. " with a blank expression. It may be possible to get it to follow you..." $) text!
	"Avertissement : il est tres probable que vous le tuez si vous ne lui offrez pas de nourriture. c'est un gadget qui a 50% de chances de depenser votre alimentation." rbold +crtext
		choice( "Laissez-le tranquille" )choice
		choice( "Tractionner le panda" )choice: npc-panda-pull
		LOOT_FOOD pchar .lootamt@ 0 > if
			choice( "Attire-le" )choice: npc-panda-food
		then
		choice( "Charmez-le delicieusement." )choice: npc-panda-charm	
;

}

: .panda args( char )
	35 <- char .specialtype!
	"Geant panda" <- char .name!
	WEAPON_FIERCE <- char .weapon_default!
	2 STAT_STRENGTH <- char .bonus!
	6 <- char .strength!
	6 <- char .fitness!
	1 <- char .female!
	1 <- char .carrying.slot_count!
	"une panda. tres mignonne, jusqu'a ce qu'elle soit en colere." <- char .job!
	<- char cyoa{ ' npc-panda cyoa! }
	drop
;

locdef{
		
location
		tags: panda
		max-rooms: 2
		entry-tags: trashed
		script: set-theme-house
		pre-script: set-theme-house
		
		room-choice: trashed
			room-weight: 10
			room-count: 2
			room-script: nad
			room-post-script: still-npc .panda
			filter-only
			
}