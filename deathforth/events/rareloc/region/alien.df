
0 value alienopen
0 value grayalien

cyoa{ mission{

cyoa: cyoa-alien-car
	alienopen 1 > if cyoa-car then;
//	PRINTSTACK thing# to them# player .id@ to me#
	alienopen 0 > if
	"Vamos a rodar!" cyoa-title!
		($ "La puerta se abre cuando " .. pname .. " touches it!
		This alien car is impressive already!" $) cyoa-text!
			morale++all
			2 to alienopen goodfx
			choice( "Sube al coche" )choice: get-into-car
			choice( "Dejalo estar por ahora" )choice
	else
	"Objeto Rapido No Identificado" cyoa-title!
		"Al acercarme, me doy cuenta de que esto no es un OVNI. Es algun tipo de coche raro! No hay ninguna puerta visible en el." cyoa-text!
		grayalien .alive? if
			"El pequeno alienigena gris debe saber como abrir esto."
		else
			"Con el alien comido por los zombies, ya no hay forma de abrir esto! No queda nada mas que hacer que irte cuando puedas."
		then +crtext
		choice( "Dejalo estar por ahora" )choice
	then
	STAT_STRENGTH cyoachar .effstat 99 > if
		choice( "Recoge el coche" )choice: lift-car
	then

;

} }

cyoa{

cyoa: maninblack
	nearest .character@ to recruitee
	recruitee choosechar cicon
	dead? if npc-died then;
	"Man in Black" cyoa-title!
	($ "El es un hombre expresionless en traje negro.	" .. "Aqui no hay extraterrestres! No existe nada como extraterrestres! Ademas, los zombis no existen!" pbold $) cyoa-text! clear-cyoa
;

cyoa: alien
	1 nearest .character@ .party!
	grayalien choosechar cicon
	dead? if npc-died then;
	"Quiero Creer" cyoa-title!
	($ "Los extraterrestres existen de verdad!" .. " ' Lo sabias tu!" rbold $) text!
	region.zombie_basespawn@ 1 < if
		1 to alienopen clear-cyoa deleteme goodfx
		($ "El extraterrestre toca	 " .. pname .. " ' con dedo que brilla. " .. pHis .. " ' Su cerebro esta lleno de informacion sobre como abrir puertas un poco mas complejas de coches desbloqueados!	El extraterrestre aprovecha esta oportunidad para huir.	" $)
	else
		"El extraterrestre esta un poco ocupado en este momento! Pruebe a hablar mas tarde, si sobrevive este asedio!" 
	then +crtext
;

}

: .maninblack
	47 over .specialtype!
	4 over .strength!
	3 over .fitness!
	4 over .shooting!
	0 over .female!
	"MiB" over .name!
	WEAPON_PISTOL over .weapona!
	30 LOOT_BULLET 2 pick .lootamt!
	drop
;

: alien map{ selected } . cr new-npc@ .alien lt .character@ to grayalien
	lt cyoa{ ' alien cyoa! } drop ;

: maninblack map{ selected } . cr new-npc@ .maninblack lt cyoa{ ' maninblack cyoa! } drop ;

: spawn-alien-car 
	18 spawncar mission{ cyoa{ ' cyoa-alien-car cyoa! } } 1 lt .no_hit!
;

: alien-trees map{
	20 for
		tree
		-60 60 frnd anglexy 0.5 pixelw * xymul 0.6 0.4 frnd * lt .pos xyadd lt .pos!
	next

	1 light_mode!
	0 1 0 tint_thing_near!
} ;


regiondef{

	 region: forest ufo
		w: 24
		h: 15
		on-foot
		script: timeofday o'clock

		no-prefab // Don't build that default city
		
		: setup-ufo-forest
			map{ grass } spawn-alien-car
			alien maninblack
			mission{ siege-start-dig }
			alien-trees
			// ' garf-survived to post-mission-cyoa
		;

		post-script: setup-ufo-forest 
}
