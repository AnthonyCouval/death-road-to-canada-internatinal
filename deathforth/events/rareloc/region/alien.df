
0 value alienopen
0 value grayalien

cyoa{ mission{

cyoa: cyoa-alien-car
	alienopen 1 > if cyoa-car then;
//	PRINTSTACK thing# to them# player .id@ to me#
	alienopen 0 > if
	"Lass uns loslegen!" cyoa-title!
		($ "'Das Tor offnet sich, wenn " .. pname .. " 'beruhrt wird!		Dieses Alien-Auto ist schon beeindruckend.		" $) cyoa-text!
			morale++all
			2 to alienopen goodfx
			choice( "Einsteigen" )choice: get-into-car
			choice( "Lass es erstmal so" )choice
	else
	"'Unbekannter Schnellgegenstand" cyoa-title!
		"'Auf genauerer Untersuchung sieht man, dass dieses Ding kein UFO ist. Es handelt sich um ein seltsames Auto! Es gibt keine offensichtliche Tur auf ihm." cyoa-text!
		grayalien .alive? if
			"'Der kleine graue Außerirdische muss wissen, wie man dieses offnet."
		else
			"'Mit dem Alien von den Zombies gefressen, gibt es kein Weg mehr, um dies zu offnen! Es bleibt nichts anderes ubrig, als wenn du gehen kannst, wenn du kannst."
		then +crtext
		choice( "Lass es erstmal so" )choice
	then
	STAT_STRENGTH cyoachar .effstat 99 > if
		choice( "'Hole den Wagen ab" )choice: lift-car
	then

;

} }

cyoa{

cyoa: maninblack
	nearest .character@ to recruitee
	recruitee choosechar cicon
	dead? if npc-died then;
	"'Mann in Schwarz" cyoa-title!
	($ "'Er ist ein ausdrucksloser Mann in einem schwarzen Anzug." .. "'Außerirdische gibt es hier nicht! Es gibt keine Außerirdischen! Zombies existieren auch nicht!" pbold $) cyoa-text! clear-cyoa
;

cyoa: alien
	1 nearest .character@ .party!
	grayalien choosechar cicon
	dead? if npc-died then;
	"'Ich will glauben" cyoa-title!
	($ "'Außerirdische existieren wirklich!" .. " ' DU HAST ES GEWUSST!" rbold $) text!
	region.zombie_basespawn@ 1 < if
		1 to alienopen clear-cyoa deleteme goodfx
		($ "'Der Außerirdische stupst " .. pname .. " 'mit einem leuchtenden Finger. " .. pHis .. " 'Sein Gehirn ist gefullt mit Informationen daruber, wie man leicht kompliziertere, verschlossene Autoturen offnen kann! In diesem Moment nutzt der Außerirdische die Gelegenheit, um wegzulaufen." $)
	else
		"'Der Außerirdische ist im Moment ein wenig beschaftigt! Versuche es spater noch einmal, falls es diese Belagerung uberlebt!" 
	then +crtext
;

}

: .maninblack
	47 over .specialtype!
	4 over .strength!
	3 over .fitness!
	4 over .shooting!
	0 over .female!
	"'MiB" over .name!
	WEAPON_PISTOL over .weapona!
	30 LOOT_BULLET 2 pick .lootamt!
	drop
;

: alien map{ selected } . cr new-npc@ .alien lt .character@ to grayalien
	lt cyoa{ ' alien cyoa! } drop ;

: maninblack map{ selected } . cr new-npc@ .maninblack lt cyoa{ ' maninblack cyoa! } drop ;

: spawn-alien-car 
	18 spawncar mission{ cyoa{ ' cyoa-alien-car cyoa! } } 1 lt .no_hit!
;

: alien-trees map{
	20 for
		tree
		-60 60 frnd anglexy 0.5 pixelw * xymul 0.6 0.4 frnd * lt .pos xyadd lt .pos!
	next

	1 light_mode!
	0 1 0 tint_thing_near!
} ;


regiondef{

	 region: forest ufo
		w: 24
		h: 15
		on-foot
		script: timeofday o'clock

		no-prefab // Don't build that default city
		
		: setup-ufo-forest
			map{ grass } spawn-alien-car
			alien maninblack
			mission{ siege-start-dig }
			alien-trees
			// ' garf-survived to post-mission-cyoa
		;

		post-script: setup-ufo-forest 
}
