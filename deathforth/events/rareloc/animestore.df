cyoa{

cyoa-choice: anime-go
	($ cname .. " 'nimmt eine Stunde, um das Anime zu lesen." $) text!
	deleteme clear-cyoa o'clock@ 1 + o'clock
	cchar .trait@ "'Anime Fan" $= if
		($ cname .. " loves anime!!! Reading this bestows " .. "'GEHEIMNISVOLLE ANIME-KRAFTEN!" rainbold $) +crtext
		goodfx morale2+
		road{ animefan-checker }
	then;
	cwits+ if
		($ cname .. " ' ist ein ungebildetes Schwein, dem es an der notigen Raffinesse mangelt, um diese Arbeit zu schatzen." $) +crtext
		badfx morale-- witsREV
	else
		($ cname .. " ' ist eine Person der Kultur und des guten Geschmacks und schatzt diese Anime sehr." $) +crtext
		goodfx morale++
	then witsREV
;

: animechoice
	choice( "'Lass es jetzt in Ruhe" )choice
	cchar charchoice( " ' liest die Anime" )choice: anime-go
;

cyoa: anime1
	"'Anime Gefunden" cyoa-title!
	picon!
	($ cname .. " ' findet eine Anime betitelt " .. "'SANDWICH-CHAN" pbold .. "' Es handelt sich um einen Graphic Novel uber ein magisches Anime Madchen, das zugleich eine Sandwich ist und in einem Kuhlschrank lebt. Oder vielleicht ist es ein Sandwich, das zugleich ein magisches Anime Madchen ist. Der Plot ist ein wenig schwer zu verfolgen." $) text!
		animechoice
;

cyoa: anime2
	"'Anime Gefunden" cyoa-title!
	picon!
	($ cname .. " ' findet eine Anime betitelt " .. "'Ich kann es nicht glauben, meine Verlobte ist eine Art Fischwesen!" pbold .. "' Es handelt sich um eine Comic uber eine Frau, die eine langweilige Arbeit in einem Buro hat. Ihr Leben wird aufgeheitert durch das Bekommen eines Haustierfisches, der ein menschliches Gesicht hat und sprechen kann. Der Plot beinhaltet, dass sie schließlich heiraten mussen aufgrund eines Fluchs eines Zauberers." $) text!
		animechoice
;

cyoa: anime3
	"'Anime Gefunden" cyoa-title!
	picon!
	($ cname .. " ' findet eine Anime betitelt " .. "'SACK FULL OF PISTACHIOS" pbold .. "'Eine Anime-Serie uber eine Sackfulle von Pistazien. Der Protagonist ist uberrascht, dass die Pistazien lebendig sind. Jede Pistazie ist eine andere Anime-Madchenfigur.	 Es gibt wirklich kein Plot." $) text!
		animechoice
;

cyoa-choice: animebox-go
	62 65 rnd cchar .specialhead!
	($ cname .. " 'ist jetzt offiziell eine Anime-Madchenfigur! Schon!" $) text! goodfx
;

cyoa: animebox
	"'Geheimnisvolle Anime-Schachtel" cyoa-title!
	picon!
	($ cname .. " 'findet eine Schachtel mit Anime. Sie enthalt eine Menge an Anime-Madchenmasken." $) text!
		choice( "'Lass es jetzt in Ruhe" )choice
		cchar charchoice( " 'legt die Anime-Maske an" )choice: animebox-go	
;

: anime-recruit nearest .character@ choosechar cicon 1 cchar .party-familiar goodfx clear-cyoa ;

: animegirl-anime-check
	pchar anime? if
		($ cname .. "'Die Reinheit von ’s Liebe fur Anime hemmt den	Fluch der	Anime ab. " .. pname .. "!
		" .. "'ANIME IST WAHRLICH!" rainbold $) text!
		road{ anime-countdown } 50 < if
			($ "'Die Reine Liebe zu	 " .. cname .. "'Liebe zu Anime halt den	Fluch der	Anime auf. " .. "'Das Fluch der	Anime" rbold .. " 'der auf	 " .. pname .. "viel Spaß!" $) +crtext road{ 99 to anime-countdown }
		then
	then
;

cyoa: anime-mort
	anime-recruit
	"Der Anime Club" cyoa-title!
	($ cname .. "  wirkt irritiert durch " .. pname .. "s Existenz." .. "'I guess we can help you out, but it's not because we like you or anything!'" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-mark
	anime-recruit
	"Der Anime Club" cyoa-title!
	($ cname .. " 'sagt nichts, beginnt aber nach '] " .. pname .. " 'sagt nichts, beginnt aber nach ']" .. "'I guess we can help you out, but it's not because we like you or anything!'" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-clyde
	anime-recruit
	"Der Anime Club" cyoa-title!
	($ cname .. " 'sagt nichts, beginnt aber nach '] " .. pname .. "'sagt nichts, beginnt aber nach ']" .. "'I guess we can help you out, but it's not because we like you or anything!'" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-dave
	anime-recruit
	"Der Anime Club" cyoa-title!
	($ cname .. " 'sagt nichts, beginnt aber nach '] " .. pname .. ".
	" .. "'I guess we can help you out, but it's not because we like you or anything!'" pbold $) text!
	animegirl-anime-check
;

}

: animeclubstats args( char )
	WEAPON_OTAKU <- char .weapona!
	WEAPON_OTAKU <- char .weaponb!
	WEAPON_OTAKU <- char .weaponc!
	0.1 <- char .ai.wander_chance!
	2 <- char .strength!
	1 <- char .fitness!
	0 <- char .female!
;

: .animemort args( char )
	56 <- char .specialtype!
	"Tod" <- char .name!
	<- char animeclubstats
	<- char cyoa{ ' anime-mort cyoa! }
	drop
;

: .animemark args( char )
	55 <- char .specialtype!
	"['', 'Mark']" <- char .name!
	<- char animeclubstats
	<- char cyoa{ ' anime-mark cyoa! }
	drop
;

: .animedave args( char )
	57 <- char .specialtype!
	<- char animeclubstats
	"['', 'Dave']" <- char .name!
	<- char cyoa{ ' anime-dave cyoa! }
	drop
;

: .animeclyde args( char )
	54 <- char .specialtype!
	<- char animeclubstats
	"['', 'Clyde']" <- char .name!
	<- char cyoa{ ' anime-clyde cyoa! }
	drop
;

// : animeshop-npc new-npc 0 lt .leaveok! 1 lt .unseen! lt .character@ ;

locdef{
		
location: animestore
		max-rooms: 2
		entry-tags: shop
		script: yall-theme
		
: animeshoploot
	map{ room-papers }
//	4 for magazine scatter next
	5 for otaku .scatter next
	magazine cyoa{ ' anime1 cyoa! } scatter
	magazine cyoa{ ' anime2 cyoa! } scatter
	magazine cyoa{ ' anime3 cyoa! } scatter
	spawn 0x 4 themed spriteid! bbox as-cloth cyoa{ ' animebox cyoa! } scatter
	inside-npc .animemort inside-npc .animeclyde inside-npc .animedave inside-npc .animemark 
	
;
		
		room-choice: shop
			room-weight: 10
			room-count: 1
			room-script: 
			room-post-script: animeshoploot
			filter-only		
 
		room-choice: restroom
			room-weight: 10
			room-count: 1
			room-script: floor-bath
	
}