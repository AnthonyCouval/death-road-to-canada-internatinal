cyoa{

cyoa-choice: anime-go
	($ cname .. " il faut une heure pour lire lanime." $) text!
	deleteme clear-cyoa o'clock@ 1 + o'clock
	cchar .trait@ "Fan danime" $= if
		($ cname .. " loves anime!!! Reading this bestows " .. "POUVOIRS ANIMES MYSTERIEUX!" rainbold $) +crtext
		goodfx morale2+
		road{ animefan-checker }
	then;
	cwits+ if
		($ cname .. "  est un porc inculte qui na pas les gouts raffines necessaires pour apprecier cette uvre." $) +crtext
		badfx morale-- witsREV
	else
		($ cname .. "  est une personne de culture et de gout et apprecie grandement cet anime." $) +crtext
		goodfx morale++
	then witsREV
;

: animechoice
	choice( "Laissez le tranquille pour linstant" )choice
	cchar charchoice( "  lit lanime" )choice: anime-go
;

cyoa: anime1
	"Anime trouve" cyoa-title!
	picon!
	($ cname .. "  trouve un anime intitule " .. "SANDWICH CHAN" pbold .. "'	 C'est un roman graphique sur une fille d'anime magique qui est aussi un sandwich qui vit dans un refrigerateur. Ou peut etre est ce un sandwich qui est aussi une fille d'anime magique.	 L'intrigue est un peu difficile a suivre." $) text!
		animechoice
;

cyoa: anime2
	"Anime trouve" cyoa-title!
	picon!
	($ cname .. "  trouve un anime intitule " .. "'JE NE PEUX PAS CROIRE QUE MA FIANCEE EST UNE SORTE DE CREATURE POISSON !" pbold .. "'	 C'est une bande dessinee sur une femme qui a un travail morne dans un bureau. Sa vie est egayee par l'acquisition d'un poisson de compagnie qui a un visage humain et qui parle. 	 L'intrigue les oblige a se marier a cause d'une malediction de sorcier." $) text!
		animechoice
;

cyoa: anime3
	"Anime trouve" cyoa-title!
	picon!
	($ cname .. "  trouve un anime intitule " .. "SAC DE PISTACHES" pbold .. "'	 C'est un anime sur un sac de pistaches. Le protagoniste est surpris de decouvrir que les pistaches sont sensibles. Chaque pistache est une fille d'anime differente.	 Il ne semble pas vraiment y avoir d'intrigue." $) text!
		animechoice
;

cyoa-choice: animebox-go
	62 65 rnd cchar .specialhead!
	($ cname .. "  est maintenant officiellement une fille danime ! Sympa !" $) text! goodfx
;

cyoa: animebox
	"Boite danime mysterieuse" cyoa-title!
	picon!
	($ cname .. "  trouve une boite danime. Elle contient un tas de masques de filles danime." $) text!
		choice( "Laissez le tranquille pour linstant" )choice
		cchar charchoice( "  met le masque danime" )choice: animebox-go	
;

: anime-recruit nearest .character@ choosechar cicon 1 cchar .party-familiar goodfx clear-cyoa ;

: animegirl-anime-check
	pchar anime? if
		($ cname .. "'' est completement epoustoufle par l'existence de " .. pname .. "!
		" .. "LANIME EST REEL!" rainbold $) text!
		road{ anime-countdown } 50 < if
			($ "La purete de " .. cname .. "'' l'amour pour l'anime arrete le " .. "MALEDICTION DE LANIME" rbold .. "  qui a ete place sur " .. pname .. "! Profitez!" $) +crtext road{ 99 to anime-countdown }
		then
	then
;

cyoa: anime-mort
	anime-recruit
	"Le Club danime" cyoa-title!
	($ cname .. "  semble irrite par " .. pname .. "'' l'existence.	" .. "'Je suppose que nous pouvons vous aider, mais ce n'est pas parce que vous nous plaisez ou quoi que ce soit!" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-mark
	anime-recruit
	"Le Club danime" cyoa-title!
	($ cname .. "  regarde " .. pname .. " francais" .. "'Je suppose que nous pouvons vous aider, mais ce n'est pas parce que vous nous plaisez ou quoi que ce soit!" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-clyde
	anime-recruit
	"Le Club danime" cyoa-title!
	($ cname .. "  semble trouble et nerveux. Pas a cause de " .. pname .. ", juste en general.	" .. "'Je suppose que nous pouvons vous aider, mais ce n'est pas parce que vous nous plaisez ou quoi que ce soit!" pbold $) text!
	animegirl-anime-check
;

cyoa: anime-dave
	anime-recruit
	"Le Club danime" cyoa-title!
	($ cname .. " ' ne dit rien, mais commence a suivre " .. pname .. ".
	" .. "'Je suppose que nous pouvons vous aider, mais ce n'est pas parce que vous nous plaisez ou quoi que ce soit!" pbold $) text!
	animegirl-anime-check
;

}

: animeclubstats args( char )
	WEAPON_OTAKU <- char .weapona!
	WEAPON_OTAKU <- char .weaponb!
	WEAPON_OTAKU <- char .weaponc!
	0.1 <- char .ai.wander_chance!
	2 <- char .strength!
	1 <- char .fitness!
	0 <- char .female!
;

: .animemort args( char )
	56 <- char .specialtype!
	"Mort" <- char .name!
	<- char animeclubstats
	<- char cyoa{ ' anime-mort cyoa! }
	drop
;

: .animemark args( char )
	55 <- char .specialtype!
	"Mark" <- char .name!
	<- char animeclubstats
	<- char cyoa{ ' anime-mark cyoa! }
	drop
;

: .animedave args( char )
	57 <- char .specialtype!
	<- char animeclubstats
	"Dave" <- char .name!
	<- char cyoa{ ' anime-dave cyoa! }
	drop
;

: .animeclyde args( char )
	54 <- char .specialtype!
	<- char animeclubstats
	"Clyde" <- char .name!
	<- char cyoa{ ' anime-clyde cyoa! }
	drop
;

// : animeshop-npc new-npc 0 lt .leaveok! 1 lt .unseen! lt .character@ ;

locdef{
		
location: animestore
		max-rooms: 2
		entry-tags: shop
		script: yall-theme
		
: animeshoploot
	map{ room-papers }
//	4 for magazine scatter next
	5 for otaku .scatter next
	magazine cyoa{ ' anime1 cyoa! } scatter
	magazine cyoa{ ' anime2 cyoa! } scatter
	magazine cyoa{ ' anime3 cyoa! } scatter
	spawn 0x 4 themed spriteid! bbox as-cloth cyoa{ ' animebox cyoa! } scatter
	inside-npc .animemort inside-npc .animeclyde inside-npc .animedave inside-npc .animemark 
	
;
		
		room-choice: shop
			room-weight: 10
			room-count: 1
			room-script: 
			room-post-script: animeshoploot
			filter-only		
 
		room-choice: restroom
			room-weight: 10
			room-count: 1
			room-script: floor-bath
	
}