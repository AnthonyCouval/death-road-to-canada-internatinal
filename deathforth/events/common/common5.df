
// EYEBALL Update events

cyoa{ road{ 

// Future Toilet, based on a true story

: common5-toilet-end ($ "Le futur sanitaire emet un bruit sifflant et s'arrete de fonctionner." $) +crtext goodfx ;

cyoa-choice: common5-toilet-water
	($ "La toile arrose une grande quantite d'eau a partir d'un bidet cache. cela recouvre la piece d'eau, mais la majorite de l'eau frappe le mur derriere et la plupart du sol. " .. cname .. " dans les yeux a juste distance." $) text!
	morale--
	solo not if ($ Theothersarename .. " heureux de cela ! " $) +crtext cchar ' .morale2+ foreach-team-char-except then
	cchar .shooting@ 6 < if ($ "Mais attendu ! l'eau du bidet etait medicamenteuse et agreablement parfumee ! " .. cname .. "la vue de s'affine." $) +crtext shooting++ then
	most-hurt damage 0 > if ($ Thegroup .. " est totalement retabli par l'eau de bidet medicamentee !" $) +crtext ' .fullheal foreach-team-char then
	common5-toilet-end
;

cyoa-blank: common5-toilet-note
	"Chanson de la salle de bains" cyoa-title!
	"La toile joue de la belle musique. la musique n'a pas de mots, mais transmet une forte et inquietante message d'espoir." text!
	morale4+all common5-toilet-end
;

cyoa-choice: common5-toilet-wings
	"La couvercle de toilettes s'ouvre et se ferme rapidement, emettant des gros souffles sonores whoomp lorsque la couvercle s'ouvre en jetant des bourrasques d'air. la couvercle s'ouvre et se ferme environ trente fois de suite, puis arrete." text!
	($ cname .. " cette fonction a pour but incertain." $) +crtext
	common5-toilet-end gstats{ 30 ' toilets-opened +! }
;

cyoa-choice: common5-toilet-butt
	"La siege de toile commence a vibrer et a eclaircir legerement." text!
	($ cname .. " se siege. le siege electronique du wc fonctionne. " .. chim .. " une puissante glande gluteale" .. "*" pbold .. " 'massage : soins corporels manuels'" $) +crtext
	"Les glutes sont la cle de l'agilite. . 	les glutees sont la cle de la force. . 	les glutees sont la cle de la puissance. . 	les glutees sont le centre de la vie." bbold +crtext
	morale++ strength++ fitness++ common5-toilet-end
	"*Vocabulary note: Gluteal means 'butt'" pbold +crtext
;

cyoa: common5-toilet-rare
	"Le sanitaire du passe futur" cyoa-title! choosehuman cicon
	($ Thegroup .. " decouvrent quelque chose incroyable en explorant une maison : un toilettage fonctionnel reellement. tous faisaient leurs besoins dans la foret... . 	ce toilette possede un tableau de bord futuriste rempli de boutons. " .. cname .. " se voit contraint de appuyer sur un et choisit le bouton marque d'une image de :" $) text!
		choice( "Jets d'eau ?" )choice: common5-toilet-water
		choice( "Notes musicales" )choice: common5-toilet-note
		choice( "Battement d'ailes" )choice: common5-toilet-wings
		choice( "Une botte ?" )choice: common5-toilet-butt
;

// Long Line

: common5-line-camp ($ "Avec la journee depensee, " .. thegroup .. " doit eriger son camping." $) +crtext +cr fullcamp 1 calendar-day+ ;
: common5-line-shop ($ "Magasin : c'est un magasin de grosse distribution a la mode et chic. la plupart des articles plus elegants ont rouille et se sont putrefies, mais il reste encore quelque butin." $) +crtext
	8 12 rnd trunk-food+ 4 6 rnd trunk-medical+ goodfx ;

cyoa-choice: common5-line-pick
	
	cdog? if
		($ cname .. " course vers la ligne et l'emporte entierement ... plus tard, " .. cname .. " rend avec une baton. " .. chis .. " buche." $) text!
		1 WEAPON_TREEBRANCH trunk.weapon+
		morale2+ cchar morale--all-except goodfx
		common5-line-camp
	then;
	
	ccat? if
		($ cname .. " course dans la boutique, en evitant la file. " .. cHe .. " emerge portant un rongeur mort, peut-etre un hamster ?" $) text!
		2 trunk-food+ morale2+ goodfx
	then;
	
	cpet? if
		($ cname .. " se repose un peu. comme un animal, " .. che .. " je ne comprends pas la notion de une ligne, ou je feigne de ne l'entendre pas." $) text!
		morale++ goodfx
	then;
	
	cchar oblivious? if
		($ cname .. " ignore cette ligne. " .. cHe .. " je n'ai pas remarque la ligne ni les zombies du tout." $) text!
		witsREV attitudeREV common5-line-shop
	then;
	
	ctemper- if
		cloyalty- if
			($ cname .. " ignorez simplement cette ligne et continuez. " .. cHe .. " joue pas par les regles !" $) text!
			morale++ aholeREV common5-line-shop
		then;
		($ cname .. " dure approximativement une minute avant de s'eteindre dans la ligne. " .. chis .. " calme-toi !" $) text!
		cstrength+ if
			"ATTENTE EN FILE EST POUR LES NULS !" rbold +crtext
			($ cHe .. " frappe avec une grande vitesse tous les zombies qui se trouvent devant lui jusqu'a ce qu'ils explosent. il y en a trop pour pouvoir les frapper tous a la main. " .. che .. " travaille dur et s'ebroue en arriere, roux de sueur. quel entrainement!" $) +crtext
			rageREV fitness++ fitnessREV morale++ goodfx
		then;
		($ cHe .. " attaque le zombie devant lui. " .. chim .. "les autres zombies se rendent compte et commencent a vous attaquer. " .. cname .. " il est contraint de s'executer !" $) +crtext
		sting-- bitefx temperREV 
	then;
	
	ctemper+ if
		($ cname .. " patientement attends le patient dans la longue file. elle avance lentement mais surement. " .. che .. " attend tranquillement." $) text!
		temperREV 
		common5-line-shop common5-line-camp
	then;
	
	($ cname .. " attend dans la file. elle avance de quelques centimetres. " .. cname .. "grande derangement pour lui." $) text!
	attitude+roll if 
		($ cname .. " essayez de penser positivement a cela. " .. cHe .. " parvient a resister et a entrer dans le magasin !" $) +crtext
		attitudeREV morale-- common5-line-shop
	else
		($ "Apres des heures de cela, les zombies se mettent en mouvement contre nous. " .. cname .. " en raison de " .. chis .. " gemmage incessant. " .. cHe .. " il est contraint de fuir !" $) +crtext
		morale2- sting-- bitefx 
	then temperREV common5-line-camp
;

cyoa-bridge: common5-line-pick4
	"Laissez-passer a celui qui attendra dans la file des zombies :" text!
	' common5-line-pick cyoa-team-choice 
;

cyoa-blank: common5-line
	"En attendant toujours en file d'attente" cyoa-title!
	($ Thegroup .. " se rend face a une horde de zombies. ils attendent calmes et immobiles devant un magasin, en longue file indienne. chaque zombie regarde droit devant lui." $) text!
		choice( "Ignorer cette bizarrerie" )choice
	solo if
		"Signet d'affaire emousse et illisible." +crtext
		soloer charchoice( "attendez dans la file" )choice: common5-line-pick
	then;
	"Envoyez quelqu'un rejoindre la file, il semble y avoir une attente longue." +crtext
	team-count 3 > if
		' common5-line-pick 2 #cyoa-team-choice
		choice( "Choisissez quelqu'un d'autre." )choice: common5-line-pick4
	else
		' common5-line-pick 3 #cyoa-team-choice
	then	
;

// Rock throwing

cyoa-choice: common5-rock-throw
	($ cname .. " il est contraint de jeter une pierre sur le malheureux zombie." $) text!
	cchar oblivious? if
		($ cHe .. " jette par inadvertance la pierre de telle sorte qu'elle revient. " .. chim .. "d'abord, c'etait tout droit, ensuite il a touche le cloture plusieurs fois. cela dure plusieurs heures." .. cname .. " jette rarement une pierre au-dela du parapet. " .. cHe .. " il est presque mort d'epuisement a cette epoque." $) +crtext
		morale3- sting-- cchar morale--all-except fitness++ strength++ fitnessREV strengthREV witsattREV
		common5-line-camp
	then;
	strength+roll if
		($ cHe .. " met tous " .. chis .. " la pierre devient une puissante jette d'en bas. la pierre manque le zombie, mais elimine un petit gardeen gnome." $) +crtext
		strengthREV morale++all goodfx
		33 stpick if choosechar ($ cname .. " cela est tres offensant pour " .. chim .. "!" $) +crtext morale4- badfx then
	then;
	cfitness+ if
		($ cHe .. " lance un jet perfectionne. la pierre glisse harmonieusement dans l'air. elle manque le zombie de loin, mais quelle belle lancee !" $) +crtext
		fitnessREV morale2+ cchar morale++all-except goodfx
	then;
	($ cHe .. " cela fait du bruit, ce qui est assez amusant pour faire oublier la meteo ! " .. cHe .. " s'echappe de justesse au-dela du barrier et de la falaise." $) +crtext badfx strengthREV fitnessREV morale-- cchar morale++all-except
;

cyoa: common5-rock
	"La pierre parfaite" cyoa-title!
	($ Thegroup .. " trouve une pierre parfaite pour la jeter sur le sol. elle est a cote d'un petit grillage abritant une grande chute. au fond de cette chute se trouve un seul zombie, debout et regardant vers rien en particulier." $) text!
	solohuman if choosehuman
		($ cname ..  " ressent un vif desir de jeter la pierre sur ce zombie." $) +crtext
		choice( "Laisser les zombies en paix" )choice
		cchar charchoice( "jete une pierre !" )choice: common5-rock-throw
	else
		"C'est trop bon pour etre laisse partir. quelqu'un doit jeter cette pierre sur ce zombie :" +crtext
		' common5-rock-throw cyoa-human-choice
	then
;

// Drag Race

cyoa-choice: common5-drag-race
	vehicle.which@ 1 < if
		($ Thegroup .. " actuellement, il n'a pas de voiture, donc c'est une course assez eloignee pour lui." $) text!
		"J'AI GAGNE, NULS !" rbold +crtext morale3-all badfx
	then;
	($ "La course commence ! les deux conducteurs " .. "ACCELERE PLEIN GAZ!" fbold $) text!
	car-speed 2 < if
		($ Thegroup .. "sa voiture lente n'a eu aucune chance dans cette course." $) +crtext badfx morale3-all
	then;
	car-speed 2 = if
		($ Thegroup .. "son voiture est trop lente et reste loin derriere." $) +crtext badfx morale--all
	then;
	car-speed 3 > if
		"Tu gagnes facilement la course en laissant le conducteur de l'autre voiture dans la poussiere." +crtext goodfx morale4+all
	then;
	car-speed 2 > if
		"Tu as juste gagne la course a mon insu. il t'offre une benediction en le levant avec la main." +crtext morale2+all goodfx
	then;
;

cyoa-choice: common5-drag-ignore
	vehicle.which@ 0 > if
		"VOUS NE POUVEZ PAS FAIRE CELA ! VOUS NE POUVEZ PAS IGNORER UN DEFI DE COURSE DE DRAGSTER !" rbold text!
		car-armor 0 > if
			($ "Le conducteur heurte quelqu'un ou quelque chose. " .. thegroup .. "'s car, but just bounces right off the armor.
			The driver's car careens off the road and crashes into a ditch." .. Thegroup .. " ceci le fait rire beaucoup." $) +crtext morale3+all goodfx
		then;
		($ "Le conducteur heurte quelqu'un ou quelque chose. " .. thegroup .. "la voiture de lui s'envolant en toupie." $) +crtext
		-1 car-chassis+
		car-chassis 0 > if 
			($ "La voiture subit des dommages mineurs. " .. thegroup .. " des gobelins mechants !" $) +crtext sting--all bitefx
		else
			($ "La voiture battue ne pouvait plus supporter cette charge. elle s'arrete de fonctionner." $) +crtext badfx
		then
	else
		"REPONSE : JE ME BIDONNE LA-DESSUS ! REVOYONS-EN DANS UN PEU PLUS TARD, QUAND VOUS AUREZ UNE VOITURE !" rbold text!
		($ "Le conducteur " .. "LES YEUX" fbold $) +crtext
	then

;

cyoa-choice: common5-drag-ram
	($ "Avant que la course de dragster puisse debuter, " .. thegroup .. " labourer a la charrue "  .. ghis .. " faire entrer votre voiture dans la voiture de l'adversaire." $) text!
	car-armor 0 > if
		"Votre vehicule blinde ecrase facilement la voiture rapide et fragile, l'armure ne recoit aucune marque." +crtext
	else
		-2 car-chassis+ bitefx
		car-chassis 0 > if
			"Vos voitures subissent des degats, mais celle de l'adversaire en subit beaucoup plus. vous gagnez la course !" +crtext
		else
			"Les deux voitures sont assez endommagees pour ne plus pouvoir conduire. cela fait donc un nul a la course !" +crtext
		then 
	then
	($ "Le geneur conducteur s'enfuit, criant haute voix. " .. "FAUTIVE ! " rbold .. Thegroup .. " s'approvisionne en gaz de son ravage." $) +crtext
	morale++all 30 40 rnd trunk-gas+ goodfx
;

cyoa-choice: common5-drag-rules
	($ cname .. " les regles du drag racing ne sont pas claires." $) text!
	"THE ONLY RULE OF DRAG RACING... IS THAT THERE ARE NO RULES!" rbold +crtext
	"Regles de la course de dragster : " +crtext
	most-ahole if choosechar
		($ "Cette periode-la, " .. cname .. " va de l'avant et aspirate tous les gazoles du vehicule conducteur." $) +text 80 120 rnd trunk-gas+ aholeREV
	else
		($ "Autour de la regle 60, " .. thegroup .. " lentement s'eloigne alors le conducteur en continuant de parler." $) +text
	then goodfx
;

cyoa: common5-drag
	"Faire passer faaf 15 rapidement :" cyoa-title! someicon
	($ "Voici un voiturier rapide et elegant qui s'arrete pres de vous dramatiquement. il hurle de sa fenetre :" $) text!
	"SUR LA ROUTE DE LA MORT, LE SEUL MOYEN DE SURVIVRE EST DE ETRE RAPIDE ET FURIEUX." rbold +crtext
	"Il vous defie a une course de dragster." +crtext
		choice( "Ignorer le fou" )choice: common5-drag-ignore
	vehicle.which@ 0 > if
		choice( "Foncez sur son voiture" )choice: common5-drag-ram
	then
	choice( "Accepter le defi" )choice: common5-drag-race
	most-oblivious if
		charchoice( ": je vous demande des regles." )choice: common5-drag-rules
	then
;

// Radio Station

cyoa-choice: common5-radiodj-siphon
	($ Thegroup .. " extrait le gaz du generateur. il ne restait plus beaucoup, mais chaque petit morceau compte... . 	la radio se desactive." $) text! 15 30 rnd trunk-gas+ goodfx
;

0 value DJ-PICK

cyoa-choice: common5-radiodj-pick

	// This should be expanded later for lots of possible stuff

	cdog? if
		($ cname .. " 'dites quelque chose du genre :' " .. "ABOIE !" rbold .. " ou peut-etre " .. "QU'EST-CE QU'UN B" rbold .. "esperons-le, ce message devait confondre beaucoup de gens qui ecoutaient la radio." $) text!
		morale++ goodfx
	then;
	
	cpet? if
		($ cname .. " detruit le microphone !" .. cname .. " est tres heureux de se debarrasser de cette menace." $) text! bitefx morale2+ strengthREV fitnessREV
	then;
	
	cchar oblivious? if
		($ cname .. " activation involontaire du microphone revelant des informations personnelles genantes... des faits utiles aux voleurs concernant la localisation et les approvisionnements actuels sont reveles." $) text!
		witsattREV cchar morale2-all-except
	then;
	
	cchar grating? if
		($ cname .. " crispe repeteement des hurlements " .. "FAITES CHILLER !" fbold .. " apres onze de ces cris, l'equipement radio court-circuit et la generatrice enflamme." $) text! witsattREV morale++ cchar morale2-all-except 11 to cool-it
	then;
	
	cchar paranoid? if
		($ cname .. " projet code nomme « marche sanglante » par le gouvernement. " .. "PROJET : DINGUS" bbold .. " la mission initiale etait de servir de rideau pour fabriquer des jorts." .. 
		"*" rbold .. " en finalment, la verite est revelee !" $) text! witsattREV morale3+ cchar morale--all-except
		"note: jorts mean 'jean shorts'." rbold +crtext
	then;
	
	cloyalty- if
		($ cname .. " envoie un message utile :" $) text!
		cchar ahole? if
			"CIVILIZATION HAS ENDED!
			LIE, CHEAT, STEAL GAS FROM TOILETS!
			HOMEWORK SUCKS!!!" rbold +crtext
			"Ceci est la derniere ligne de ce harangue qui est si bruyante que le microphone emet des retentions d'echo." +crtext
			aholeREV morale2+
			cchar ' .loyalty-- foreach-team-char-except
		else
			"EVERYONE BUT ME
			... IS A NERD!" rbold +crtext
			loyaltyREV morale++
		then cchar morale--all-except
	then;

	cchar .hiskill-stack depths 0= if 0 else shuffles pops then to DJ-PICK drop
	
	DJ-PICK STAT_MEDICAL = if
		cchar .medical 3 > if
			($ cname .. " sait que " .. chis .. " 'une message pouvant eventuellement epargner des vies, et panique en enoncant autant de connaissances medicales pratiques que possible :' " .. che .. " can in a short time.
			Maybe this can help someone." $) text!
			medicalREV morale++
			' .medical++ foreach-team-char
		then;
		cchar .medical 3 < if
			($ cname .. " avide de connaissances medicales, enjambe les paroles. " .. che .. " can in a short time.
			It's all really bad advice that makes anyone that hears it actually worse off." $) text!
			medicalREV morale2+
			cchar ' .medical-- foreach-team-char-except
		then; medicalREV
	then
	
	DJ-PICK STAT_MECHANICAL = if
		cchar .mechanical 3 > if
			($ cname .. " broadcasts a short impromptu talk show that is a crash course in car repair. It's informative and entertaining.
			Maybe this can help someone." $) text!
			mechanicREV morale++
			' .mechanic++ foreach-team-char
		then;
		cchar .mechanical 3 < if
			($ cname .. " rambles on about repairing sweet cars and 'crafting level 3 lighting-flame-chainsaws' until the power runs out.
			Anyone that hears this actually gets worse at repairing things." $) text!
			mechanicREV morale2+
			cchar ' .mechanic-- foreach-team-char-except
		then; mechanicREV
	then
	
	DJ-PICK STAT_FITNESS = if
		cfitness+ if
			($ cname .. " creates an intense radio calisthenics show. Whoever is listening joins in with the exercises.
			The total combined sweat from this could fill up a bathtub." $) text!
			fitnessREV morale2+
			' .fitness++ foreach-team-char
		then;
	then
	
	DJ-PICK STAT_SHOOTING = if
		cshooting+ if
			($ cname .. " broadcasts some very effective tips and theories on zombie shooting.
			During the show, " .. cHe .. " il vient meme avec des nouveaux coups de visu." $) text!
			shootingREV morale++
			' .shooting++ foreach-team-char		
		then;	
	then

	DJ-PICK STAT_STRENGTH = if
		cstrength+ if
			($ cname .. " lit un poeme " .. che .. " j'ai ecrit a propos de la quantite. " .. che .. " loves being strong.
			The Four Spirits of Swoleness hear this sweet poem, and they confer their blessing!" $) text!
			strengthREV morale++
			' .strength++ foreach-team-char		
		then;	
	then
	
	cchar charming? if
		($ cname .. " je ne peux rien ajouter a cela. " .. che .. " chante une chanson... 	c'est un magnifique spectacle, assurement destine a devenir le nouveau tube post-apocalyptique!" $) text! witsattREV morale2+all
	then;
		
	($ cname .. " desole, je ne peux pas vous dire quelque chose et reste silencieux meme quand l'energie s'eteint." $) text! badfx morale--
;

cyoa-bridge: common5-radiodj-pick4
	"Qui sera le disc jockey de la radio ?" text!
	' common5-radiodj-pick cyoa-team-choice
;

cyoa: common5-radiodj
	"Radio route de la mort" cyoa-title!
	($ Thegroup .. " recherche une radio : l'equipement d'emission est relie a un generateur a gaz avec peu de carburant restant. il reste assez de puissance pour envoyer un message a qui que ce soit capable d'y ecouter. " $) text!
		choice( "Generateur de siphon" )choice: common5-radiodj-siphon
	solo if
		soloer charchoice( ": envoi d'un message" )choice: common5-radiodj-pick
	then;
	"Quelqu'un do ivre de pouvoir lancer le message." +crtext
	team-count 3 > if
		' common5-radiodj-pick 2 #cyoa-team-choice
		choice( "Choisissez quelqu'un d'autre." )choice: common5-radiodj-pick4
	else
		' common5-radiodj-pick 3 #cyoa-team-choice
	then	
;

// Mysterious Radio Signal

: common5-signal-win
	"L'avertissement indique que la base a ete abandonnee, mais ils ont cache une reserve de munitions pour aider d'autres survivants... cette reserve se trouve pres de la !" +crtext morale++all ammosearch2
	solohuman if witsREV else ' .witsREV foreach-team-char // wits-total is for the whole team instead of just humans, oddly... may change this later
		wits-total 17 > if
			"Message supplementaire dechiffre par l'equipe :" +crtext
			char-gen to recruitee ricon
			($ "Nous avons egalement renonce a cela. " .. recruitee .name@ .. ", " .. rhe .. " was a real nerd.
			You can recruit " .. rhim .. " si vous etes desespere" $) bbold bbold +crtext
			recruit-yesno
		then
	then
;

cyoa-blank: common5-signal-decode
	solohuman if
		choosehuman ($ cname .. " essayez de dechiffrer le code en utilisant vos competences technique. " .. chim .. "self..." $) text!
		cwits+ if common5-signal-win then;
	else
		"The team puts their heads together to figure out the code..." text!
		wits-total 10 > if common5-signal-win then;
	then
	"Le message dit quelque chose comme " +crtext "BOIRE PLUS D'OVALTUMS" bbold +text
	"Ceci n'a aucun sens ! quel dechet de temps !" +crtext morale--all
;

cyoa-blank: common5-signal-drive
	($ Thegroup .. " essayez de conduire vers le feu par ecoute de la diffusion radio, en observant si les signaux s'affaiblissent ou s'intensifient. cela prend beaucoup de temps." $) text!
	car-mpg 0 = if
		"Ce voiture ne consomme pas de gaz essence." +crtext
		goodfx
	else		
		trunk-gas 70 car-mpg * >= if
			-55 -70 rnd car-mpg * car-gas+ 
		else
			bandit-gas
		then
	then +cr fullcamp heal-event
	($ gThey .. " trouver" .. g1s .. " un abri de preparation encore en fonctionnement qui diffuse encore un message. tous sont partis en courant, laissant derriere eux un stock de fournitures..." $) +crtext homesearch2 ammosearch2
;

cyoa-choice: common5-signal-gov
	"Ceci est clairement une embuscade meticuleusement mise en place par le gouvernement... le gouverement secret des zombies !" pbold text!
	($ gHe .. " ne perd pas de temps en " .. "S'EN DEBARRASSANT RAPIDEMENT, SANS SE PREOCCUPER DES CONSEQUENCES." fbold .. " allo ! c'est quoi ?" .. cname .. " est assez soulage d'avoir evade." $) +crtext morale2+ witsattREV
;

cyoa: common5-signal
	"Signal mysterieux de radio" cyoa-title!
	($ Thegroup .. " ceci pourrait etre un morse code cache ou une transmission inconnue provenant d'une source non identifiee. les musiques, les signaux sonores et le kazoo pourraient representer des codes secrets ou des mots codes. la succession de chiffres entendus peut etre interpretee comme un message crypte a dechiffrer. l'utilisation d'un slide whistle est egalement courante dans certaines transmissions cachees. il est recommande d'enregistrer la transmission et d'analyser les morceaux distincts afin de tenter de dechiffrer ce mystere." $) text!
		choice( "Ignorer cela" )choice
		choice( "Dechiffrer le message" )choice: common5-signal-decode
		choice( "Conduisez jusque au signal" )choice: common5-signal-drive
		most-paranoid if
			charchoice( "CECI EST UN PIEGE !" )choice: common5-signal-gov
		then
;

// Repair Shop repair

cyoa-choice: common5-repair-pick
	($ cname .. " spends a day trying to fix something in the junk pile... " $) text!
	cchar .mechanical@ case
		0 of ($ cHe .. " se produit des coupes, egratignures et bourrasques accidentellement. " .. cHe .. " apprend par experience a reparer." $) +text endof
		1 of ($ cHe .. " transforme une raquette de tennis cassee en un objet. " .. "Racket de tennis ultra ergonomique niveau 2 de la baleine" bbold .. "vous devriez vraisemblablement echanger tous vos aliments contre des chapeaux elegants." $) +text 1 WEAPON_TENNIS trunk.weapon+ endof
		2 of ($ cHe .. " transforme une machette rouillee inutile en utilisable ou du moins utilisable. " .. "Machette rouillee" bbold .. "c'est nettement une amelioration." $) +text 1 WEAPON_MACHETE1 trunk.weapon+ endof
		3 of ($ cHe .. " renforcer une bat a cotes cassees avec des clous et du metal pour en faire une nouvelle. " .. "Baton emaille" bbold .. "cela fonctionne bien jusqu'a ce qu'il s'arrete !" $) +text 1 WEAPON_SPIKEDBAT trunk.weapon+ endof
		4 of ($ cHe .. " affutage d'une lame peu effilee. " .. "Broyeur a billes pour arbres fruitiers" bbold .. "c'est un arme passablement correcte, legerement geneuse, qui ne s'effondrera pas !" $) +text 1 WEAPON_BRANCHTRIM trunk.weapon+ endof // This was a sturdy machete until I chickened out
		5 of ($ cHe .. " obtient un brise. " .. "Souffleur a feuilles" bbold .. " reanimez les zombies et les jetez en l'air comme feuilles !" $) +text 1 WEAPON_BLOWER trunk.weapon+ endof
		6 of ($ cHe .. " retablit une panne " .. "Batteuse a gazon" bbold .. "c'est comme un fils un peu lache a la chaineuse ! pour faire face a cette faiblesse en puissance, il est cependant beaucoup plus economique en essence." $) +text 1 WEAPON_WHACKER trunk.weapon+ endof
	endcase mechanicREV mechanic++
	+cr fullcamp heal-event
;

cyoa-bridge: common5-repair-pick4
	"Quelqu'un devrait passer une journee a reparer du goudron." text!
	' common5-repair-pick cyoa-human-choice

;

cyoa: common5-repair
	"Atelier de reparation de reparation" cyoa-title!
	($ Thegroup .. " cherche une entreprise de reparation. il y a un petit peu de carburant, ainsi qu'une grande quantite de dechetages casses. il pourrait y avoir quelque chose bon ici, si vous savez le reparer." $) text!
	10 16 rnd trunk-gas+
		choice( "Ignorer la grosse chose" )choice
	solohuman if choosehuman cchar charchoice( ": reparer la bouillie." )choice: common5-repair-pick "Vous pouviez passer un jour a reparer des choses ici." +crtext then;
	"Passons quelqu'un a passer une journee pour reparer du materiel usage :" +crtext
	numhums 3 > if
		' common5-repair-pick 2 #cyoa-human-choice
		choice( "Choisissez quelqu'un d'autre." )choice: common5-repair-pick4
	else
		' common5-repair-pick cyoa-human-choice
	then
;

// Health Food Store healing

0 stack
	"la nourriture est a son gout." shove
	"ne s'en fait pas des aliments degoutants." shove
	"a une bonne attitude envers cette boue !" shove
	"tente de rester ouverte a toutes les idees." shove
	"pretende etre de la nourriture industrielle, a la place." shove
	"reussit a ignorer la nourriture." shove
	"pense a la curry." shove
	"se concentre sur les benefices pour la sante." shove
	"essaye de bloquer l'odeur." shove
	"a mange peut-etre des aliments pire avant." shove
	"bloque mentalement la degout." shove
	"resistez a toute emotion actuellement !" shove
value common5-healthfood-line-base
common5-healthfood-line-base shuffles var common5-healthfood-line

: common5-healthfood-say
	common5-healthfood-line depths 0= if common5-healthfood-line-base shuffles to common5-healthfood-line then pops nip
;

: common5-healthfood-stat args( @ )
	<- @ .cattitude+ if
		($ <- @ .colourname .. " " .. common5-healthfood-say $) +crtext 
	else
		<- @ .cattitude- if
			<- @ .morale2-
		else
			<- @ .morale--
		then
	then <- @ .attitudeREV <- @ .health++
	
;

cyoa-blank: common5-healthfood-go
 ($ Thegroup .. " reprend des denrees alimentaires biologiques, en prenant ce qui : " .. gthey .. " c'est a dire qu'il peut vivre avec un certain quantite de nourriture, ce qui ne s'avere pas etre une grande quantite en total." $) text!
  4 6 rnd trunk-food+
  ' common5-healthfood-stat foreach-team-char
  ($ Thegroup .. " regarde plus longtemps, ca me fait sentir plus sain!" $) +crtext
;

cyoa: common5-healthfood
	"La panique pour les aliments biologiques" cyoa-title!
	($ Thegroup .. " rechercher une epicerie bio. il semble que personne n'ait vole dans ce magasin parce que la nourriture etait desagreable a regarder... . la plupart des aliments semblent pourrir en fait. ou peut-etre qu'il s'agit simplement d'aliments qui doivent avoir cette apparence et ce parfum." $) text!
		choice( "Ignorer a des raisons d'esprit" )choice: morale++all
		choice( "Rapprocher le gros aliment pour le depouiller." )choice: common5-healthfood-go
;

// The Swole-O-Flex

0 value common5-swoloflex@

: common5-swoloflex-go
	common5-swoloflex@ 1 < if
		"The machine starts its patented automated total-body bodybuilding regiment..." text!
		($ cname .. "ce corps fait des bruits crispants et croquants entendables ! quel horreur !" $) rbold +crtext
		strength++ ouch-- 1 to common5-swoloflex@ bitefx
	else
		($ "La machine serrera " .. cname .. " in place for its innovative gymnastics simulator..." $) text!
		($ "Un fil electrique a haute tension se detache et s'agite violemment ! il n'y a pas de temps pour reagir a cela !" $) rbold +crtext
		fitness++ ouch-- 0 to common5-swoloflex@ bitefx
	then
;

cyoa-choice: common5-swoloflex-again
	($ cname .. " termine " .. chis .. " travail des muscles, quels que soient les couts !" $) text!
	common5-swoloflex-go
	dead? if
		($ "Une petite boite parle sur la machine et dit " .. "IDEE MAGNIFIQUE." rbold $) +crtext
	then;
;

cyoa-bridge: common5-swoloflex-pick
	($ cname .. " uses the innovative Swolo-O-Flex personal exercise system..." $) text!
	common5-swoloflex-go
	dead? if
		($ "Une petite boite parle sur la machine et dit " .. "AUCUN REMBOURSEMENT !" rbold $) +crtext
	then;
		choice( "Prevenir de nouvelles blessures" )choice
		choice( "Obtenu le tuyau metallique" )choice: common5-swoloflex-again
;

cyoa-bridge: common5-swoloflex-pick4
	"Quelqu'un devrait etre mutile ou tue par le swole-o-flex ?" rbold text!
	' common5-swoloflex-pick cyoa-human-choice
;

cyoa: common5-swoloflex
	"Swole-o-flex : flexion musculaire intense" cyoa-title!
	0 1 rnd to common5-swoloflex@
	($ Thegroup .. " rencontre par hasard " .. "Machine a force et fitness a la maison swole-o-flex [tm]" bbold .. "ceci n'est plus utilise beaucoup depuis que des proces ont ete intentes contre lui et que le gouvernement a ordonne des rappels." $) text!
		// The company that made it went out of business shortly before the zombocalypse hit. - Extra text
		choice( "S'eloigner de lui" )choice
	solohuman if choosehuman cchar charchoice( "utilisez swole-o-flex" )choice: common5-swoloflex-pick "Cela te fera du mal a utiliser cela." rbold +crtext then;
	"Choisissez quelqu'un pour utiliser swole-o-flex et probablement etre tue :" rbold +crtext
	numhums 3 > if
		' common5-swoloflex-pick 2 #cyoa-human-choice
		choice( "Choisissez quelqu'un d'autre." )choice: common5-swoloflex-pick4
	else
		' common5-swoloflex-pick cyoa-human-choice
	then
;

// Gnome Challenge Conduct Rare

defer common5-gnomerepeat
: common5-gnome-back choice( "RETOUR" )choice: common5-gnomerepeat ;

cyoa-choice: common5-gnome-no
	"Toutes les defis sonneront mal." text! ricon
	($ "Le gnome hurle. " .. "QUELS QUE SOIENT VOS OBSESSIONNELS, NERDS !" rbold .. " et alors, il se balance et s'en va en bourrissant de colere." $) +crtext
	($ Thegroup .. " c'est termine, je me desens." $) +crtext morale++all goodfx
;

0 stack
	" rire discretement." shove
	" ne ressent pas beaucoup different, simplement un peu raide de soi." shove
	" souffle les epaules, roule les yeux." shove
	" ne rire pas forcesment." shove
value common5-gnome-line-base
common5-gnome-line-base shuffles var common5-gnome-line

: common5-gnome-say	common5-gnome-line depths 0= if common5-gnome-line-base shuffles to common5-gnome-line then pops nip ;

: common5-gnome-morale-stat args( @ )
	<- @ .trait@ "Politement" $= if
		($ <- @ .colourname .. common5-gnome-say $) +crtext
		<- @ .morale3+
	then
	<- @ .shooting++ <- @ .mechanic++ <- @ .medical++ <- @ .strength++ <- @ .fitness++
	<- @ .vitality++ -3 STAT_MORALE <- @ .bonus!
;

cyoa-blank: common5-gnome-morale-go
	"PEUX-TU SURVIVRE A LA TRISTESSSE ?" rbold text! goodfx
	' common5-gnome-morale-stat foreach-team-char
;

cyoa-bridge: common5-gnome-morale
	"SOIS MAUDIT PAR LA TRISTEUR ULTIME ET EMOTIONNELLE !" rbold text! ricon
	($ "Cet option te fera choisir cela. " .. thegroup .. "la moral maximale de sera reduite de 3 en dessous de la normale. en echange, " .. gthey .. " aura" $) +crtext
	"+ un point supplementaire ajoute a la vie maxime !." bbold +crtext
	common5-gnome-back
	choice( "Defi pris en main !" )choice: common5-gnome-morale-go
;

: common5-gnome-melee1 "Obtenu la whammer !" bbold +crtext 1 WEAPON_MEGASPIKEDBAT trunk.weapon+ ;
: common5-gnome-melee2 "Avec une forge solide et un ciseau puissant !" bbold +crtext 1 WEAPON_SCLEAVER trunk.weapon+ ;
: common5-gnome-melee3 "Auberge et dejeuner" bbold +crtext 1 WEAPON_WOODCLUB trunk.weapon+ ;
: common5-gnome-melee4 "Avec une epee de terrains puissante !" fbold +crtext 1 WEAPON_CLAYMORE trunk.weapon+ ;
: common5-gnome-melee5 "A eu un hache-barre!" fbold +crtext 1 WEAPON_HALBERD trunk.weapon+ ;

0 stack
	' common5-gnome-melee1 shove
	' common5-gnome-melee2 shove
	' common5-gnome-melee3 shove
	' common5-gnome-melee4 shove
	' common5-gnome-melee5 shove
value common5-gnome-meleewep-base
common5-gnome-meleewep-base shuffles var common5-gnome-meleewep

: common5-gnome-givemelee common5-gnome-meleewep depths 0= if common5-gnome-meleewep-base shuffles to common5-gnome-meleewep then pops nip execute ;

cyoa-blank: common5-gnome-shoot-go
	"PAS PLUS DE FUSILS OU DE SCIES-CHAINES ! RENDEZ-VOUS A VOTRE DEFI !" rbold text! goodfx
	' .nocanshoot foreach-team-char
	team-count-alive for common5-gnome-givemelee next
;

cyoa-choice: common5-gnome-shoot
	"JE DETESTE LES ARMES ET LES SCIE-SAW, ILS FONT TROP DE BRUIT !" rbold text! ricon
	($ "Cet option te fera choisir cela. " .. thegroup .. " plus capable de tirer des armes a feu ou d'utiliser des scies a chaine ou des armes similaires. en contrepartie, vous recevrez : " $) +crtext
	"chaque membre de votre groupe recevra un arme de melee de haute qualite au hasard : baton en bois, le marteau, couteau solide, claymore puissant ou hallebarde." bbold +text
	common5-gnome-back
	choice( "Defi pris en main !" )choice: common5-gnome-shoot-go
;

: common5-gnome-firearm1 "Avec une uzi !" bbold +crtext 1 WEAPON_UZI trunk.weapon+ 80 trunk-bullet+ ;
: common5-gnome-firearm2 "Vous avez obtenu un fusil d'assault !" bbold +crtext 1 WEAPON_AK47 trunk.weapon+ 50 trunk-rifle-shell+ ;
: common5-gnome-firearm3 "A eu la mitrailleuse miniature !" fbold +crtext 1 WEAPON_MINIGUN trunk.weapon+ 100 trunk-rifle-shell+ ;
: common5-gnome-firearm4 "Vous avez une fusil a charge de gauche !" bbold +crtext 1 WEAPON_AUTOSHOT trunk.weapon+ 30 trunk-shotgun-shell+ ;
: common5-gnome-firearm5 "Vous avez une fusil a canon rige !" bbold +crtext 1 WEAPON_SLUG trunk.weapon+ 30 trunk-shotgun-shell+ ;

0 stack
	' common5-gnome-firearm1 shove
	' common5-gnome-firearm2 shove
	' common5-gnome-firearm3 shove
	' common5-gnome-firearm4 shove
	' common5-gnome-firearm5 shove
value common5-gnome-firearm-base
common5-gnome-firearm-base shuffles var common5-gnome-firearm

: common5-gnome-givefirearm common5-gnome-firearm depths 0= if common5-gnome-firearm-base shuffles to common5-gnome-firearm then pops nip execute ;

cyoa-blank: common5-gnome-melee-go
	"DES ARME A MELEE SONT INTERDITES DEFINITIVEMENT ! BONNE CHANCE !" rbold text! goodfx
	' .atkspecial foreach-team-char
	team-count-alive for common5-gnome-givefirearm next
;

cyoa-choice: common5-gnome-melee
	"QUI A BESOIN DE LARMES DE COMBAT LORSQUE VOUS AVEZ L'AMITIE ?" rbold text! ricon
	($ "Cet option te fera choisir cela. " .. thegroup .. " plus capable de lancer des attaques a melee. au lieu de cela, vous recevrez : " $) +crtext
	"chaque membre de votre groupe recevra une arme a feu de haute qualite aleatoire : uzi, fusil d'assaut, arme automatique a obus gros, arme a obus de gros calibre ou mitraillette. .  . accompagnee de munitions !" bbold +text
	common5-gnome-back
	choice( "Defi pris en main !" )choice: common5-gnome-melee-go
;

cyoa: common5-gnome-rare
	"Mode de defi" cyoa-title! char-gen to recruitee ricon recruitee .gnomify2
	($ "Durant une pause, un gnomme apparait et commence a hurler..." .. "JE SUIS CNOMEY, L'ORGANISATEUR DES DEFIS DE GNOME !" rbold .. "challenge supplementaire : en echange de ... " .. "RECOMPENSE FABULEUSE !" rainbold $) text!
		choice( "Aucune instruction donnee." )choice: common5-gnome-no
		choice( "Aucune attaque a melee autorisee." )choice: common5-gnome-melee
		choice( "No Shooting/Chainsaw" )choice: common5-gnome-shoot
		choice( "Penalite de moral maximum" )choice: common5-gnome-morale
;

' common5-gnome-rare to common5-gnomerepeat

// Cursed Ancient Chest

0 value common5-chest@

cyoa-choice: common5-chest-rare-

;

: common5-chest-weapon
	common5-chest@ case
	0 of "Tente de survivre." endof
	1 of "Epee en argile puissante." endof
	2 of "Couteau a trancher robuste" endof
	endcase rbold
;

: common5-chest-weaponpick
	common5-chest@ case
		0 of WEAPON_CUTLASS endof
		1 of WEAPON_CLAYMORE endof
		2 of WEAPON_SCLEAVER endof
	endcase cchar
;

cyoa-choice: common5-chest-pick
	($ cname .. " prends le / prends cet objet la. " .. common5-chest-weapon .. "1. . se fusionne a " .. chis .. " des mains qui empechent l'utilisation de toute arme supplementaire !" $) text!
	ctakeweapons 1 cchar .carrying.slot_count!
	common5-chest-weaponpick .weapona! 1 cchar .weapon_nodropa!
	cchar .trait@ "Specialiste" $= if
		($ cname .. " sentiment naturellement a l'aise avec cette arme et eprouve un petit air de vanite." $) +crtext strength++ fitness++ morale++ goodfx
	then; goblin-laugh
;

cyoa-bridge: common5-chest-pick4
	solohuman if
		choosehuman common5-chest-pick
	then;
	($ "Celui qui doit recevoir l'empoisonnement incroyablement malefique : " .. common5-chest-weapon .. "?" $) text!
	"Avertissement : l'arme sera collee au personnage, et le personnage ne disposera plus qu'une case de port equipement !" rbold +crtext
	' common5-chest-pick cyoa-human-choice
;

cyoa-choice: common5-chest-book
	solohuman if
		choosehuman ($ cname .. " lit le " .. "Dingusnomicon!" rbold $) text!
	else
		($ "Tour par tour, chacun lit. " .. "Dingusnomicon!" rbold $) text!	
	then
	($ "Ce livre est malefique et ancien, recouvert d'yeux et de bouches. il mord peu a peu et hurle egalement. " .. "la vie." fbold .. " dans un millier de langues oubliees differentes." $) +crtext
	morale--all sting--all bitefx
	"Ce livre transmet sa connaissance interdite !" bbold +crtext
	' rewardevent-random foreach-human-char
	choosehuman cchar rewardevent-random
;

0 value common5-lootweapon@

: common5-lootweapon-name
	common5-lootweapon@ case
		0 of "Epee de chevalier" endof
		1 of "Pere et fils" endof
		2 of "Hache medievale" endof
		3 of "Couteau de machette robuste" endof
		4 of "Epee de balestra" endof
		5 of "Lance a hache" endof
		6 of "Etoile du matin" endof
	endcase rbold
;

: common5-lootweapon-pick
	1 common5-lootweapon@ case
		0 of WEAPON_KNIGHT endof
		1 of WEAPON_BARDICHE endof
		2 of WEAPON_MEDIEVAL endof
		3 of WEAPON_MACHETE2 endof
		4 of WEAPON_RAPIER endof
		5 of WEAPON_HALBERD endof
		6 of WEAPON_MORNING endof
	endcase trunk.weapon+
;

cyoa-choice: common5-chest-loot
	0 6 rnd to common5-lootweapon@
	($ Thegroup .. " decouvre un tresor d'armes tres anciennes ! alors que tu les triais entre les choses inutilisables, " .. gthey .. " courir" .. g1s .. " dans de nombreux problemes avec des eclats et de petits araignees mordantes." $) text!
	morale--all sting--all bitefx
	($ gThey .. " prenons certains armes utiles, comprenant une arme a feu. " .. common5-lootweapon-name .. "!" $) +crtext
	common5-lootweapon-pick
	1 30 %chance if WEAPON_WOODCLUB else 50 %chance if WEAPON_GAUNTLET else WEAPON_DAGGER then then trunk.weapon+ 1 WEAPON_DAGGER trunk.weapon+ 
;

cyoa-choice: common5-chest-basket
	($ Thegroup .. " un gobelin a trouve une corbeille de cadeaux !" $) text!
	homesearch2 ammosearch2 morale++all
	($ "La caisse aux cadeaux est un peu maudite ! maintenant " .. cname .. " se voit contraint d'acheter un cadeau pour des gobelins invisibles et potentiellement inexistants !" $) +crtext goblin-laugh
;

: common5-chest-flash
	common5-chest@ case
	0 of "Tente de survivre." endof // CUTLASS
	1 of "Epee en argile puissante." endof // CLAYMORE
	2 of "Couteau a trancher robuste" endof // SCLEAVER
	endcase fbold
;

cyoa: common5-chest-rare
	"Tresor maudit" cyoa-title! someicon
	0 2 rnd to common5-chest@
	($ Thegroup .. " recherche des approvisionnements dans une cabane effrayante et decouvre une cave cachee avec un tresor ancien !" $) text!
	"Avertissement : les choix rouges sont associes a une perte de moral et des dommages non mortels !" rbold +crtext " eclaircir " fbold +text "choisissez une arme qui ferra tomber le personnage a qui vous la donnez a un emplacement de stockage verrouille unique !" rbold +text
		choice( "Panier cadeau gobelin" )choice: common5-chest-basket
		choice( "Le dingusnomicon" rbold )choice: common5-chest-book
		choice( "Armes perdues a longue foi" rbold )choice: common5-chest-loot
		choice( common5-chest-flash )choice: common5-chest-pick4
;

// Hand Replacement

cyoa-choice: common5-hand-pick
	($ nursename .. " preparation de la piece pour une chirurgie." $) text!
	teamnurse .medicalREV
	($ cname .. " perd " .. chis .. " une main ordinaire et obtient un " .. "Main de scie a chaine !" rainbold .. " Cette chaineuse modifiee est plus efficace !" $) +crtext
	ctakeweapons WEAPON_CHAINHAND cchar .weapona! 1 cchar .weapon_nodropa!
	cchar .trait@ "Specialiste" $= if
		($ cname .. " ressent un air de superbe arrogante !" rainbold $) +crtext
		2 cchar .carrying.slot_count! morale4+
	then
	teamnurse .cmedical+ teamnurse .medical statroll or if
		"Il etait une fois une celebrite." +crtext goodfx
	else
		"La chirurgie etait tres maladroite." +crtext strength-- sting-- badfx
	then
	1 WEAPON_DSHOTGUN trunk.weapon+ // Putting this here just so that it can be given last in -loot
	choice( "Groovy est une langue de programm" )choice
;

cyoa-bridge: common5-hand-pick4
	"Vous voulez donner une main de scie a chaine a quelqu'un ?" text!
	' common5-hand-pick cyoa-human-choice
;

cyoa-choice: common5-hand-loot
	($ "A la place de la chirurgie de remplacement de main, " .. thegroup .. " toute la medecine du local est recuperee, y compris une spray de regeneration !" $) text!
		9 trunk-medical+ 3 WEAPON_HEALSPRAY trunk.weapon+ goodfx
	mechanicest choosechar cmechanic+ if
		($ cname .. " gere de transformer la main de la scie-a-chaine en une main ordinaire utilisable avec une scie-a-chaine !" $) +crtext
		mechanicREV 1 WEAPON_CHAINSAW trunk.weapon+ mechanicREV
	else
		"La main de chaine a ete concue pour l'utilisation unique sur bras, elle est donc laissee derriere." +crtext
	then 1 WEAPON_DSHOTGUN trunk.weapon+
;

cyoa: common5-hand-rare
	"Mise a niveau de la main" cyoa-title!
	medicalest to teamnurse
	($ Thegroup .. " idee interessante : une main a chaine vide est presente dans un coin et un squelette tient une arme a double canon de chasse et une main mecanique a chaine, toutes deux vides.	" $) text!
		choice( "Recuperez approvisionnements au lieu de cela." )choice: common5-hand-loot
	solohuman if
		choosehuman cchar charchoice( "remplacez la main." )choice: common5-hand-pick 
		"Les chainesaws sont meilleurs que les mains." +crtext then;
	"Remplacez la main d'une personne par une scie a chaines:" +crtext
	numhums 3 > if
		' common5-hand-pick 2 #cyoa-human-choice
		choice( "Choisissez quelqu'un d'autre." )choice: common5-hand-pick4
	else
		' common5-hand-pick cyoa-human-choice
	then
;

} }

// Blank
(*
cyoa-choice: common5--

;

cyoa: common5-
	" " cyoa-title!
	($ " " $) text!
		choice( " " )choice
		choice( " " )choice
;
*)
