
uses events/car/walkdecks/carfind1.df

cyoa{ road{ 

: usedlot-carget ($ Thegroup .. "  bekommt ein neues Gebrauchtwagen!" $) cyoa-text! goodfx ;
cyoa-choice: usedlot-SUV image-suv usedlot-carget carinfo-SUV CAR_SUV get-car ;
cyoa-choice: usedlot-muscle image-sports-car usedlot-carget carinfo-muscle CAR_MUSCLE2 get-car ;
cyoa-choice: usedlot-hybrid image-hybrid-battery usedlot-carget carinfo-hybrid CAR_HYBRID2 get-car ;

cyoa-choice: usedlot-van image-white-van usedlot-carget carinfo-van CAR_VAN get-car ;
cyoa-choice: usedlot-grandpa image-car-lot usedlot-carget carinfo-grandpa CAR_GRANDPA get-car ;
cyoa-choice: usedlot-little image-car-lot usedlot-carget carinfo-little CAR_BUG get-car ;

cyoa: car1-usedlot
	"'Preise so niedrig dass sie kostenlos sind" cyoa-title!
	($ Thegroup .. " findet ein benutztes Autolot, das von der Zeit unberuhrt scheint, oder zumindest nicht von Plunderern beruhrt wurde." .. gThey .. " findet" .. g1s .. " eine Versorgung mit Benzin und ein paar funktionstuchtige Autos!" $) cyoa-text!
		50 80 rnd trunk-gas+ image-car-lot
		// Choices in events/car/walkdecks/carfind1.df
		70 %chance if 		
			choice( "Austausch nach SUV" )choice: usedlot-SUV
		else
			choice( "Austausch nach Muscle Car" )choice: usedlot-muscle
		then
		70 %chance if 	
			choice( "Austausch nach Kleinkraftwagen" )choice: usedlot-little
		else
			choice( "Austausch nach Klassikwagen" )choice: usedlot-grandpa
		then
		30 %chance if 
			choice( "Austausch nach Elektro Hybrid" )choice: usedlot-hybrid
		else
			choice( "Austausch nach Grokraftrasenwagen" )choice: usedlot-van
		then
		choice( "Fahrzeug behalten, wegfahren" )choice
;	

: mechanic-armor?
	mechanic-silentrepair
	mechanic-diff 1 > if
		3 car-armor+ ($ "SUPER PANZERUNG AKTIVIEREN!" fbold $)
	else
		mechanic-diff -1 > if
			2 car-armor+ ($ "PANZERUNG AKTIVIEREN!" rbold $)
		else
			1 car-armor+ ($ "RUSTUNG aufrusten!" rbold $)
		then
	then
	+cr +text
;
: mech-diff-1-morale mechanic-diff -1 > if morale2+all else morale++all then goodfx ;
cyoa-choice: car1-garage-armor 
	($ cname .. "  verwendet das herumliegende Altmetall um eine provisorische Panzerung am Auto anzubringen. Das dauert ein paar Tage." $) cyoa-text!
	mechanic-diff 1 > if
		($ cHe .. "  leistet erstaunliche Arbeit! Das Auto ist jetzt praktisch ein Panzer!" $)
	else
		mechanic-diff -1 > if
		($ cHe .. "  arbeitet effizient. Das Auto sieht beeindruckend aus!" $)
		else
		"Es sieht so aus als wurde die Panzerung jeden Moment vom Auto fallen."
		then
	then 
	+cr +text mechanic-armor? team-count -4 * trunk-food+ mechanicREV mechanic++ 2 calendar-day+
	mech-diff-1-morale heal-event sleep
;

: nocar-garage
	30 50 rnd trunk-gas+ goodfx
	"'Ohne Auto gibt es hier nicht viel zu tun!" +crtext
;

cyoa: car1-garage
	image-car-garage
	"Gepanzerte Garage" cyoa-title!
	($ Thegroup .. " ' findet eine professionelle Autowerkstatt. Das Schild sagt 'CAR PROZ'.	" .. gThey .. " findet" .. g1s .. "  etwas Benzin und viel Altmetall." $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		 "  Brauche nur Zeit zum Basteln." +text
		30 50 rnd trunk-gas+
		// garage-choices are in carlogic.df, and do the standard ones
		garage-choices
		// Every garage can have a different special choice
		trunk-food team-count 4 * 1 - > if
			choice( "Repariere und panzere das Auto fur 2 Tage" )choice: car1-garage-armor 
		then
;	

: mechanic-megatune?
	mechanic-silentrepair
	mechanic-diff 1 > if
		10 car-megatune+ ($ "ULTRA TUNING!" fbold $)
		car-mpg 0.6 * to car-mpg
	else
		mechanic-diff -1 > if
			6 car-megatune+ ($ "SUPER TUNING!" rbold $)
			car-mpg 0.8 * to car-mpg
		else
			2 car-megatune+ ($ "TUNING?" rbold $)
		then
	then
	+cr +text
;

cyoa-choice: car1-garage-megatune 
	($ cname .. "  verbringt ein paar Tage in der Garage. " .. cHe .. "  hofft das Auto bis an seine Grenzen zu verbessern." $) cyoa-text!
	mechanic-diff 1 > if
		($ cHe .. "  macht erstaunliche Arbeit! Das Auto lauft BESSER als neu!" $)
	else
		mechanic-diff -1 > if
		($ cHe .. " ' arbeitet effizient. Die Lebensdauer des Autos wird verlangert, mit besserer Laufleistung!" $)
		else
		"'Es ist schwer zu sagen ob sich das Auto uberhaupt verandert hat. Vielleicht ist es besser?"
		then
	then 
	+cr +text mechanic-megatune? team-count -6 * trunk-food+ mechanicREV mechanic++ 3 calendar-day+
	mech-diff-1-morale heal-event sleep
;

cyoa: car1-tunegarage
	image-car-garage
	"Einsame Garage" cyoa-title!
	($ Thegroup .. " ' findet eine abgelegene Autowerkstatt. Das Schild sagt MASTER TUNERZ." .. gThey .. " findet" .. g1s .. "  etwas Benzin und viele Ersatzteile in gutem Zustand." $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		30 50 rnd trunk-gas+
		garage-choices
		trunk-food team-count 6 * 1 - > if
			choice( "Reparieren und optimieren Sie das Auto fur 3 Tage" )choice: car1-garage-megatune
		then
;	

: mechanic-megaspeed?
	mechanic-silentrepair
		mechanic-diff -1 > if
			1 ' car-speed +! ($ "GESCHWINDIGKEIT ERHOHT!" rbold $) +crtext
		then
;

cyoa-choice: car1-garage-megaspeed
	($ cname .. "  verbringt ein paar Tage in der Garage. " .. cHe .. "  versucht die seltsamen Teile herauszufinden." $) cyoa-text!
		mechanic-diff -1 > if
		($ cHe .. "  installiert sie. Es war ein RAKETENBOOSTER!" $)
		else
		"Die Teile bleiben ein Ratsel und werden zuruckgelassen. Das Auto wird repariert."
		then
	+cr +text mechanic-megaspeed? team-count -6 * trunk-food+ mechanicREV mechanic++ 3 calendar-day+
	mechanic-diff 1 > if morale3+all goodfx else mech-diff-1-morale then heal-event sleep
;

cyoa: car1-speedgarage
	image-car-garage
	"Glanzende Garage" cyoa-title!
	($ Thegroup .. " ' findet eine noch glanzende Autowerkstatt. Das Schild sagt 'CARLZ CUSTOMZ'.	" .. gThey .. " findet" .. g1s .. "  etwas Benzin und einige mysteriose Autoteile." $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		30 50 rnd trunk-gas+
		garage-choices
		trunk-food team-count 6 * 1 - > if
			choice( "Reparieren und versuchen 3 Tage lang zu modifizieren" )choice: car1-garage-megaspeed
		then
;	

cyoa-choice: car1-floodroad-plow
	($ Thegroup .. "  beschliet ein Risiko einzugehen und den Wagen durch die uberflutete Strae zu pflugen." $) cyoa-text! car-plowthrough	
;
cyoa-choice: car1-floodroad-jump
	($ Thegroup .. "  entdeckt eine provisorische Rampe und hat die spektakular gefahrliche Idee zu versuchen uber den uberfluteten Teil der Strae zu springen." $) cyoa-text! car-jump
;
cyoa: car1-floodroad
	image-water-driving
	"Ausgewaschene Strae" cyoa-title!
	vehicle.which@ 0 = if 
		($ "Die Strae vor ihnen ist uberflutet. Ohne Auto, " .. thegroup .. "  muss einen langen Umweg zu Fu machen." $) text! 1 calendar-day+ +cr fullcamp
	then;
	($ "Die Strae vor ihnen ist uberflutet, aber es sieht so aus, als ob das Auto sie vielleicht noch passieren konnte.	" .. Thegroup .. "  entscheidet sich fur:" $) cyoa-text!
		// carlogic.df again
		choice( "Einen Umweg nehmen" )choice: car-detour
		choice( "Durchpflugen" )choice: car1-floodroad-plow
		angriest choosechar chumany? if
			cchar charchoice( "': LASST UNS SPRINGEN" )choice: car1-floodroad-jump
		then
;	

cyoa-choice: car1-fallentree-plow
	($ Thegroup .. " ' denkt, dass es nur ein Baum ist, und das Auto ist aus Metall. Wie schwierig konnte es sein, ihn zu uberfahren?" $) cyoa-text! car-plowthrough	
;
cyoa-choice: car1-fallentree-shoot
	($ Thegroup .. "  beschliet die Waffen herauszuholen und auf den toten Baum zu schieen." $) cyoa-text!
	// car-shoot-check if
	// Retooling this a bit later
		"Der Plan funktioniert irgendwie! Der Baum wird auseinandergeblasen." +cr +text goodfx
	(* else
		($ "'Das hat uberhaupt nicht funktioniert. " .. Thegroup .. "  versucht dann das Auto durch den von Kugeln durchlocherten Baum zu rammen." $) +cr +text car-plowthrough
	then *)
	car-shoot
;
: car1-fallentree-pop dup .morale-- 50 %chance if dup .strength-- else dup team-attacked then ;
cyoa-choice: car1-fallentree-lift
	choosehuman
	($ Thegroup .. "  beschliet zu versuchen den Baum aufzuheben." $) cyoa-text!
	strength-total 10 > if
		($ Thegroup .. "  schafft es den Baum durch pure Kraft von der Strae zu entfernen!" $) +cr +text goodfx
	else
		strength-total 5 > if
			($ Thegroup .. " moves the tree out of the road through extreme effort. 
			" .. cname .. "  hat etwas in ihrem Korper das knallt!" $) +cr +text 
				cchar team-attacked morale-- strength-- badfx
		else
			($ Thegroup .. "  schafft es uberhaupt nicht, den Baum zu bewegen, schafft es aber, sich selbst ziemlich schwer zu verletzen " .. ghim .. "selber ziemlich schlecht. " .. gThey .. "  beschlieen" .. g1s .. "  zu versuchen den Baum mit dem Auto zu rammen."  $) +cr +text
			car-plowthrough ' car1-fallentree-pop foreach-team-char
		then
	then
;
cyoa: car1-fallentree
	image-tree-in-road
	"Baum auf der Strae" cyoa-title!
	"Der Weg voraus ist von einem groen Baum versperrt. Es sieht so aus als hatte ihn jemand gefallt um die Strae zu blockieren. Es wurde eine Gruppe starker Leute brauchen um ihn sicher zu bewegen!" text!
	vehicle.which@ 0 = if 
		($ "Ohne Auto, " .. thegroup .. "  klettert einfach uber den umgesturzten Baum." $) +crtext morale++all goodfx
	then;
	($ Thegroup .. "  entscheidet sich fur:" $) +crtext
		// carlogic.df again
		choice( "Einen Umweg nehmen" )choice: car-detour
		choice( "Durchpflugen" )choice: car1-fallentree-plow
		choice( "Hebe den Baum hoch" )choice: car1-fallentree-lift
		// Add an event for having a chainsaw?
		car-shoot-check if
			choice( "SCHIESSE ES AB" )choice: car1-fallentree-shoot
		then
;	

cyoa-choice: car1-dashcode-mech
	($ cname .. "  pruft das Auto und findet das Problem. Es war nur ein loser Tankdeckel. Einfach zu reparieren!" $) cyoa-text!
		cmechanic- if mechanic++ then
		mechanicREV goodfx 2 4 rnd car-tune+
;
cyoa-choice: car1-dashcode-punch
	cpet? if
		($ cname .. "  beit wie die Holle in das Auto, ganz schon." $)
	else
		($ cname .. "  zerschmettert das Auto mit " .. chis .. " " $)
	then cyoa-text!	
	"Es baut etwas Stress ab, und die Fehlerleuchte erlischt!" +crtext
		cchar .strength 4 < if strength++ then
		morale++ strengthREV goodfx -1 car-chassis+
;
cyoa-choice: car1-dashcode-kick
	($ cname .. "  steigt aus dem Auto und schlagt einfach mit " .. chis .. "  fuen darauf ein. Was fur ein Training! Die Fehlerleuchte bleibt jedoch an." $) cyoa-text!
		cchar .fitness 4 < if fitness++ then
		morale++ fitnessREV goodfx -1 car-chassis+
;

: car1-dashcode-dtext cpet? if "beit" else "schlagt" then ;

cyoa: car1-dashcode
	vehicle.which@ 0 = if 
		image-zombie-hoard-1
		"Wandern nach Kanada" cyoa-title!
		($ Thegroup .. "  hat nicht den Schutz eines Autos wenn sie sich Kanada nahern. " .. gTheyare .. "  von einer groen Horde im Freien angegriffen. Es gibt keinen Ort an dem man sich verstecken kann und keine Zeit zum Kampfen." $) text! ouch--all bitefx
	then;
	image-check-engine
	"MOTOR WARTEN BALD" cyoa-title!
	($ "Das Auto lauft einwandfrei, aber auf dem Armaturenbrett wird ein Fehlercode angezeigt. " .. Thegroup .. " ' hat keine Ahnung, was los ist, also " .. gthey .. "  pull" .. g1s .. "  vorbei um zu sehen was los ist." $) cyoa-text!
		choice( "Ignorieren Sie es" )choice
		mechanicest charchoice( "  untersucht es sorgfaltig" )choice: car1-dashcode-mech
		strongest choosechar cchar charchoice( " " .. car1-dashcode-dtext .. "  es ganz fest" )choice: car1-dashcode-punch
		fittest charchoice( "  tritt es viel" )choice: car1-dashcode-kick
;

} }
