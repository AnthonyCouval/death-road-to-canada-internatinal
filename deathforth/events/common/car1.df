
uses events/car/walkdecks/carfind1.df

cyoa{ road{ 

: usedlot-carget ($ Thegroup .. " 'bekommt ein neues Gebrauchtwagen!" $) cyoa-text! goodfx ;
cyoa-choice: usedlot-SUV image-suv usedlot-carget carinfo-SUV CAR_SUV get-car ;
cyoa-choice: usedlot-muscle image-sports-car usedlot-carget carinfo-muscle CAR_MUSCLE2 get-car ;
cyoa-choice: usedlot-hybrid image-hybrid-battery usedlot-carget carinfo-hybrid CAR_HYBRID2 get-car ;

cyoa-choice: usedlot-van image-white-van usedlot-carget carinfo-van CAR_VAN get-car ;
cyoa-choice: usedlot-grandpa image-car-lot usedlot-carget carinfo-grandpa CAR_GRANDPA get-car ;
cyoa-choice: usedlot-little image-car-lot usedlot-carget carinfo-little CAR_BUG get-car ;

cyoa: car1-usedlot
	"'Preise so niedrig, sie sind kostenlos" cyoa-title!
	($ Thegroup .. " 'findet einen Gebrauchtwagenhandel, der unversehrt zu sein scheint, zumindest nicht von Plunderern beruhrt." .. gThey .. " 'findet" .. g1s .. " 'eine Gasversorgung und ein paar funktionierende Autos!" $) cyoa-text!
		50 80 rnd trunk-gas+ image-car-lot
		// Choices in events/car/walkdecks/carfind1.df
		70 %chance if 		
			choice( "'Austausch gegen SUV" )choice: usedlot-SUV
		else
			choice( "'Austausch gegen Muscle Car" )choice: usedlot-muscle
		then
		70 %chance if 	
			choice( "'Austausch gegen Kleinstwagen" )choice: usedlot-little
		else
			choice( "'Austausch gegen Klassiker" )choice: usedlot-grandpa
		then
		30 %chance if 
			choice( "'Austausch gegen Elektro-Hybrid" )choice: usedlot-hybrid
		else
			choice( "'Austausch gegen Großvan" )choice: usedlot-van
		then
		choice( "'behalt das Auto, fahrt davon" )choice
;	

: mechanic-armor?
	mechanic-silentrepair
	mechanic-diff 1 > if
		3 car-armor+ ($ "'SUPER RUSTUNG HINAUF!" fbold $)
	else
		mechanic-diff -1 > if
			2 car-armor+ ($ "'RUSTUNG AUF!" rbold $)
		else
			1 car-armor+ ($ "'RUSTUNG etwas auf!" rbold $)
		then
	then
	+cr +text
;
: mech-diff-1-morale mechanic-diff -1 > if morale2+all else morale++all then goodfx ;
cyoa-choice: car1-garage-armor 
	($ cname .. " ' nutzt das Schrott, das umherliegt, um dem Auto makeshift Rustung zu schaffen. Das dauert ein paar Tage." $) cyoa-text!
	mechanic-diff 1 > if
		($ cHe .. " ' macht wundersames Werk! Das Auto ist fast wie ein Panzer jetzt!" $)
	else
		mechanic-diff -1 > if
		($ cHe .. " ' arbeitet effizient. Das Auto sieht hervorragend aus!" $)
		else
		"'Es sieht so aus, als ob die Rustung des Autos jederzeit abfallt."
		then
	then 
	+cr +text mechanic-armor? team-count -4 * trunk-food+ mechanicREV mechanic++ 2 calendar-day+
	mech-diff-1-morale heal-event sleep
;

: nocar-garage
	30 50 rnd trunk-gas+ goodfx
	"'Hier ist nicht viel zu tun, ohne ein Auto!" +crtext
;

cyoa: car1-garage
	image-car-garage
	"'Panzergarage" cyoa-title!
	($ Thegroup .. " 'findet einen professionellen Autogaragen. Das Schild sagt 'CAR PROZ'.	" .. gThey .. " 'findet" .. g1s .. " einige Gas und viel Schrottmetall." $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		 " Ich brauche nur Zeit zum Basteln." +text
		30 50 rnd trunk-gas+
		// garage-choices are in carlogic.df, and do the standard ones
		garage-choices
		// Every garage can have a different special choice
		trunk-food team-count 4 * 1 - > if
			choice( "2 days of repair and armor" )choice: car1-garage-armor 
		then
;	

: mechanic-megatune?
	mechanic-silentrepair
	mechanic-diff 1 > if
		10 car-megatune+ ($ "ULTRA ABSTIMMUNG!" fbold $)
		car-mpg 0.6 * to car-mpg
	else
		mechanic-diff -1 > if
			6 car-megatune+ ($ "'Vollservice-Abstimmung!" rbold $)
			car-mpg 0.8 * to car-mpg
		else
			2 car-megatune+ ($ "'Abgestimmt?" rbold $)
		then
	then
	+cr +text
;

cyoa-choice: car1-garage-megatune 
	($ cname .. " " .. cHe .. " " $) cyoa-text!
	mechanic-diff 1 > if
		($ cHe .. " " $)
	else
		mechanic-diff -1 > if
		($ cHe .. " " $)
		else
		"'Es ist schwierig zu sagen, ob das Auto sich geandert hat. Vielleicht ist es besser geworden?' In German, this means 'It's hard to tell if the car has changed at all. Maybe it's better?"
		then
	then 
	+cr +text mechanic-megatune? team-count -6 * trunk-food+ mechanicREV mechanic++ 3 calendar-day+
	mech-diff-1-morale heal-event sleep
;

cyoa: car1-tunegarage
	image-car-garage
	"'Einsame Garage' in German means 'Lonely Garage'." cyoa-title!
	($ Thegroup .. " " .. gThey .. " 'findet" .. g1s .. " " $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		30 50 rnd trunk-gas+
		garage-choices
		trunk-food team-count 6 * 1 - > if
			choice( "'Reparatur und Feinabstimmung des Autos fur 3 Tage' in German means 'Repair and fine-tune the car for 3 days'." )choice: car1-garage-megatune
		then
;	

: mechanic-megaspeed?
	mechanic-silentrepair
		mechanic-diff -1 > if
			1 ' car-speed +! ($ "'Die Geschwindigkeit wurde erhoht!" rbold $) +crtext
		then
;

cyoa-choice: car1-garage-megaspeed
	($ cname .. " " .. cHe .. " " $) cyoa-text!
		mechanic-diff -1 > if
		($ cHe .. " ' installt sie. Es war ein RAKETENBOOSTER!" $)
		else
		"'Die Teile bleiben ein Ratsel und werden zuruckgelassen. Das Auto bekommt etwas Reparaturen."
		then
	+cr +text mechanic-megaspeed? team-count -6 * trunk-food+ mechanicREV mechanic++ 3 calendar-day+
	mechanic-diff 1 > if morale3+all goodfx else mech-diff-1-morale then heal-event sleep
;

cyoa: car1-speedgarage
	image-car-garage
	"'Scheiniges Garage" cyoa-title!
	($ Thegroup .. " 'findet einen noch scheinigen Wagen-Garage vor. Das Schild sagt 'CARLZ CUSTOMZ'.	" .. gThey .. " 'findet" .. g1s .. " 'einige Benzin und einige geheimnisvolle Auto-Teile." $) cyoa-text!
		vehicle.which@ 0 = if nocar-garage then;
		30 50 rnd trunk-gas+
		garage-choices
		trunk-food team-count 6 * 1 - > if
			choice( "'Reparatur und Versuch einer Modifikation fur 3 Tage" )choice: car1-garage-megaspeed
		then
;	

cyoa-choice: car1-floodroad-plow
	($ Thegroup .. " 'entscheidet sich, auf die Sache zu wagen und das Auto durch den uberschwemmten Weg zu ziehen." $) cyoa-text! car-plowthrough	
;
cyoa-choice: car1-floodroad-jump
	($ Thegroup .. " 'entdeckt eine provisorische Rampe und hat den spektakular gefahrlichen Plan, das uberschwemmte Teil des Wegs mit dem Auto zu springen." $) cyoa-text! car-jump
;
cyoa: car1-floodroad
	image-water-driving
	"'Uberschwemmter Weg" cyoa-title!
	vehicle.which@ 0 = if 
		($ "'Die Straße voraus ist uberschwemmt. Mit keinem Auto,	 " .. thegroup .. " 'muss man eine lange Umleitung auf Fuß gehen." $) text! 1 calendar-day+ +cr fullcamp
	then;
	($ "'Die Straße voraus ist uberschwemmt, aber es sieht so aus, als ob das Auto dennoch durch sie fahren konnte.	" .. Thegroup .. " entscheidet sich fur:" $) cyoa-text!
		// carlogic.df again
		choice( "Einen Umweg machen" )choice: car-detour
		choice( "Durchpflugen" )choice: car1-floodroad-plow
		angriest choosechar chumany? if
			cchar charchoice( "': LASSTS DAS SPRINGEN']" )choice: car1-floodroad-jump
		then
;	

cyoa-choice: car1-fallentree-plow
	($ Thegroup .. " 'Denkt, dass es nur ein Baum ist, und das Auto aus Metall ist. Wie schwer kann es sein, es zu uberfahren?'" $) cyoa-text! car-plowthrough	
;
cyoa-choice: car1-fallentree-shoot
	($ Thegroup .. "  entscheidet sich, die Waffen zu ziehen und auf den toten Baum zu feuern." $) cyoa-text!
	// car-shoot-check if
	// Retooling this a bit later
		"Der Plan geht irgendwie auf! Der Baum wird gesprengt." +cr +text goodfx
	(* else
		($ "Das hat uberhaupt nicht geklappt. " .. Thegroup .. " dann versucht, das Auto durch den mit Kugeln ubersaten Baum zu rammen." $) +cr +text car-plowthrough
	then *)
	car-shoot
;
: car1-fallentree-pop dup .morale-- 50 %chance if dup .strength-- else dup team-attacked then ;
cyoa-choice: car1-fallentree-lift
	choosehuman
	($ Thegroup .. " entscheidet sich, den Baum aufzuheben." $) cyoa-text!
	strength-total 10 > if
		($ Thegroup .. " 'raumt den Baum mit purer Kraft aus dem Weg!'" $) +cr +text goodfx
	else
		strength-total 5 > if
			($ Thegroup .. " moves the tree out of the road through extreme effort. 
			" .. cname .. " 'etwas in ihrem Korper explodiert" $) +cr +text 
				cchar team-attacked morale-- strength-- badfx
		else
			($ Thegroup .. " 'den Baum gar nicht ruhren kann, aber verletzt ', " .. ghim .. "'sich sehr. ', " .. gThey .. " 'entscheiden" .. g1s .. " 'das Baum mit dem Wagen aufbrechen wollen."  $) +cr +text
			car-plowthrough ' car1-fallentree-pop foreach-team-char
		then
	then
;
cyoa: car1-fallentree
	image-tree-in-road
	"'Baum im Weg" cyoa-title!
	"'Die Straße vorne hat ein großes Baumstuck liegend dahin. Es sieht so aus, als ob jemand es absichtlich geschnitten hat, um die Straße zu blockieren. Es wurde eine Gruppe von starken Leuten notwendig, um es sicher zu verschieben!" text!
	vehicle.which@ 0 = if 
		($ "'ohne Auto, ', " .. thegroup .. " 'nur uber den niedergelegten Baum klettert." $) +crtext morale++all goodfx
	then;
	($ Thegroup .. " entscheidet sich fur:" $) +crtext
		// carlogic.df again
		choice( "Einen Umweg machen" )choice: car-detour
		choice( "Durchpflugen" )choice: car1-fallentree-plow
		choice( "'Das Baum aufheben" )choice: car1-fallentree-lift
		// Add an event for having a chainsaw?
		car-shoot-check if
			choice( "'ES SCHIEßEN" )choice: car1-fallentree-shoot
		then
;	

cyoa-choice: car1-dashcode-mech
	($ cname .. " 'pruft das Fahrzeug und findet den Fehler. Es war nur eine losgelassene Benzintankleiste. Leicht zu reparieren!" $) cyoa-text!
		cmechanic- if mechanic++ then
		mechanicREV goodfx 2 4 rnd car-tune+
;
cyoa-choice: car1-dashcode-punch
	cpet? if
		($ cname .. " ' bites the hell out of the car, big time.' which means ' bisses the hell aus aus der Karre, enorm' in German." $)
	else
		($ cname .. " " .. chis .. " sound. + 1" $)
	then cyoa-text!	
	"'Es lindert etwas Stress, und das Warnlicht erlischt!" +crtext
		cchar .strength 4 < if strength++ then
		morale++ strengthREV goodfx -1 car-chassis+
;
cyoa-choice: car1-dashcode-kick
	($ cname .. " " .. chis .. " ' feet.	What a workout! The error light stays on, though.' in German becomes ' Fuess.	Was ein Workout! Das Warnleuchte bleibt jedoch an.', which means ' feet.	What a workout! The error light stays on, though.' in German." $) cyoa-text!
		cchar .fitness 4 < if fitness++ then
		morale++ fitnessREV goodfx -1 car-chassis+
;

: car1-dashcode-dtext cpet? if "'beisst" else "'schlagt" then ;

cyoa: car1-dashcode
	vehicle.which@ 0 = if 
		image-zombie-hoard-1
		"Wandern nach Kanada" cyoa-title!
		($ Thegroup .. "  fehlt der Schutz eines Autos, wenn sie sich Kanada nahern. " .. gTheyare .. "  von einer großen Horde im Freien angegriffen. Es gibt keinen Ort, um sich zu verstecken und keine Zeit, um zu kampfen." $) text! ouch--all bitefx
	then;
	image-check-engine
	"SERVICE MOTOR BALD" cyoa-title!
	($ "Der Wagen lauft gut, aber ein Fehlercode erscheint auf dem Armaturenbrett. " .. Thegroup .. " 0 " .. gthey .. " " .. g1s .. " schau mal, was los ist." $) cyoa-text!
		choice( "'Ignoriere es" )choice
		mechanicest charchoice( " 'sorgfaltig untersucht es" )choice: car1-dashcode-mech
		strongest choosechar cchar charchoice( " " .. car1-dashcode-dtext .. " 'es sehr genau zerdruckt" )choice: car1-dashcode-punch
		fittest charchoice( " 'es viel mal tritt" )choice: car1-dashcode-kick
;

} }
