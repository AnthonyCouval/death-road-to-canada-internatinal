cyoa{ regiondef{

// Witch and Cauldron

: black-cat

	// Black cat
	new-npc lt .character@ .catify
	8 lt .character@ .bodytype!
	lt .character@ .default-ai-setup
;

: .my-cat-thing .user.ival@ #thing ;

: .get-black-cat args( chara )

	black-cat

	// Store the cat's THINGID for the witch
	lt thing# <- chara .user.ival!

	// Store the witch's THINGID for the cat
//	<- chara .thing@ thing# lt <- chara .user.ival!
;

: witch-done
	($ "A bruxa gargalha e entao diz " .. thegroup .. " ir embora." $) +crtext clear-cyoa
;

: charm-witch
	most-charming if
		choosechar ($ "  A bruxa da " .. cname .. " ' uma Vassoura de Bruxa gratis.		" .. "TALVEZ VOCE POSSA SER UMA BRUXA ALGUM DIA! *GARGALHADAS*" pbold $) 
		+cr +text 1 WEAPON_WITCH trunk.weapon+ cicon
	then
;

cyoa-bridge: trade-witch-20
	($ Thegroup .. "  suborna a bruxa para se juntar ao time!	" .. "POSSO LEVAR MEU CALDEIRaO COMIGO?" pbold $) cyoa-text! basic-tone
	-20 trunk-food+
	clear-cyoa cchar to recruitee
	team-full? if
		($ "O grupo esta cheio.		Quem voce gostaria de substituir para dar lugar a bruxa?" $) +crtext
		' recruit-replace cyoa-team-choice
	else
		recruited
	then

	charm-witch
;

: trade-witch-roll 
	dup .cwits+ if .morale-- else .morale3+ then 
;

: mew-recruit recruitee .thing@ statmod{ .mew } ;

cyoa-bridge: trade-witch-10
	($ Thegroup .. " buys a BLACK CAT...
	" .. "BEM, EU ACHO QUE VOCE CONSEGUE TER UM ANIMAL DE ESTIMACaO!" pbold $) cyoa-text! basic-tone

	interactee .character@ .my-cat-thing .character@ to recruitee

	ricon

	-13 trunk-food+ ricon
	witch-done
	team-full? if
		($ "O grupo esta cheio.		Quem voce gostaria de substituir para dar lugar ao gato preto?" $) +crtext
		' recruit-replace cyoa-team-choice
	else
		recruited
	then
	charm-witch

	1 ' mew-recruit timer_add
;

cyoa-choice: trade-witch-5
	($ Thegroup .. " ' compra uma Vassoura de Bruxa!	" .. "ESTA VASSOURA FOI INFUNDIDA COM O PODER DA MAGIA NEGRA, ENTaO ELA VARRE DUAS VEZES MELHOR QUE UMA VASSOURA NORMAL!" pbold $) cyoa-text! basic-tone
	1 WEAPON_WITCH trunk.weapon+ -5 trunk-food+
	witch-done
;

cyoa-choice: trade-witch-1
	($ pname .. "  pergunta a bruxa sobre seu caldeirao.	" .. "'VOCE PODE BEBER DELE SE QUISER! E MUITO VENENOSO." pbold $) cyoa-text! basic-tone
	witch-done
;

cyoa-choice: trade-witch-coolit
	cpet? if
		($ cname .. " ' solta um grande pum contra o caldeirao da bruxa." $)
	else
		($ cname .. "  diz ao comerciante bruxo para " .. "0" pbold $) then cyoa-text!
	cool-it++
		($ "A bruxa apoderase " .. cname .. ".
		" .. "MAKE FUN OF THE WITCH'S BREW?
			GET THROWN IN THE WITCH'S STEW!!" rbold $) badfx +crtext 
		($ "A bruxa joga	 " .. chim .. "  no caldouro!" $) +crtext
		cpet? if
			($ cname .. " esta totalmente engolida num caldo venenoso! Delicioso!" $) +crtext
			cchar .sting2-
			cchar .morale2+
			cchar .vitality++
		else
			($ cname .. "  - VIDA MAXIMA REDUZIDA PARA 1" rbold $) +crtext
			cchar .skelbody
			cchar .morale2-
			cchar .dexterity++
		then
			attitudeREV witsREV trade-flee
;

cyoa: trade-rare-witch
	"A Bruxa e o Caldouro" cyoa-title!
	nearest .character@ choosechar cicon
	($ "'Voce esta perturbando essa bruxa enquanto ela faz atividades de bruxaria.	" .. "'VOCE PODERIA ME DISTURBAR UMA VEZ SO, ESTOU OCUPIADO COM MINHAS ATIVIDADES DE BRUXARIA!" pbold $) cyoa-text! basic-tone foodamt
	choice( "Fique tranquilo por agora" )choice
	most-grating if 
		charchoice( " 'digalhe PARA SE CALAR'" fcoolit )choice: trade-witch-coolit
	then
	trunk-food 5 < if
		choice( "Pergunte sobre o caldouro" )choice: trade-witch-1
	else
		trunk-food 19 > if
			choice( "Receba Bruxa para 20 comida" )choice: trade-witch-20
		then
		trunk-food 12 > if
			choice( "Gato Preto para 13 comida" )choice: trade-witch-10
		then
		trunk-food 4 > if
			choice( "'Bica de Bruxa para 5 comida" )choice: trade-witch-5
		then
	then
;

0 value kip-lab-zap

: kip-lab-foodcheck kip-lab-zap 1 < if 5 else 20 then ;

cyoa-choice: trade-rare-lab-go
	"Melhoria Genetica" cyoa-title!
	($ cname .. "  entra na maquina e e atingido por " .. "RAIOS COSMICOS" fbold .. ". " .. cHe .. " se sente energizado!" $) text!
	strength++ fitness++ cchar .fullheal
	lab-effect depths 0= if LAB-EFFECT shuffles to lab-effect then
	drawcard 
	kip-lab-foodcheck -1 * trunk-food+
	' kip-lab-zap ++

	// FX
	sfx{ growl 5000 ramp_start! 10000 ramp_end! 2 scale! 1000 d! 0.95 s! 1000 r! }
	-3 fade_to 0 1 0 fade_clr 60 fade_count!
	10 0.95 rumble-gui
;

cyoa-bridge: trade-rare-lab-pick
	solo if
		someone choosechar trade-rare-lab-go
	then;
		"COSMIC RAAAAAAAAYS" cyoa-title!
		($ "Quem deveria ser atingido por " .. "RAIOS COSMICOS?" fbold $) text!
		' trade-rare-lab-go cyoa-team-choice
;

cyoa: trade-rare-lab
	"Maquina de Ciencia do Kip" cyoa-title!
	nearest .character@ choosechar cicon
	($ "0x0000000000000000000000000000000000000000000000000000000000000001" .. "3 " pbold $) cyoa-text! basic-tone
	kip-lab-zap 1 < if
		($ "75% de desconto no primeiro zap! Isso e um negocio!" pbold $)
	else
		($ "'GRANDE TEMPO!'" fbold $)
	then +text
	+cr foodamt
	choice( "Recusar oferta generosa" )choice
	trunk-food kip-lab-foodcheck < if
		"'Infelizmente, voce nao pode pagar por essa oferta incrivel.'" +crtext
	else
		choice( "'Tudo bem!' " .. kip-lab-foodcheck .. " alimentos" )choice: trade-rare-lab-pick
	then
;

// Head Swap Doctor

0 var 3-dochead-stack

: headicon 7 * special_chars_base_id + 5 + cyoa-choice-iconid! ;

: cyoa-3-docheads
	3-dochead-stack sizes for 3-dochead-stack drawcard
	next drop
;

defer trade-rare-doc-repick

: dochead-cancel
	text!
	"Quem deve pegar essa cabeca?" +crtext
	choice( "Escolha uma cabeca diferente" )choice: trade-rare-doc-repick
;
: dochead-done text! goodfx clear-cyoa -5 trunk-food+ ;

// The Heads

cyoa-choice: doc-chicken-go
	($ cname .. " 'Pega uma nova cabeca de galinha! Ela esta infundida com todos os poderes e habilidades de uma galinha.'" $) dochead-done
		($ cname .. " 'Agora tem um CEREBRO PEQUENINO!'" rbold $) +crtext
		86 cchar .specialhead!
		0 cchar .wits! witsREV
		-1 STAT_VITALITY cchar .stat+ sting--
		dexterity++
;
cyoa-bridge: doc-chicken-go4
	"Quem deve pegar a cabeca do frango?" text!
	' doc-chicken-go cyoa-human-choice

;
cyoa-bridge: doc-chicken "'Uma galinha nao e conhecida por sua resistencia ou inteligencia, mas, entao novamente, elas podem voar muito rapido." dochead-cancel
	numhums 3 > if
		' doc-chicken-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-chicken-go4
	else
		' doc-chicken-go cyoa-human-choice
	then
;

cyoa-choice: doc-hero-go
	($ cname .. "  recebe a cabeca de um heroi!" $) dochead-done
		($ cname .. "  recebe uma atitude mais heroica!" rbold $) +crtext
		18 cchar .specialhead! -4 cchar .headoff.y!
		6 cchar .loyalty! loyaltyREV 6 cchar .attitude! attitudeREV
;
cyoa-bridge: doc-hero-go4
	"'Quem deve receber a cabeca do heroi?" text!
	' doc-hero-go cyoa-human-choice

;
cyoa-bridge: doc-hero "Mesmo flutuando em um jarro, esta cabeca de queixo quadrado parece um daqueles tipos heroicos leais e positivos." dochead-cancel
	numhums 3 > if
		' doc-hero-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-hero-go4
	else
		' doc-hero-go cyoa-human-choice
	then
;

cyoa-choice: doc-dog-go
	($ cname .. " ' recebe a cabeca de um cachorro!" $) dochead-done
		($ cname .. "  agora tem um CEREBRO PEQUENO MAS LEAL!" rbold $) +crtext
		22 cchar .specialhead! -4 cchar .headoff.y!
		0 cchar .wits! witsREV 6 cchar .loyalty! loyaltyREV
;
cyoa-bridge: doc-dog-go4
	"'Quem deve receber a cabeca do cachorro?" text!
	' doc-dog-go cyoa-human-choice

;
cyoa-bridge: doc-dog "'Caes sao os melhores amigos do homem! A cabeca de um cachorro provavelmente seria uma grande melhoria em relacao a sua cabeca traicoeira de nao-cachorro. Como bonus, a cabeca esta fumando um cachimbo pequeno." dochead-cancel
	numhums 3 > if
		' doc-dog-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-dog-go4
	else
		' doc-dog-go cyoa-human-choice
	then
;

cyoa-choice: doc-clown-go
	($ cname .. " ' agora tem a cabeca de um palhaco. Nada de bom poderia resultar disso." $) dochead-done
		29 cchar .specialhead! -2 cchar .headoff.y!
		0 cchar .loyalty!
		// Change specialtype to clown without changing body?
		cchar morale--all-except
;
cyoa-bridge: doc-clown-go4
	"'Quem deve receber a cabeca do palhaco?" text!
	' doc-clown-go cyoa-human-choice

;
cyoa-bridge: doc-clown "'O medico mostra a voce a cabeca de um palhaco flutuando em um jarro. E aterrorizante. Isso PARECE uma ma ideia." dochead-cancel
	numhums 3 > if
		' doc-clown-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-clown-go4
	else
		' doc-clown-go cyoa-human-choice
	then
;

cyoa-choice: doc-gnome-go
	($ cname .. "  agora esta se sentindo um pouco gnomo." $) dochead-done
		25 %chance if
			33
		else
			75 
		then cchar .specialhead! -1 cchar .headoff.x!
		WEAPON_POKIN cchar .weapon_default!		
;
cyoa-bridge: doc-gnome-go4
	"'Quem deve receber a cabeca do gnomo?" text!
	' doc-gnome-go cyoa-human-choice

;
cyoa-bridge: doc-gnome "'O medico oferecese para substituir a sua cabeca por um gnomo. Sim, a criatura magica da floresta.'" dochead-cancel
	numhums 3 > if
		' doc-gnome-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-gnome-go4
	else
		' doc-gnome-go cyoa-human-choice
	then
;

cyoa-choice: doc-robot-go
	($ cname .. "  is a good one. " .. che .. " agora pode falar com o carro a proxima vez que se quebre." $) dochead-done
		($ cname .. "'SEU PICO MECANICO MAXIMO TEVE UMA AUMENTACaO!" rbold $) +crtext
		50 %chance if
			39
		else
			40 
		then cchar .specialhead! -1 cchar .headoff.y!
		1 STAT_MECHANICAL cchar .bonus+ mechanicREV
;
cyoa-bridge: doc-robot-go4
	"'Quem deve receber a cabeca do robo?" text!
	' doc-robot-go cyoa-human-choice

;
cyoa-bridge: doc-robot "O medico apresenta uma cabeca de robo estilosa. Tornarse um com os maquinas!" dochead-cancel
	numhums 3 > if
		' doc-robot-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-robot-go4
	else
		' doc-robot-go cyoa-human-choice
	then
;

cyoa-choice: doc-alien-go
	($ cname .. " 'agora esta infundido COM INTELIGENCIA ALIENIGENA! Porem, em retrospecto, provavelmente o alienigena nao era o mais inteligente de sua especie." $) dochead-done
		51 cchar .specialhead! -1 cchar .headoff.y!
		6 cchar .wits! witsREV
;
cyoa-bridge: doc-alien-go4
	"'Quem deve receber a cabeca do alienigena?" text!
	' doc-alien-go cyoa-human-choice

;
cyoa-bridge: doc-alien "O medico apresenta uma cabeca de alienigena em um jarro. A VERDADE ESTA LA FORA. O alienigena parece ser uma forma de vida mais evolucionada e inteligente, mas nao tao evoluida que pudesse se salvar da preservacao num jarro pequeno." dochead-cancel
	numhums 3 > if
		' doc-alien-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-alien-go4
	else
		' doc-alien-go cyoa-human-choice
	then
;

cyoa-choice: doc-beaver-go
	($ cname .. " agora e metade de castor! Essa gloriosa simbolo do Canada melhora o espirito." $) dochead-done
		77 cchar .specialhead! 5 cchar .headoff.y! 3 cchar .headoff.x!
		fitness++ fitnessREV
		morale2+all
;
cyoa-bridge: doc-beaver-go4
	"'Quem deve receber a cabeca do castor?" text!
	' doc-beaver-go cyoa-human-choice

;
cyoa-bridge: doc-beaver "'Os castores sao conhecidos por sua capacidade para exercicios aerobicos. Eles estao sempre dancando e fazendo saltos. Eu acho que e isso que ouvi em documentarios de natureza." dochead-cancel
	numhums 3 > if
		' doc-beaver-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-beaver-go4
	else
		' doc-beaver-go cyoa-human-choice
	then
;

cyoa-choice: doc-skele-go
	($ cname .. " agora tem um cranio em vez de cabeca. Isso e " .. "INCRIVELO." fbold $) dochead-done
		($ cname .. "'SUA FORCA, FISCALIZA E TIRO AUMENTARAMSE MAXIMAMENTE!" rbold $) +crtext
		78 cchar .specialhead! -1 cchar .headoff.y!
		-1 STAT_VITALITY cchar .stat+ sting--
		1 STAT_STRENGTH cchar .bonus+ 
		1 STAT_FITNESS cchar .bonus+
		1 STAT_SHOOTING cchar .bonus+		
;
cyoa-bridge: doc-skele-go4
	"Quem deve pegar a cabeca do esqueleto?" text!
	' doc-skele-go cyoa-human-choice

;
cyoa-bridge: doc-skele "0" dochead-cancel
	numhums 3 > if
		' doc-skele-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-skele-go4
	else
		' doc-skele-go cyoa-human-choice
	then
;

cyoa-choice: doc-swole-go
	($ cname .. " 'agora tem o potencial de ficar muito forte para controlar!'" $) dochead-done
		($ cname .. "'s FORCA MAXIMA AUMENTADA!" rbold $) +crtext
		25 cchar .specialhead! -4 cchar .headoff.y!
		1 STAT_STRENGTH cchar .bonus+ strengthREV	
;
cyoa-bridge: doc-swole-go4
	"Quem deve pegar a cabeca do fisiculturista?" text!
	' doc-swole-go cyoa-human-choice

;
cyoa-bridge: doc-swole "'A lot of a bodybuilder's strength is from mental conditioning. So having a bodybuilder's head should let you reach new heights of strength!'" dochead-cancel
	numhums 3 > if
		' doc-swole-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-swole-go4
	else
		' doc-swole-go cyoa-human-choice
	then
;

cyoa-choice: doc-mallcop-go
	($ cname .. " 'Agora tem toda a resiliencia e precisao de um seguranca de shopping!'" $) dochead-done
		($ cname .. "'s TIRO MAXIMO DIMINUIDO!" rbold $) +crtext
		50 %chance if 69 else 70 then
		cchar .specialhead! 0 cchar .headoff.y!
		-2 STAT_SHOOTING cchar .bonus+ shootingREV
		vitality++ cchar .fullheal
;
cyoa-bridge: doc-mallcop-go4
	"Quem deve pegar a cabeca do seguranca do shopping?" text!
	' doc-mallcop-go cyoa-human-choice
;
cyoa-bridge: doc-mallcop "1" rbold dochead-cancel
	numhums 3 > if
		' doc-mallcop-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-mallcop-go4
	else
		' doc-mallcop-go cyoa-human-choice
	then
;

cyoa-choice: doc-doc-go
	($ cname .. " 0.5 " .. che .. " 'nao pegou a roupa de medico como parte do transplante.'" $) dochead-done
		($ cname .. "''s maximo aumentou em medica!" rbold $) +crtext
		24 cchar .specialhead! -1 cchar .headoff.y!
		0 cchar .loyalty!
		1 STAT_MEDICAL cchar .bonus+ medicalREV
		78 victim .specialhead! -1 victim .headoff.y!
;
cyoa-bridge: doc-doc-go4
	"'Quem deve receber a cabeca do loucohomem?" text!
	' doc-doc-go cyoa-human-choice
;
cyoa-bridge: doc-doc "'O medico aponta para a cabeca. Ele afirma que e a segunda melhor deles que tem em estoque." dochead-cancel
	numhums 3 > if
		' doc-doc-go 2 #cyoa-human-choice
		choice( "Escolha alguem outro" )choice: doc-doc-go4
	else
		' doc-doc-go cyoa-human-choice
	then
;

// End Heads

deck-new
	"Preguica" choice-card: doc-chicken
	"'Cabeca do Heroi" choice-card: doc-hero
	"'Cabeca de Cao" choice-card: doc-dog
	"Palhaco" choice-card: doc-clown
	"Zona do Gnomo" choice-card: doc-gnome
	"Cabeca de Robo" choice-card: doc-robot
	"Extraterrestre" choice-card: doc-alien
	"Ratinhodepau pequeno" choice-card: doc-beaver
	"Uma calavera" choice-card: doc-skele
	"Bodybuilder" choice-card: doc-swole
	"Seguranca de Shopping" choice-card: doc-mallcop
	"Medico Louco" choice-card: doc-doc
shuffles value dochead-pick-stack-base // Shuffle before-hand, and just pick the top 3

: draw-3-dochead 3 stack sizes for
		dochead-pick-stack-base i picks nip shove
	next
	to 3-dochead-stack
;

: pick-3-docheads
	choice( "Mantenha a cabeca velha" )choice
	draw-3-dochead
	cyoa-3-docheads
;

cyoa-bridge: trade-rare-doc-pick
	($ "'Otimo! Aqui esta o que tenho pronto para ir.	Me diga em qual cabeca voce esta interessado! So tenho tempo para um transplante. Estou indo " pbold .. "GOLFE" rbold .. " ' depois disso porque sou um " pbold .. "MEDICO." rbold $) text!
		"Uma Cabeca Nova em Folha" cyoa-title!
		
		pick-3-docheads
;

' trade-rare-doc-pick to trade-rare-doc-repick

cyoa: trade-rare-doc
	"Medico Reputavel" cyoa-title!
	nearest .character@ choosechar cicon
	cchar to victim
	($ "'E um medico. Um " .. "REAL" rbold .. " ' medico, ele esta vestindo uma roupa de medico e tudo mais! 	" .. "Let's cut right to the chase... I can replace your head with a better head. " pbold $) cyoa-text! basic-tone
		numhums 1 < if
			($ "Wait a second... get out of here! I'm not a vet!" rbold $) +text
		else
			($ "'Nao estou louco! Mas estou ficando louco, entao ha um desconto bem grande. Apenas 5 alimentos!" rbold $) +text +cr foodamt
		then
	
	trunk-food 5 < numhums 1 < or if
		"'Parece que voce esta preso com sua cabeca velha." +crtext
		choice( "Deixe em grande vergonha" )choice
	else
		choice( "De jeito nenhum, Jose" )choice
		choice( "'Mostreme o que voce tem!'" )choice: trade-rare-doc-pick
	then
;

// Barkley 2 Wizard

0 value wiz-dailyfortune

: diewiz pbold .. " morra uma morte terrivel!" fbold ;

0 stack
	"Encounter a mysterious clown." shove
	"Voce vai encontrar uma grande reserva de comida no futuro perto de voce, apos o qual voce fara um erro e" shove
	"Die." shove
	"You won't make it to Canada, but you will make it to the United States." shove
	"The one in need." shove
	"1" shove
	"Be dead." shove
	"0." shove
	"1/2 of your team." rbold shove
	"4 + 22 = 26" shove
	"Will be better for it." shove
	"The player get replaced by a vampire." shove
	"Only find the Crypt of Decay!" shove
	"It will." shove
	"Die." shove
	"'As profecias falam de voce! Elas afirmam que voce vai'" shove
	"'Voce vai conseguir chegar ao Canada! Esta previsto! Brincadeira, voce vai" shove
value wizard-fortune-base
wizard-fortune-base shuffles var wizard-fortune

cyoa-choice: trade-rare-wiz-fortune
	"SUA SORTE" cyoa-title!
	($ wizard-fortune pops nip diewiz $) text!
	-1 trunk-food+
	' wiz-dailyfortune ++
	morale--all
	someone choosechar
	($ cname .. "  resolve desafiar o destino!" $) +crtext
		($ cname .. "  - SAUDE E SORTE MAXIMAS AUMENTADAS!" rbold $) +crtext
		vitality++
		777777777 cchar .seed!
;

cyoa-choice: trade-rare-wiz-tarot-go
	($ "A leitura de taro revela verdades pessoais surpreendentes sobre " .. cname .. "." $) text!
	-5 trunk-food+
	cchar .showitall
;

cyoa-bridge: trade-rare-wiz-tarot
	solo if
		someone choosechar trade-rare-wiz-tarot-go
	then;
	"Quem deveria fazer a leitura de taro? Isso revelara muito sobre eles." text!
	' trade-rare-wiz-tarot-go cyoa-team-choice
;

cyoa-bridge: trade-rare-wiz-recruit
	($ Thegroup .. "  contrata o mago!	" .. "As profecias ainda dizem que voce" diewiz $) cyoa-text! basic-tone
	-20 trunk-food+
	clear-cyoa cchar to recruitee witsREV
	team-full? if
		($ "O grupo esta cheio.		Quem voce gostaria de substituir para dar lugar ao mago?" $) +crtext
		' recruit-replace cyoa-team-choice
	else
		recruited
	then	

;

cyoa: trade-rare-wiz
	"O Mago" cyoa-title!
	nearest .character@ choosechar cicon
	($ "Esse cara parece que pode ser um mago.	" .. "'Sou um mago! Posso prever seu futuro ou revelar verdades ocultas com o poder do taro!" pbold $) cyoa-text! basic-tone
	+text +cr foodamt
	trunk-food 1 < if
		($ "'Sorte gratis: Voce vai passar fome! Entao voce vai" diewiz $) +crtext
		choice( "Legal, uma fortuna gratis!" )choice
	else
		choice( "'Nao de nada a este FRAUDE'" )choice
		wiz-dailyfortune 1 < if
			choice( "1 fortune" )choice: trade-rare-wiz-fortune
		then
	then
	trunk-food 4 > if
		choice( "1 tarot reading" )choice: trade-rare-wiz-tarot
	then
	trunk-food 19 > if
		choice( "1 wizard" )choice: trade-rare-wiz-recruit
	then
;

// Book seller

0 value rarebook-cheap
0 value rarebook-dog
0 value rarebook-map

: trade-rare-book-cheap
	' rarebook-cheap ++
	cyoa{ bookmag-get2 }
	-5 trunk-food+
;

cyoa-choice: trade-rare-book-dog
	' rarebook-dog ++
	($ Thegroup .. "  le " .. "O GUIA DEFINITIVO DE CACHORROS" pbold .. ". Essa grande livro tem cada pagina cheia de conhecimento sobre cachorros." $) cyoa-text! goodfx
	($ gHe .. " adquire a perfeica: " .. "AMIGO DE CACHORRO!" fbold $) +crtext
	statmod{ ' .dogpal foreach-human-char }
	-15 trunk-food+
;

cyoa-choice: trade-rare-book-map
	' rarebook-map ++
	($ Thegroup .. " compra " .. "'ATLAS DE CARTEIRA DE P.L. PLARKEN" pbold .. ". Ele contem mapas de cada rua ate o Canada. Isso sera extremamente valioso." $) cyoa-text! goodfx
	($ gHe .. " adquire a perfeica: " .. "EXPLORADOR!" fbold $) +crtext
	statmod{ ' .explorer foreach-human-char }
	-15 trunk-food+
;

: trade-rare-book-draw
	choice( bookmagtitle .. " 1 food" )choice: trade-rare-book-cheap
;

cyoa: trade-rare-book
	"Livros Raros" cyoa-title!
	nearest .character@ choosechar cicon
	($ "'Este comerciante de livros raros fala sobre como ela vende livros valiosos.	" .. "'Por favor, nao mexam com os livros exibidos! Eles sao falsos, coloqueios la para enganar roubadores de livros." pbold $) cyoa-text! basic-tone
	+text +cr foodamt
	trunk-food 5 < if
		($ "'Voce nao tem suficiente comida para comprar nenhum dos bons livros!" $) +crtext
		choice( "Queria esses livros" )choice
	else
		choice( "Livros sao para nerds" )choice
		trunk-food 4 > rarebook-cheap 1 < and if
			trade-rare-book-draw
		then
		trunk-food 14 > if
			rarebook-dog 1 < if
				choice( "O GUIA DEFINITIVO DE CACHORROS" pbold .. " 1 food" )choice: trade-rare-book-dog
			then
			rarebook-map 1 < if
				choice( "'ATLAS DE CARTEIRA DE P.L. PLARKEN" pbold .. " 1 food" )choice: trade-rare-book-map
			then
		then
	then
;

// COLD STEEL

cyoa-choice: trade-rare-coldsteel-buy
	($ Thegroup .. " 	Comprara a espada gigante." .. "Voce nao ira se arrepender da compra de uma espada Cold Steel!" pbold $) cyoa-text! basic-tone
	1 WEAPON_ZWEI trunk.weapon+ -45 trunk-food+
	clear-cyoa goodfx
;

cyoa-bridge: trade-rare-coldsteel-demo
	clear-cyoa cchar to recruitee goodfx 
	($ "'Ele pensou que voce nunca perguntaria.	" .. Thegroup .. "  temporariamente recruta " .. rname .. "  para que ele possa fornecer uma demonstracao ao vivo.	" .. "'Voce ficara surpreso com o poder da Espada Grande de Aco Frio!" pbold $) cyoa-text! basic-tone
	team-full? if
		($ "O grupo esta cheio.		Quem voce gostaria de substituir para abrir espaco?" $) +crtext
		recruit-replace?
	else
		recruited
	then	

;

cyoa-bridge: trade-rare-coldsteel-demo-fullgroup
	($ "Seu grupo esta cheio. Se voce pedir a demonstracao, " .. "voce tera que escolher um membro da equipe para expulsar do grupo! Voce entao ganhara um recruta temporario para o proximo local." rbold $) cyoa-text!
	choice( "Cancelar demonstracao" )choice
	choice( "Livrarse de alguem para demonstracao" )choice: trade-rare-coldsteel-demo
;

cyoa: trade-rare-coldsteel
	"Facas de aco frio" cyoa-title!
	nearest .character@ choosechar cicon
	($ "'Estou vendendo a melhor arma que voce ja viu, antes ou depois do apocalipse zumbi.		E a Espada Grande de Aco Frio das Facas de Aco Frio! Apenas 45 alimentos!" pbold $) cyoa-text! basic-tone
	+text +cr foodamt
	choice( "'Nao sou bom o suficiente para esta espada " .. DX )choice
	trunk-food 44 > if
		choice( "Compre a Espada Grande - 45 alimentos" )choice: trade-rare-coldsteel-buy
	then
	team-full? if
		choice( "Peca uma demonstracao" )choice: trade-rare-coldsteel-demo-fullgroup
	else
		choice( "Peca uma demonstracao" )choice: trade-rare-coldsteel-demo
	then

;

// SKELETAL KNIGHT

0 value skelknight-bomb
0 value skelknight-hammer
0 value skelknight-gladius

cyoa-bridge: trade-skelknight-25
	($ Thegroup .. "  compra o " .. "0x00000000" fbold .. "'Eis o incrivel poder destrutivo do meu martelo de cranio sobressalente.'" pbold $) cyoa-text! basic-tone
	1 WEAPON_SKULLMACE trunk.weapon+ -25 trunk-food+ ' skelknight-hammer ++ goodfx
;

cyoa-bridge: trade-skelknight-15
	($ Thegroup .. " 	Comprando a espada curta do esqueleto!" .. "'Esta gladius e uma grande espada, mas eu nunca gostei dela porque nao tem tema de caveira.'" pbold $) cyoa-text! basic-tone
	1 WEAPON_GLADIUS trunk.weapon+ -15 trunk-food+ ' skelknight-gladius ++
;

cyoa-choice: trade-skelknight-5
	($ Thegroup .. " 	Comprando cinco Bomb Skulls!" .. "Estes cranios estao encantados com devastador PODER DE CRANIO!" pbold $) cyoa-text! basic-tone
	5 WEAPON_BOMBSKULL trunk.weapon+ -5 trunk-food+ ' skelknight-bomb ++
;

cyoa-choice: trade-skelknight-1
	($ pname .. " 	pergunta ao esqueleto por que ele precisa de comida." .. "Porque eu o consigo comer, tu estas rindo dele!" pbold $) cyoa-text!
	pchar .morale-- badfx
;

cyoa-choice: trade-skelknight-coolit
	cpet? if
		($ cname .. " 'deixa que o cavaleiro esqueletico pise sobre a pilha de seus ossos." $)
	else
		($ cname .. " diz ao cavaleiro esqueletico para " .. "'CALMA AI.'" pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "Seu cranio faz ruidos rapidos de quebra. Rir?		" .. "'Nunca ouvi uma brincadeira assim ha mil anos!" pbold $) goodfx +crtext
			WEAPON_GLADIUS recruitee .weaponb!
			1 recruitee .weapon_nodropb!
			WEAPON_BOMBSKULL recruitee .weaponc!
			3 recruitee .stackedc!
		cooled-it 
		team-full? if
			($ "Quer se juntar. Quem gostaria de substituir para fazer lugar para quem? " .. rname .. "?" $) +crtext
			' recruit-replace cyoa-team-choice
		else
			recruited
		then clear-cyoa recruitee .strengthREV recruitee .fitnessREV
	else cool-it++
		($ "VOCE E AMAZING! VOCE E AMAZING!!" pbold .. "amenaca enviar " .. thegroup .. " para o " .. "ZONA OSSEA" fbold $) +crtext badfx trade-flee
	then attitudeREV witsREV

;

cyoa: trade-rare-skelknight
	"Cavaleiro Esqueletico" cyoa-title!
	nearest .character@ choosechar cchar to recruitee ricon
	($ "'E um esqueleto animado, vestido de armadura." .. "'Eu tambem odeio zumbis. Eles sao revestidos de pele e carne. E nojento!'" pbold $) cyoa-text!
	skelknight-bomb 1 < skelknight-hammer 1 < skelknight-gladius 1 < or or if 
		"'Vou venderte algumas das minhas armas sobressalentes, se te agradar.'"
	else
		"D"
	then pbold +crtext
	basic-tone foodamt
	choice( "Nao obrigado." )choice
	most-grating if 
		charchoice( "  diz a ele para RELAXAR" fcoolit )choice: trade-skelknight-coolit
	then
	trunk-food 5 < if
		choice( "Pergunte por que ele precisa de comida" )choice: trade-skelknight-1
	else
		trunk-food 24 > skelknight-hammer 1 < and if
			choice( "1 Skull Hammer" )choice: trade-skelknight-25
		then
		trunk-food 14 > skelknight-gladius 1 < and if
			choice( "1 gladius" )choice: trade-skelknight-15
		then
		trunk-food 4 > skelknight-bomb 1 < and if
			choice( "5 Bomb Skulls para 5 comidas" )choice: trade-skelknight-5
		then
	then
;

// Sleepy Trader

0 value sleepy-ate

: sleepy-ate-food sleepy-ate 1 < if	1 else sleepy-ate 2 < if 2 else 4 then then ;

cyoa-choice: trade-rare-sleep-feed
	($ pname .. " 'enfiar comida na boca da pessoa que esta dormindo'" $) text!
	sleepy-ate-food -1 * trunk-food+
	' sleepy-ate ++
	sleepy-ate 2 > if
		($ pname .. " comeca a entender " .. vhis .. " " .. "DORMINDOCO PROFUNDO" rbold .. "  habilidade!" $) +crtext 
		statmod{ pchar .soundsleep }
		($ "Alguem percebe que " .. pname .. " ' tem enfiado grandes quantidades de comida na boca de uma pessoa adormecida." $) +crtext
		"EI! VOCE SAI DESSE ACAMPAMENTO AGORA MESMO!" rbold +crtext
		($ Thegroup .. "  foge, fugindo do acampamento dos comerciantes!" $) +crtext
		badfx quitmission		
	else
		($ vHe .. "  fala bobagem em " .. vhis .. "  dormir. Ou pelo menos soa como bobagem, a principio. " .. pname .. " ' pensa sobre isso e percebe que e um conhecimento valioso." $) +crtext goodfx
		pchar rewardevent-random
	then
;

cyoa: trade-rare-sleep
	"Comerciante adormecido" cyoa-title! iicon
	interactee .character@ to victim
	"Esta pessoa esta dormindo. Como ela consegue dormir tao profundamente no meio do apocalipse zumbi? Bem no chao, nada menos." text!
	($ vHe .. "  deve ter tudo planejado." $) +crtext
	sleepy-ate 1 > if
		($ RED .. "AVISO: Enfiar mais 4 alimentos em " .. vhis .. "  boca vai te causar problemas, mas tambem vai dar " .. pname .. " uma nova habilidade!" rbold $) +crtext
	else
		
	then
		choice( "Deixalhe " .. vhim .. "  sozinho" )choice
		trunk-food sleepy-ate-food 1 - > if
			pchar charchoice( "alimentar " .. vhim .. " " .. sleepy-ate-food  .. " alimentos" )choice: trade-rare-sleep-feed
		then
;

// Chicken

0 value chicken-egg

cyoa-choice: trade-chicken-6
	($ pname .. " compra uma docena de ovos. Zumbis fujam!	" .. "BAKKAAAAAAAAAAAAW!" fbold $) cyoa-text!
	goodfx 6 weapondef{ WEAPON_EGG } trunk.weapon+ -6 trunk-food+ 6 ' chicken-egg +!
;

cyoa-choice: trade-chicken-3
	($ pname .. " compra alguns ovos, aumentando a arsenal de ovos.	" .. "BAKAAAAW!" rbold $) cyoa-text!
	goodfx 3 weapondef{ WEAPON_EGG } trunk.weapon+ -3 trunk-food+ 3 ' chicken-egg +!
;

cyoa-choice: trade-chicken-1
	($ pname .. " compra um ovo precioso.	" .. "BAUAU!" pbold $) cyoa-text!
	goodfx 1 weapondef{ WEAPON_EGG } trunk.weapon+ -1 trunk-food+ 1 ' chicken-egg +!
;

cyoa: trade-rare-chicken
	"PintadodeGalinhaLivre" cyoa-title!
	nearest .character@ choosechar cchar to recruitee ricon
	($ "Este pinto de galinha tem abertado um negocio para si mesmo!	" .. "BAKAW!" pbold $) cyoa-text!
	chicken-egg 11 > if
		"O pinto de galinha ja acabou de ovos!" +crtext clear-cyoa
	then;
	basic-tone +cr foodamt
	trunk-food 1 < if
		"O pinto de galinha te da um ovo gratis." +crtext
		goodfx 1 weapondef{ WEAPON_EGG }  trunk.weapon+ clear-cyoa
	else
		"Vende ovos muito frescos! 1 ovo por 1 alimento." +crtext
		choice( "Nao obrigado." )choice
		trunk-food 5 > chicken-egg 7 < and if
			choice( "Compre 6 ovos" )choice: trade-chicken-6
		then
		trunk-food 2 > chicken-egg 10 < and if
			choice( "Compre 3 ovos" )choice: trade-chicken-3
		then
		chicken-egg 12 < if
			choice( "Compre 1 ovo" )choice: trade-chicken-1
		then
	then
;

// Nerd

0 value nerd-green
0 value nerd-red

cyoa-choice: trade-nerd-red
	($ pname .. " 	Comprar uma torre vermelha. A torre suprema. Joguea e veja os zumbis serem abatidos." .. "No more zombie problems!
	Until the turret runs out of ammo..." pbold $) cyoa-text!
	goodfx 1 WEAPON_TURRETRED trunk.weapon+ -12 trunk-food+ ' nerd-red ++
;

cyoa-choice: trade-nerd-green
	($ pname .. " compra uma torre verde. Joguea no chao e veja ela ir." .. "Essas podem ajudar muito em uma luta!" pbold $) cyoa-text!
	goodfx 1 WEAPON_TURRETGREEN trunk.weapon+ -6 trunk-food+ ' nerd-green ++
;

cyoa: trade-rare-nerd
	"Que Nerd" cyoa-title!
	nearest .character@ choosechar cchar to recruitee ricon
	($ "	Esse nerd esta cercado por aparelhos de nerd que apitam." .. "'Nao sou nerd! Tenho muitos interesses! Vou a bares esportivos!" pbold $) cyoa-text!
	nerd-green 1 > nerd-red 0 > and if
		"O nerd acabou o estoque!" +crtext clear-cyoa
	then;
	basic-tone +cr foodamt
	trunk-food 6 < if
		"'Voce nao pode comprar nada. O nerd te da uma pukeyball como premio de consolacao." +crtext
		goodfx 1 WEAPON_PUKEYBALL trunk.weapon+ clear-cyoa
	else
		choice( "Nao obrigado." )choice
		trunk-food 5 > nerd-green 2 < and if
			choice( "Compre Green Turret - 6 comidas" )choice: trade-nerd-green
		then
		trunk-food 11 > nerd-red 1 < and if
			choice( "Compre Red Turret - 12 comidas" )choice: trade-nerd-red
		then
	then
;

} } 
