cyoa{ regiondef{

// if you have to do two things in a foreach-team-char word, use dup between each
// The above was wrong, I had to remove the second dup from everything
: trade-shoot-group! dup .shootingREV .shooting++ ;
: trade-strength-group! dup .strengthREV .strength++ ;
: trade-fitness-group! dup .fitnessREV .fitness++ ;
: trade-medical-group! dup .medicalREV .medical++ ;
: trade-mechanic-group! dup .mechanicREV .mechanic++ ;

: trade-train-amt numhums 3 * 3 + ; 
: trade-train-pay? trunk-food trade-train-amt 1 - > notsolo notsolohuman and and ;
: trade-train-pay trade-train-amt -1 * trunk-food+ ;

0 value camp-charm

// NOTE: Do innkeeper here too

// Shooting

cyoa-choice: trade-shoot-charm 
	charmroll if
		($ cname .. " obtient une formation gratuite avec des armes a feu ! " .. cHe .. " ressent deja une plus grande stabilite dans la tir." $) cyoa-text! 
		cchar .shooting@ 5 > if 
			($ "Cela n'a vraiment pas aide " .. chis .. " tir, mais c'etait gratuit !" $) +crtext
		then 
		shootingREV shooting++ ' camp-charm ++ goodfx
	else
		($ cname .. " il n'a rien laisse tomber par accident, ca sonne plutot sinistre. . ." .. gHe .. " il est demande a vous de quitter." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-shoot-train
	cchar .shooting@ 6 < if
		($ cname .. " apprends quelques nouveaux tours avec les armes a feu ! les zombies, preparez-vous." $) goodfx
	else
		($ cname .. " n'ai appris rien reellement nouveau. " .. cHe .. " avait deja appris ces astuces. " .. chis .. " propres a moi." $) badfx
	then cyoa-text!
	-6 trunk-food+
	shootingREV shooting++
	clear-cyoa
;

cyoa-choice: trade-shoot-group
	($ "L'ensemble du groupe recoit une formation a l'utilisation d'armes a feu !" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-shoot-group! foreach-human-char
	clear-cyoa
;

cyoa: trade-shoot-give
	solohuman if
		choosehuman trade-shoot-train
	then;
	"Quelqu'un devrait recevoir une formation a la manipulation d'armes a feu ?" cyoa-text!
	' trade-shoot-train cyoa-human-choice
;

cyoa-choice: trade-shoot-coolit
	cpet? if
		($ cname .. " il fart tres fort devant l'entraineur d'armes a feu, puis roule autour." $)
	else
		($ cname .. " tours de phrases, locutions colorees ou expressions idiom " .. "DIRE PAS LE FAIRE DE L'ARROSAGE" pbold .. " pour l'entraineur d'armes :" $) 
	then cyoa-text!
	cool-it-7 if
		($ "Une merveille se produit : elle decide de ne pas tirer !" .. "You seem like you need all the help you can get..." pbold .. "elle enseigne ses trucs d'armes secretes a " .. cname .. "!" $) +crtext goodfx
		3 for shooting++ next cooled-it clear-cyoa
	else cool-it++
		($ "Il est trop excite" .. "cela semble ainsi." pbold .. "elle avertit le reste du camp que ... " .. cname .. " c'est un gros organe. " .. ghe .. " il est contraint de quitter." $) +crtext badfx quitmission
	then shootingREV
;

cyoa: trade-shoot
	"Enseignant d'armes a feu" cyoa-title!
	($ "Elle affirme avoir entraine auparavant d'autres a la tire sportive... elle vend des conseils pour garder votre visee stable et des trucs de tirs sur plusieurs cibles. " .. "Les zombies sont des cibles lentes a abattre. c'est vraiment facile !" pbold $) cyoa-text! basic-tone foodamt
	choice( "Laissez-le pour le moment" )choice
	trunk-food 6 < if  
		($ "Cette quantite de nourriture ne suffit pas pour acheter une formation." $) +cr +text
	else
		choice( ": conduite agressive en terrain difficile !" )choice: trade-shoot-give
		trade-train-pay? if
			choice( "Donner " .. trade-train-amt .. " vous devez vous entrainer et mettre du muscle !" )choice: trade-shoot-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " utilise le charme." )choice: trade-shoot-charm
		then
		most-grating if 
			charchoice( ": DIRE PAS L'ARROSAGE" fcoolit )choice: trade-shoot-coolit
		then
;

// Strength - Made this one a little different for Jon's request
// Can adjust it to cut out different things if you have all options available, currently you lose the option to just "Fuir a l'aller simplement" in that case.

cyoa-choice: trade-strength-pose 
	cchar .strength 6 > if
		($ cname .. " se relache une seule fois, en employant seulement la moitie de ses efforts. mais le concours est deja decide...." .. "IMPOSSIBLE ! C'EST IMPOSSIBLE !" fbold .. " entraineur de force sifflote etrangement a une tonalite haute... ." .. "ES-TU 'LE GROS PROMISE' ?" fbold .. " et puis il se transforme en pierre et, quelques instants plus tard, se brise en un million de fragments." $) cyoa-text! goodfx clear-cyoa deleteme
		morale2+
	then;
	strengthroll if
		($ cname .. " gagne le concours de pose !" $) cyoa-text! goodfx
		cpet? if
			"Gagner une competition de flexion en tant qu'animal etait tres difficile." +crtext
		then
		strengthREV strength++ morale++
	else
		($ cname .. " perd la pose. . ." .. cHe .. " ressent " .. "IL EST GRAND DOMMAGE." rbold $) cyoa-text! badfx
		morale2-
	then clear-cyoa
;

cyoa-choice: trade-strength-charm 
	charmroll if
		($ cname .. " obtien des entrainements gratuits de force ! " .. cHe .. " already ressent une forte sensation de 'pump', comme disaient les bodybuilders avant d'etre tous balayes." $) cyoa-text!
		cchar .strength@ 5 > if 
		($ "Cela n'a reellement ameliore " .. chis .. " gratuitement, j'avais une force considerable !" $) +crtext
		then
		strengthREV strength++ ' camp-charm ++ goodfx
		
	else
		($ cname .. " il n'a rien laisse tomber par accident, ca sonne plutot sinistre. . ." .. gHe .. " il est demande a vous de quitter." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-strength-train
	cchar .strength@ 6 < if
		($ cname .. " il se met tous en flamme grace a son regime d'entrainement de force !" $) goodfx
	else
		($ cname .. " n'etais pas convaincu par ce petit travail d'exercice. " .. cHe .. " il faut trouver une meilleure routine !" $) badfx
	then cyoa-text!
	-6 trunk-food+
	strengthREV strength++ clear-cyoa
;

cyoa-choice: trade-strength-group
	($ "Toute le groupe se renforce par l'entrainement de force !" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-strength-group! foreach-human-char clear-cyoa
;

cyoa: trade-strength-give
	solohuman if
		choosehuman trade-strength-train
	then;
	"Celui qui veut developper sa force a un niveau eleve doit effectuer cette intense routine de travail." cyoa-text!
	' trade-strength-train cyoa-human-choice
;

cyoa-choice: trade-strength-coolit
	cpet? if
		($ cname .. " il fart tres fort devant l'entraineur de force." $)
	else
		($ cname .. " tours de phrases, locutions colorees ou expressions idiom " .. "DIRE PAS LE FAIRE DE L'ARROSAGE" pbold .. " a l'entraineur de force :" $) 
	then cyoa-text!
	cool-it-7 if
		($ "OUI, C'EST L'ESPRIT QUI TE FERA ATTEINDRE LE SOMMET EN BODYBUILDING ! NOUS ALLONS REINVENTER LE SPORT ! OUI !" fbold .. "il prend " .. cname .. " avez le privilege d'avoir votre meilleur etudiant, pour grandir a un rythme devastateur pour l'esprit !" $) +crtext  goodfx 3 for strength++ next cooled-it clear-cyoa
	else cool-it++
		($ "Cela ne lui va pas a l'aise." .. "quitte ici toi, grosse tete d'egout ! tu n'as pas le droit a etre si gros !" fbold .. "il continue a hurler jusqu'a ce que " .. thegroup .. " quittez le camp commercial." $) +crtext badfx quitmission
	then strengthREV
;

cyoa: trade-strength
	"Entraineur de force" cyoa-title!
	($ "Un homme age et en forme, portant des chaussures et un maillot de sport gris, hurle quelque chose. " .. "CONSTRUIRE DE LA MASSE ET DE LA GROSSEUR" fbold .. " avec une " .. "REGIME INTENSE DE FORCE!" fbold .. "il flotte vers quelques objets lourds qui se trouvent autour." $) cyoa-text! basic-tone foodamt
	choice( "Laissez-le pour le moment" )choice
	trunk-food 6 < if
		($ "Desole, cela ne suffit pas de nourriture pour devenir enorme." $) +cr +text
	else
		choice( ": conduite agressive en terrain difficile !" )choice: trade-strength-give
		trade-train-pay? if
			choice( "Donner " .. trade-train-amt .. " vous devez vous entrainer et mettre du muscle !" )choice: trade-strength-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " utilise le charme." )choice: trade-strength-charm
		then
		most-grating if 
			charchoice( ": DIRE PAS L'ARROSAGE" fcoolit )choice: trade-strength-coolit
		then
		strongest .strength 3 > if
			strongest charchoice( " annonce une pose defaite !" )choice: trade-strength-pose
		then
;

// Fitness

cyoa-choice: trade-fitness-charm 
	charmroll if
		($ cname .. " obtien gratuitement une formation en sante physique ! " .. cHe .. " des sueurs a cause de l'effort intense !" $) cyoa-text! 
		cchar .fitness@ 5 > if 
			($ "Cela n'a reellement ameliore " .. chis .. " gratuitement, j'ai fait de la fitness." $) +crtext
		then
		goodfx fitnessREV fitness++ ' camp-charm ++
	else
		($ cname .. " il n'a rien laisse tomber par accident, ca sonne plutot sinistre. . ." .. gHe .. " il est demande a vous de quitter." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-fitness-train
	cchar .fitness@ 6 < if
		($ cname .. " travaille a une sueur ruisselle de son routine sportive !" $) goodfx
	else
		($ cname .. " pas meme rougi de sueur ! l'instructrice sportive est confuse, elle s'est elle aussi un peu fatiguee." $) badfx
	then cyoa-text!
	-6 trunk-food+
	fitnessREV fitness++ clear-cyoa
;

cyoa-choice: trade-fitness-group
	($ "Toute le groupe recoit une formation de fitness !" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-fitness-group! foreach-human-char clear-cyoa
;

cyoa: trade-fitness-give
	solohuman if
		choosehuman trade-fitness-train
	then;
	"Qui veut des exercices intenses a titre de fitness ?" cyoa-text!
	' trade-fitness-train cyoa-human-choice
;

cyoa-choice: trade-fitness-coolit
	cpet? if
		($ cname .. " fait des flatulences a un ton eleve envers l'entraineur sportif." $)
	else
		($ cname .. " tours de phrases, locutions colorees ou expressions idiom " .. "DIRE PAS LE FAIRE DE L'ARROSAGE" pbold .. " pour l'instributeur de fitness." $) 
	then cyoa-text!
	cool-it-7 if
		($ "C'est ce que j'aime entendre ! tu es pret" pbold .. "il est vraisemblable qu'elle a simplement entendu " .. cname .. " c'est une serie incroyable et a la pointe de la calisthetique qui suit." $) +crtext goodfx 3 for fitness++ next cooled-it clear-cyoa
	else cool-it++
		($ "Sa reaction est principalement deception." .. "amusez-vous a etre devores par des zombies." pbold .. "elle court en arriere jusqu'a ce qu'elle disparaisse de vue. " .. Thegroup .. " est si gene par cela qu'il ne sait pas quoi dire. " .. gtheyare .. " devoir quitter le camp." $) +crtext badfx quitmission
	then fitnessREV
;

cyoa: trade-fitness
	"Instructeur d'entrainement physique" cyoa-title!
	($ "Cette femme est equipee de bandelettes suintantes, de couvertures des membres et de vetements sportifs gaffes... ." .. "Dans ce monde rempli de zombis, seulement les aptes survivront ! je peux vous aider a devenir aptes rapidement !" pbold .. "elle a couru debout pendant toute cette periode." $) cyoa-text! basic-tone foodamt
	choice( "Laissez-le pour le moment" )choice
	trunk-food 6 < if
		($ "Desole, cela ne represente pas assez de nourriture pour le fitness." $) +cr +text
	else
		choice( ": conduite agressive en terrain difficile !" )choice: trade-fitness-give
		trade-train-pay? if
			choice( "Donner " .. trade-train-amt .. " vous devez vous entrainer et mettre du muscle !" )choice:  trade-fitness-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " utilise le charme." )choice: trade-fitness-charm
		then
		most-grating if 
			charchoice( ": DIRE PAS L'ARROSAGE" fcoolit )choice: trade-fitness-coolit
		then
;

// Medical

cyoa-choice: trade-medical-charm 
	charmroll if
		($ cname .. " obtienez une formation medicale gratuite !" $) cyoa-text! 
		cchar .medical@ 5 > if 
			($ "Cela n'a reellement ameliore " .. chis .. " gratuitement, des connaissances medicales !" $) +crtext
		then		
		goodfx medicalREV medical++ ' camp-charm ++
	else
		($ cname .. " c'est mal tourne, il parait simplement etrange, meme en considerant les normes de l'ecole medicale facile : campus du camion d'execution bizarre ... ." .. gHe .. " il est demande a vous de quitter." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-medical-train
	cchar .medical@ 6 < if
		($ cname .. " apprend des nouvelles choses a propos de soins medicaux d'urgence aupres de l'homme souille instruite." $) goodfx
	else
		($ "Bien que le professeur sales fut un grand enseignant, " .. cname .. " je n'ai appris rien de nouveau." $) badfx
	then cyoa-text!
	-6 trunk-food+
	medicalREV medical++ clear-cyoa
;

cyoa-choice: trade-medical-group
	($ "Toute le groupe recoit une formation medicale !" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-medical-group! foreach-human-char clear-cyoa
;

cyoa: trade-medical-give
	solohuman if
		choosehuman trade-medical-train
	then;
	"Quelqu'un devrait recevoir une formation medicale ?" cyoa-text!
	' trade-medical-train cyoa-human-choice
;

cyoa-choice: trade-medical-coolit
	cpet? if
		($ cname .. " dis, ne l'arrose pas !" $)
	else
		($ cname .. " tours de phrases, locutions colorees ou expressions idiom " .. "DIRE PAS LE FAIRE DE L'ARROSAGE" pbold .. " a l'homme en overall :" $) 
	then cyoa-text!
	cool-it-7 if
		($ "Il sourit avec sagesse. peut-etre a-t-il mal entendu. " .. chim .. "il enseigne des techniques medicales de survie aux zombies incroyables, dont on n'en a jamais vues avant." $) +crtext goodfx 3 for medical++ next cooled-it clear-cyoa
	else cool-it++
		($ "*YOU* DON'T SAY IT OR SPRAY IT! AAAAAAAARGH!" rbold .. "il est en colere ! " .. thegroup .. " il est oblige de quitter le camp." $) +crtext badfx quitmission
	then medicalREV
;

cyoa: trade-medicalt
	"Ecole medicale facile" cyoa-title!
	($ Thegroup .. " decouvre un camionnette troublante et sales. elle porte une signaletique qui dit : " .. "ECOLE MEDICALE FACILE" rbold .. " sur la porte arriere penche a l'ecart... . 	interieurement se trouve un homme derangeant et sales en surgelas. " .. "QUELQU'UN VEUT APPRENDRE A TRAVERS L'OPERATION ?" pbold $) cyoa-text! basic-tone foodamt
	choice( "Laissez-le pour le moment" )choice
	trunk-food 6 < if
		($ "Ceci n'est pas assez de nourriture pour apprendre chirurgie." $) +cr +text
	else
		choice( ": conduite agressive en terrain difficile !" )choice: trade-medical-give
		trade-train-pay? if
			choice( "Donner " .. trade-train-amt .. " vous devez vous entrainer et mettre du muscle !" )choice:  trade-medical-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " utilise le charme." )choice: trade-medical-charm
		then
		most-grating if 
			charchoice( ": DIRE PAS L'ARROSAGE" fcoolit )choice: trade-medical-coolit
		then
;

// Mechanical

cyoa-choice: trade-mechanic-charm 
	charmroll if
		($ cname .. " obtiens une formation gratuite dans l'art et les sciences de l'ingenierie antizombie !" $) cyoa-text! 
		cchar .mechanical@ 5 > if 
			($ "Cela n'a reellement ameliore " .. chis .. " competence mecanique, mais c'etait gratuit !" $) +crtext
		then		
		goodfx mechanicREV mechanic++ ' camp-charm ++
	else
		($ cname .. " il n'a rien laisse tomber par accident, ca sonne plutot sinistre. . ." .. gHe .. " il est demande a vous de quitter." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-mechanic-train
	cchar .mechanical@ 6 < if
		($ cname .. " obtient une formation rapide en reparation, en construction de barrages efficaces et autres ingenieries antizome !" $) goodfx
	else
		($ cname .. " n'ai appris rien de nouveau. " .. cHe .. " je savais deja tout ce que le mecanicien pouvait enseigner." $) badfx
	then cyoa-text!
	-6 trunk-food+
	mechanicREV mechanic++ clear-cyoa
;

cyoa-choice: trade-mechanic-group
	($ "L'ensemble du groupe recoit une formation mecanique !" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-mechanic-group! foreach-human-char clear-cyoa
;

cyoa-choice: trade-mechanic-coolit
	cpet? if
		($ cname .. " le mecanicien est frappe d'une flatulence tres bruyante et grave." $)
	else
		($ cname .. " tours de phrases, locutions colorees ou expressions idiom " .. "DIRE PAS LE FAIRE DE L'ARROSAGE" pbold .. " un pied dans la fosse" $) 
	then cyoa-text!
	cool-it-7 if
		($ "Cela lui amuse a mort ! mecanicien heureux s'engage a donner. " .. cname .. " une formation intense sur tout ce qu'elle sait." $) +crtext 3 for mechanic++ next cooled-it clear-cyoa goodfx
	else cool-it++
		($ "Elle s'enfonce dans ses gisements pour chercher un boulon, puis le jette. " .. cname .. "elle continue a faire cela sans parler jusqu'a ce qu'... " .. thegroup .. " il est oblige de quitter le camp." $) +crtext badfx quitmission
	then mechanicREV
;

cyoa: trade-mechanic-give
	solohuman if
		choosehuman trade-mechanic-train
	then;
	"Qui devrait recevoir la formation mecanicienne ?" cyoa-text!
	' trade-mechanic-train cyoa-human-choice
;

cyoa: trade-mechanic
	"Mechanic savant : maitre mecanicien extraordinaire." cyoa-title!
	($ Thegroup .. " rencontre une femme portant des couvertures huilees." .. "Vous pouvez compter sur moi pour vous aider a ameliorer vos competences en reparation d'objets. cela est reellement pratique et pourrait peut-etre sauver votre vie." pbold .. "votre bonne maitrise mecanique vous permet de reparer votre voiture." $) cyoa-text! basic-tone foodamt
	choice( "Laissez-le pour le moment" )choice
	trunk-food 6 < if
		($ "Ce n'est pas assez de nourriture pour payer les formations." $) +cr +text
	else
		choice( ": conduite agressive en terrain difficile !" )choice: trade-mechanic-give
		trade-train-pay? if
			choice( "Donner " .. trade-train-amt .. " vous devez vous entrainer et mettre du muscle !" )choice:  trade-mechanic-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " utilise le charme." )choice: trade-mechanic-charm
		then
		most-grating if 
			charchoice( ": DIRE PAS L'ARROSAGE" fcoolit )choice: trade-mechanic-coolit
		then
;

} }


