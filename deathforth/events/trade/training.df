cyoa{ regiondef{

// if you have to do two things in a foreach-team-char word, use dup between each
// The above was wrong, I had to remove the second dup from everything
: trade-shoot-group! dup .shootingREV .shooting++ ;
: trade-strength-group! dup .strengthREV .strength++ ;
: trade-fitness-group! dup .fitnessREV .fitness++ ;
: trade-medical-group! dup .medicalREV .medical++ ;
: trade-mechanic-group! dup .mechanicREV .mechanic++ ;

: trade-train-amt numhums 3 * 3 + ; 
: trade-train-pay? trunk-food trade-train-amt 1 - > notsolo notsolohuman and and ;
: trade-train-pay trade-train-amt -1 * trunk-food+ ;

0 value camp-charm

// NOTE: Do innkeeper here too

// Shooting

cyoa-choice: trade-shoot-charm 
	charmroll if
		($ cname .. " 'recibe entrenamiento GRATUITO con armas de fuego! " .. cHe .. " 'ya se siente como un tiro mas estable." $) cyoa-text! 
		cchar .shooting@ 5 > if 
			($ "No ayudo realmente al tiro " .. chis .. " 'al tiro, pero fue GRATIS!" $) +crtext
		then 
		shootingREV shooting++ ' camp-charm ++ goodfx
	else
		($ cname .. " 'accidentalmente solo suena aterrador." .. gHe .. " 'es invitado a irse." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-shoot-train
	cchar .shooting@ 6 < if
		($ cname .. " 'aprende algunos trucos nuevos con armas de fuego! Cuidado, zombis!" $) goodfx
	else
		($ cname .. " 'no aprendio realmente nada nueva. " .. cHe .. " 'habia recogido estos trucos en " .. chis .. " ahora." $) badfx
	then cyoa-text!
	-6 trunk-food+
	shootingREV shooting++
	clear-cyoa
;

cyoa-choice: trade-shoot-group
	($ "Todo el grupo recibe entrenamiento en armas de fuego!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-shoot-group! foreach-human-char
	clear-cyoa
;

cyoa: trade-shoot-give
	solohuman if
		choosehuman trade-shoot-train
	then;
	"Quien deberia recibir el entrenamiento en manipulacion de armas?" cyoa-text!
	' trade-shoot-train cyoa-human-choice
;

cyoa-choice: trade-shoot-coolit
	cpet? if
		($ cname .. " 'apesto muy fuerte al entrenador de armas, y luego se revolco." $)
	else
		($ cname .. " chistes " .. "DIJITE NO ESPUELALO" pbold .. " al entrenador de armas de fuego." $) 
	then cyoa-text!
	cool-it-7 if
		($ "0.000000" .. "You seem like you need all the help you can get..." pbold .. "ella ensena sus trucos secretos de pistola a " .. cname .. "!" $) +crtext goodfx
		3 for shooting++ next cooled-it clear-cyoa
	else cool-it++
		($ "Su reaccion es una breve desaprobacion." .. "		Eh. Si, claro. Eres uno de esos tipos, no?" pbold .. "avisa a los demas del campamento que " .. cname .. " 'es una gran verguenza, y " .. ghe .. " 'es obligado a irse." $) +crtext badfx quitmission
	then shootingREV
;

cyoa: trade-shoot
	"Entrenador de Fusiles" cyoa-title!
	($ "Esta mujer armada con un rifle afirma que solia entrenar a otros en tiro deportivo. Ella vende consejos para mantener tu mirada estable y disparos multiples objetivos. " .. "Los zombis son blancos lentos. Es muy facil!" pbold $) cyoa-text! basic-tone foodamt
	choice( "Deja esto por ahora" )choice
	trunk-food 6 < if  
		($ "Esto no es suficiente comida para comprar el entrenamiento." $) +cr +text
	else
		choice( "Dame 6 alimentos para el entrenamiento" )choice: trade-shoot-give
		trade-train-pay? if
			choice( "Dame " .. trade-train-amt .. " ' alimentos para el entrenamiento en grupo" )choice: trade-shoot-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " 'utiliza encanto" )choice: trade-shoot-charm
		then
		most-grating if 
			charchoice( "dICELO NO LO ROCIES" fcoolit )choice: trade-shoot-coolit
		then
;

// Strength - Made this one a little different for Jon's request
// Can adjust it to cut out different things if you have all options available, currently you lose the option to just "Sale de alli" in that case.

cyoa-choice: trade-strength-pose 
	cchar .strength 6 > if
		($ cname .. " 'se inclina una vez, utilizando solo la mitad del esfuerzo. Pero el concurso ya esta decidido.'		" .. "IMPOSIBLE! ESTE ES IMPOSIBLE!" fbold .. " 'grita el Entrenador de Fuerza, en una voz extrana y aguda.'		" .. "ERES TU EL MUSCULOSO QUE SE PROMESO?" fbold .. " 'y luego se convierte en piedra y, un momento despues, se desintegra en millones de fragmentos." $) cyoa-text! goodfx clear-cyoa deleteme
		morale2+
	then;
	strengthroll if
		($ cname .. " 'gana la competencia de poses!" $) cyoa-text! goodfx
		cpet? if
			"Fue bastante dificil ganar una competencia de flexiones siendo un animal!" +crtext
		then
		strengthREV strength++ morale++
	else
		($ cname .. " 'pierde el enfrentamiento de poses. 		" .. cHe .. " siente " .. "QUE GRAN VERGUENZA." rbold $) cyoa-text! badfx
		morale2-
	then clear-cyoa
;

cyoa-choice: trade-strength-charm 
	charmroll if
		($ cname .. " ' consigue entrenamiento de fuerza GRATIS! " .. cHe .. " 'ya siente claramente un 'ahorro', como solian decir los bodybuilders antes de que todos fueran eliminados." $) cyoa-text!
		cchar .strength@ 5 > if 
		($ "No mejoro realmente la " .. chis .. " 'fuerza, pero fue GRATIS!" $) +crtext
		then
		strengthREV strength++ ' camp-charm ++ goodfx
		
	else
		($ cname .. " 'accidentalmente solo suena aterrador." .. gHe .. " 'es invitado a irse." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-strength-train
	cchar .strength@ 6 < if
		($ cname .. " ' se pone todo entusiasmado con el regimen de entrenamiento de fuerza!" $) goodfx
	else
		($ cname .. " 'no quedo impresionado con ese entrenamiento tan diminuto. " .. cHe .. " 'necesita encontrar una mejor rutina!" $) badfx
	then cyoa-text!
	-6 trunk-food+
	strengthREV strength++ clear-cyoa
;

cyoa-choice: trade-strength-group
	($ "Todo el grupo recibe entrenamiento de fuerza!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-strength-group! foreach-human-char clear-cyoa
;

cyoa: trade-strength-give
	solohuman if
		choosehuman trade-strength-train
	then;
	"Quien deberia recibir este entrenamiento de fuerza INTENSO?" cyoa-text!
	' trade-strength-train cyoa-human-choice
;

cyoa-choice: trade-strength-coolit
	cpet? if
		($ cname .. " ' pierde un pedo realmente fuerte al entrenador de fuerza." $)
	else
		($ cname .. " chistes " .. "DIJITE NO ESPUELALO" pbold .. " al entrenador de fuerza." $) 
	then cyoa-text!
	cool-it-7 if
		($ "SI! ESA ES LA ACTITUD QUE NECESITAS PARA LLEGAR A SER UN FISICOCULTURISTA DE ELITE! RECONSTRUIREMOS EL DEPORTE! SI!" fbold .. "el toma " .. cname .. " 'lo tomo como su principal alumno, para crecer ENORME a una velocidad mentirosa!" $) +crtext  goodfx 3 for strength++ next cooled-it clear-cyoa
	else cool-it++
		($ "No lo toma bien." .. "sAL DE AQUI, DWEEBUS! NO MERECES SER ENORME!" fbold .. "grita hasta que " .. thegroup .. " 'se van del campamento de intercambio." $) +crtext badfx quitmission
	then strengthREV
;

cyoa: trade-strength
	"Entrenador de Fuerza" cyoa-title!
	($ "Es un hombre anciano y apto. Grita algo sobre " .. "MASA Y VOLUMEN DEL EDIFICIO" fbold .. " ' con un " .. "RUTINA DE FUERZA INTENSA!" fbold .. "declara una pelea de poses!	Se agita hacia algunos objetos pesados que estan alrededor." $) cyoa-text! basic-tone foodamt
	choice( "Deja esto por ahora" )choice
	trunk-food 6 < if
		($ "Desafortunadamente, esto no es suficiente comida para ponerse enorme." $) +cr +text
	else
		choice( "Dame 6 alimentos para el entrenamiento" )choice: trade-strength-give
		trade-train-pay? if
			choice( "Dame " .. trade-train-amt .. " ' alimentos para el entrenamiento en grupo" )choice: trade-strength-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " 'utiliza encanto" )choice: trade-strength-charm
		then
		most-grating if 
			charchoice( "dICELO NO LO ROCIES" fcoolit )choice: trade-strength-coolit
		then
		strongest .strength 3 > if
			strongest charchoice( " 'proclama un desafio de pose!" )choice: trade-strength-pose
		then
;

// Fitness

cyoa-choice: trade-fitness-charm 
	charmroll if
		($ cname .. " 'obtiene entrenamiento fisico GRATIS! " .. cHe .. " ' sudora intensamente del intenso ejercicio!" $) cyoa-text! 
		cchar .fitness@ 5 > if 
			($ "No mejoro realmente la " .. chis .. " 'fuerza, pero fue GRATIS!" $) +crtext
		then
		goodfx fitnessREV fitness++ ' camp-charm ++
	else
		($ cname .. " 'accidentalmente solo suena aterrador." .. gHe .. " 'es invitado a irse." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-fitness-train
	cchar .fitness@ 6 < if
		($ cname .. " ' trabaja su sudor a gran escala desde la rutina fisica!" $) goodfx
	else
		($ cname .. " 'Ni siquiera rompiste a sudar! El instructor de fitness esta confundido, incluso ella se canso un poco." $) badfx
	then cyoa-text!
	-6 trunk-food+
	fitnessREV fitness++ clear-cyoa
;

cyoa-choice: trade-fitness-group
	($ "Todo el grupo recibe entrenamiento fisico!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-fitness-group! foreach-human-char clear-cyoa
;

cyoa: trade-fitness-give
	solohuman if
		choosehuman trade-fitness-train
	then;
	"Quien quiere hacer ejercicio extenuante por el bien de la forma fisica?" cyoa-text!
	' trade-fitness-train cyoa-human-choice
;

cyoa-choice: trade-fitness-coolit
	cpet? if
		($ cname .. " 'hace un pedo de pitido agudo al entrenador fitness." $)
	else
		($ cname .. " chistes " .. "DIJITE NO ESPUELALO" pbold .. " al instructor de fitness." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Eso es lo que me gusta escuchar! Estas listo para la RUTINA MILAGROSA DE FITNESS!" pbold .. "es probable que ella acaba de escuchar " .. cname .. " 'Incorrecto. Una increible y vanguardista serie de calistenia sigue." $) +crtext goodfx 3 for fitness++ next cooled-it clear-cyoa
	else cool-it++
		($ "Su reaccion es principalmente de decepcion." .. "		Bueno, disfrute siendo devorado por zombis!.	" pbold .. "	'Corre hacia atras hasta que desaparece de la vista.' " .. Thegroup .. " 'esta tan avergonzado por esto que " .. gtheyare .. " 'fue obligado a abandonar el campamento" $) +crtext badfx quitmission
	then fitnessREV
;

cyoa: trade-fitness
	"Instructora de fitness" cyoa-title!
	($ "Esta mujer esta engalanada con bandas de sudor, calentadores de extremidades y ropa de ejercicio chillona." .. "Solo los mas aptos sobreviviran en este mundo lleno de zombis! Puedo ayudarte a ponerte en forma rapidamente!" pbold .. "ella ha estado corriendo en lugar desde este tiempo." $) cyoa-text! basic-tone foodamt
	choice( "Deja esto por ahora" )choice
	trunk-food 6 < if
		($ "Desafortunadamente, esto no es suficiente alimento para fitness." $) +cr +text
	else
		choice( "Dame 6 alimentos para el entrenamiento" )choice: trade-fitness-give
		trade-train-pay? if
			choice( "Dame " .. trade-train-amt .. " ' alimentos para el entrenamiento en grupo" )choice:  trade-fitness-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " 'utiliza encanto" )choice: trade-fitness-charm
		then
		most-grating if 
			charchoice( "dICELO NO LO ROCIES" fcoolit )choice: trade-fitness-coolit
		then
;

// Medical

cyoa-choice: trade-medical-charm 
	charmroll if
		($ cname .. " ' obtiene TREINAMIENTO Medico GRATIS!" $) cyoa-text! 
		cchar .medical@ 5 > if 
			($ "No mejoro realmente la " .. chis .. " 'conocimiento medico, pero resulto GRATIS!" $) +crtext
		then		
		goodfx medicalREV medical++ ' camp-charm ++
	else
		($ cname .. " 'accidentalmente solo resulta espeluznante, incluso segun los estandares de la Universidad Medica Facil: Campus de la Furgoneta Asesina Espeluznante." .. gHe .. " 'es invitado a irse." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-medical-train
	cchar .medical@ 6 < if
		($ cname .. " aprende cosas nuevas sobre el cuidado medico de emergencia del conocedor hombre de la basura." $) goodfx
	else
		($ "Aunque el profesor sucio era un gran maestro, " .. cname .. " 'no aprendio nada nuevo." $) badfx
	then cyoa-text!
	-6 trunk-food+
	medicalREV medical++ clear-cyoa
;

cyoa-choice: trade-medical-group
	($ "Todo el grupo recibe entrenamiento medico!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-medical-group! foreach-human-char clear-cyoa
;

cyoa: trade-medical-give
	solohuman if
		choosehuman trade-medical-train
	then;
	"Quien deberia recibir el entrenamiento medico?" cyoa-text!
	' trade-medical-train cyoa-human-choice
;

cyoa-choice: trade-medical-coolit
	cpet? if
		($ cname .. " 'de alguna manera consigue decir algo como 'di lo que tengas que decir, pero no lo escupas' con una extrana voz de animal." $)
	else
		($ cname .. " chistes " .. "DIJITE NO ESPUELALO" pbold .. " 'al hombre del overol." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Asiente con sabiduria. Quizas malinterpreto. " .. chim .. "que demonios?! Procede a ensenar tecnicas de supervivencia medica contra zombis increibles y sin precedentes." $) +crtext goodfx 3 for medical++ next cooled-it clear-cyoa
	else cool-it++
		($ "*YOU* DON'T SAY IT OR SPRAY IT! AAAAAAAARGH!" rbold .. "esta furioso! " .. thegroup .. " 'fue obligado a abandonar el campamento." $) +crtext badfx quitmission
	then medicalREV
;

cyoa: trade-medicalt
	"Facil College Medico" cyoa-title!
	($ Thegroup .. " 'descubre una perturbadora y sucia furgoneta. Tiene un letrero que dice " .. "FACULTAD DE MEDICINA" rbold .. " 'colgando torcidamente en la puerta trasera. Dentro hay un perturbador y sucio tipo en overoles. " .. "PUES? QUIEN QUIERE APRENDER DE CIRUGIA?" pbold $) cyoa-text! basic-tone foodamt
	choice( "Deja esto por ahora" )choice
	trunk-food 6 < if
		($ "Esto no es suficiente comida para permitirse el lujo de aprender sobre cirugia." $) +cr +text
	else
		choice( "Dame 6 alimentos para el entrenamiento" )choice: trade-medical-give
		trade-train-pay? if
			choice( "Dame " .. trade-train-amt .. " ' alimentos para el entrenamiento en grupo" )choice:  trade-medical-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " 'utiliza encanto" )choice: trade-medical-charm
		then
		most-grating if 
			charchoice( "dICELO NO LO ROCIES" fcoolit )choice: trade-medical-coolit
		then
;

// Mechanical

cyoa-choice: trade-mechanic-charm 
	charmroll if
		($ cname .. "  recibe entrenamiento GRATIS en el arte y la ciencia de la ingenieria anti-zombi!" $) cyoa-text! 
		cchar .mechanical@ 5 > if 
			($ "No mejoro realmente la " .. chis .. " habilidad mecanica, pero fue GRATIS!" $) +crtext
		then		
		goodfx mechanicREV mechanic++ ' camp-charm ++
	else
		($ cname .. " 'accidentalmente solo suena aterrador." .. gHe .. " 'es invitado a irse." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-mechanic-train
	cchar .mechanical@ 6 < if
		($ cname .. "  recibe un curso intensivo en reparaciones, barricadas efectivas y otras tecnicas de ingenieria anti-zombi!" $) goodfx
	else
		($ cname .. "  no aprendi nada nuevo. " .. cHe .. " ya sabia de todo lo que el mecanico podia ensenar." $) badfx
	then cyoa-text!
	-6 trunk-food+
	mechanicREV mechanic++ clear-cyoa
;

cyoa-choice: trade-mechanic-group
	($ "Todo el grupo recibe entrenamiento mecanico!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-mechanic-group! foreach-human-char clear-cyoa
;

cyoa-choice: trade-mechanic-coolit
	cpet? if
		($ cname .. " se tira un" $)
	else
		($ cname .. " chistes " .. "DIJITE NO ESPUELALO" pbold .. " al mecanico." $) 
	then cyoa-text!
	cool-it-7 if
		($ "1  to the first person who can solve the problem. " .. cname .. " un curso intensivo en absolutamente todo lo que sabe." $) +crtext 3 for mechanic++ next cooled-it clear-cyoa goodfx
	else cool-it++
		($ "0.5 " .. cname .. "0. " .. thegroup .. " 'fue obligado a abandonar el campamento." $) +crtext badfx quitmission
	then mechanicREV
;

cyoa: trade-mechanic-give
	solohuman if
		choosehuman trade-mechanic-train
	then;
	"Quien deberia recibir la formacion del mecanico?" cyoa-text!
	' trade-mechanic-train cyoa-human-choice
;

cyoa: trade-mechanic
	"Mecanico Prodigio" cyoa-title!
	($ Thegroup .. " ' se encuentra con una mujer que lleva ropas sucias de aceite.	" .. "Puedo ayudarte a mejorar en la reparacion de cosas. Es una habilidad verdaderamente util. Podria salvar tu vida." pbold .. "una alta habilidad mecanica te permite reparar tu coche." $) cyoa-text! basic-tone foodamt
	choice( "Deja esto por ahora" )choice
	trunk-food 6 < if
		($ "Esto no es suficiente comida para pagar el entrenamiento." $) +cr +text
	else
		choice( "Dame 6 alimentos para el entrenamiento" )choice: trade-mechanic-give
		trade-train-pay? if
			choice( "Dame " .. trade-train-amt .. " ' alimentos para el entrenamiento en grupo" )choice:  trade-mechanic-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " 'utiliza encanto" )choice: trade-mechanic-charm
		then
		most-grating if 
			charchoice( "dICELO NO LO ROCIES" fcoolit )choice: trade-mechanic-coolit
		then
;

} }


