cyoa{ regiondef{

// if you have to do two things in a foreach-team-char word, use dup between each
// The above was wrong, I had to remove the second dup from everything
: trade-shoot-group! dup .shootingREV .shooting++ ;
: trade-strength-group! dup .strengthREV .strength++ ;
: trade-fitness-group! dup .fitnessREV .fitness++ ;
: trade-medical-group! dup .medicalREV .medical++ ;
: trade-mechanic-group! dup .mechanicREV .mechanic++ ;

: trade-train-amt numhums 3 * 3 + ; 
: trade-train-pay? trunk-food trade-train-amt 1 - > notsolo notsolohuman and and ;
: trade-train-pay trade-train-amt -1 * trunk-food+ ;

0 value camp-charm

// NOTE: Do innkeeper here too

// Shooting

cyoa-choice: trade-shoot-charm 
	charmroll if
		($ cname .. "  ganha treinamento GRATIS com armas de fogo! " .. cHe .. "  ja se sente um atirador mais firme." $) cyoa-text! 
		cchar .shooting@ 5 > if 
			($ "'Na verdade nao ajudou " .. chis .. "  tiro, mas foi GRATIS!" $) +crtext
		then 
		shootingREV shooting++ ' camp-charm ++ goodfx
	else
		($ cname .. "  acidentalmente parece assustador. 		" .. gHe .. "  e convidado a sair." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-shoot-train
	cchar .shooting@ 6 < if
		($ cname .. "  aprende alguns novos truques com armas de fogo! Zumbis cuidado." $) goodfx
	else
		($ cname .. " ' realmente nao aprendeu nada de novo. " .. cHe .. "  ja havia aprendido esses truques em " .. chis .. "  agora." $) badfx
	then cyoa-text!
	-6 trunk-food+
	shootingREV shooting++
	clear-cyoa
;

cyoa-choice: trade-shoot-group
	($ "O grupo inteiro recebe treinamento com armas de fogo!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-shoot-group! foreach-human-char
	clear-cyoa
;

cyoa: trade-shoot-give
	solohuman if
		choosehuman trade-shoot-train
	then;
	"Quem deve receber o treinamento em manuseio de armas de fogo?" cyoa-text!
	' trade-shoot-train cyoa-human-choice
;

cyoa-choice: trade-shoot-coolit
	cpet? if
		($ cname .. "  peida muito alto no treinador de armas de fogo e depois rola." $)
	else
		($ cname .. "  graceja " .. "'DIZLO NaO COLELO" pbold .. " ao treinador de armas de fogo." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Acontece um milagre: ela decide nao atirar!		" .. "You seem like you need all the help you can get..." pbold .. " ela ensina seus truques de armas secretas a " .. cname .. "!" $) +crtext goodfx
		3 for shooting++ next cooled-it clear-cyoa
	else cool-it++
		($ "Seu reacao e uma expressao de desgosto breve." .. "'		Eh. Sim, assim. Voce e um desses tipos, ne?" pbold .. "ela avisa o resto do acampamento que " .. cname .. " e uma grande pene, e " .. ghe .. "  e forcado a sair." $) +crtext badfx quitmission
	then shootingREV
;

cyoa: trade-shoot
	"Professora de Armas de Fogo" cyoa-title!
	($ "Esta mulher armada com rifle afirma ter treinado outros na tiro de competicao. Ela vende dicas para manter seu alvo estavel e disparos multiplos de alvos. " .. "'Zumbis sao alvos lentos a se movimentar. E muito facil!" pbold $) cyoa-text! basic-tone foodamt
	choice( "Sai agora" )choice
	trunk-food 6 < if  
		($ "'Isso nao e comida suficiente para comprar treinamento.'" $) +cr +text
	else
		choice( "De 6 alimentos para treinar" )choice: trade-shoot-give
		trade-train-pay? if
			choice( "De " .. trade-train-amt .. " alimento para treinamento em grupo" )choice: trade-shoot-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " " )choice: trade-shoot-charm
		then
		most-grating if 
			charchoice( "dIZ ISSO NaO O SPRAY ISSO" fcoolit )choice: trade-shoot-coolit
		then
;

// Strength - Made this one a little different for Jon's request
// Can adjust it to cut out different things if you have all options available, currently you lose the option to just "Sair de perto" in that case.

cyoa-choice: trade-strength-pose 
	cchar .strength 6 > if
		($ cname .. " 1" .. "IMPOSSIVEL! ISSO E IMPOSSIVEL!" fbold .. " 0x00000000," .. "VOCE E 'O SWOLE QUE FOI PROMETIDO'?" fbold .. " e entao ele se transforma em pedra e, momentos depois, se despedaca em um milhao de fragmentos." $) cyoa-text! goodfx clear-cyoa deleteme
		morale2+
	then;
	strengthroll if
		($ cname .. "  vence o concurso de poses!" $) cyoa-text! goodfx
		cpet? if
			"Era muito dificil vencer uma competicao de flexao como um animal!" +crtext
		then
		strengthREV strength++ morale++
	else
		($ cname .. "  perde o concurso de poses." .. cHe .. "  sente " .. "GRANDE VERGONHA." rbold $) cyoa-text! badfx
		morale2-
	then clear-cyoa
;

cyoa-choice: trade-strength-charm 
	charmroll if
		($ cname .. "  recebe treinamento de forca GRATIS! " .. cHe .. " ' ja sente claramente uma 'bomba', como os fisiculturistas costumavam dizer antes de serem todos exterminados." $) cyoa-text!
		cchar .strength@ 5 > if 
		($ "'Na verdade nao melhorou " .. chis .. "  forca, mas era GRATIS!" $) +crtext
		then
		strengthREV strength++ ' camp-charm ++ goodfx
		
	else
		($ cname .. "  acidentalmente parece assustador. 		" .. gHe .. "  e convidado a sair." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-strength-train
	cchar .strength@ 6 < if
		($ cname .. "  fica todo animado com o regime de treinamento de forca!" $) goodfx
	else
		($ cname .. "  nao ficou impressionado com aquele pequeno treino insignificante. " .. cHe .. "  precisa encontrar uma rotina melhor!" $) badfx
	then cyoa-text!
	-6 trunk-food+
	strengthREV strength++ clear-cyoa
;

cyoa-choice: trade-strength-group
	($ "O grupo inteiro recebe treinamento de forca!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-strength-group! foreach-human-char clear-cyoa
;

cyoa: trade-strength-give
	solohuman if
		choosehuman trade-strength-train
	then;
	"Quem deveria receber este treino de forca INTENSO?" cyoa-text!
	' trade-strength-train cyoa-human-choice
;

cyoa-choice: trade-strength-coolit
	cpet? if
		($ cname .. " ele farta muito fortemente para o treinador de forca." $)
	else
		($ cname .. "  graceja " .. "'DIZLO NaO COLELO" pbold .. " para o treinador de forca." $) 
	then cyoa-text!
	cool-it-7 if
		($ "'SIM! ASSIM E A MENTALIDADE QUE VOCE NECESSITA PARA SE TORNAR UM CORPOEDOR DE TOPO! RESCATAMOS O DESPORTO! SIM!" fbold .. "assume " .. cname .. " 'on' is a typo, it should be 'one'" $) +crtext  goodfx 3 for strength++ next cooled-it clear-cyoa
	else cool-it++
		($ "'Ele nao se deixa bem." .. "'		SAIA DAQUi VOCES DWEEBUS! VOCE NaO TEM DIREITO PARA SE TORNAR ENORMENTE!" fbold .. "ele continua gritando ate " .. thegroup .. " sair do acampamento de trocas." $) +crtext badfx quitmission
	then strengthREV
;

cyoa: trade-strength
	"Treinador de Forca" cyoa-title!
	($ "'I'm going " .. "MASSA E VOLUME DO EDIFICIO" fbold .. " com um " .. "'ROTINA DE FORCA INTENSA!'" fbold .. "ele se debate em direcao a alguns objetos pesados que estao por perto." $) cyoa-text! basic-tone foodamt
	choice( "Sai agora" )choice
	trunk-food 6 < if
		($ "'Infelizmente, isso nao e comida suficiente para ficar enorme.'" $) +cr +text
	else
		choice( "De 6 alimentos para treinar" )choice: trade-strength-give
		trade-train-pay? if
			choice( "De " .. trade-train-amt .. " alimento para treinamento em grupo" )choice: trade-strength-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " " )choice: trade-strength-charm
		then
		most-grating if 
			charchoice( "dIZ ISSO NaO O SPRAY ISSO" fcoolit )choice: trade-strength-coolit
		then
		strongest .strength 3 > if
			strongest charchoice( " 'declara um empate de poses!'" )choice: trade-strength-pose
		then
;

// Fitness

cyoa-choice: trade-fitness-charm 
	charmroll if
		($ cname .. "  ganha treino de fitness GRATUITO! " .. cHe .. " 'sua de tanto exercicio intenso!'" $) cyoa-text! 
		cchar .fitness@ 5 > if 
			($ "'Na verdade nao melhorou " .. chis .. " 'boa forma, mas foi de graca!'" $) +crtext
		then
		goodfx fitnessREV fitness++ ' camp-charm ++
	else
		($ cname .. "  acidentalmente parece assustador. 		" .. gHe .. "  e convidado a sair." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-fitness-train
	cchar .fitness@ 6 < if
		($ cname .. " 'trabalha muito suando a camisa na rotina de exercicios fisicos!'" $) goodfx
	else
		($ cname .. " ' nem sequer suou! A Instrutora de Fitness esta confusa, ate ela ficou um pouco cansada." $) badfx
	then cyoa-text!
	-6 trunk-food+
	fitnessREV fitness++ clear-cyoa
;

cyoa-choice: trade-fitness-group
	($ "O grupo inteiro recebe treinamento fitness!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-fitness-group! foreach-human-char clear-cyoa
;

cyoa: trade-fitness-give
	solohuman if
		choosehuman trade-fitness-train
	then;
	"Quem quer exercicio extenuante em prol do condicionamento fisico?" cyoa-text!
	' trade-fitness-train cyoa-human-choice
;

cyoa-choice: trade-fitness-coolit
	cpet? if
		($ cname .. "  solta um pum em tom alto para a instrutora de fitness." $)
	else
		($ cname .. "  graceja " .. "'DIZLO NaO COLELO" pbold .. "  para a instrutora de fitness." $) 
	then cyoa-text!
	cool-it-7 if
		($ "'E isso que eu gosto de ouvir! Voce esta pronto para a ROTINA DE FITNESS MILAGROSA!" pbold .. "'		E provavel que ela tenha acabado de ouvir " .. cname .. " 'Errado. Uma serie incrivel e de ponta de calistenia segue.'" $) +crtext goodfx 3 for fitness++ next cooled-it clear-cyoa
	else cool-it++
		($ "Sua reacao e principalmente de decepcao." .. "		Sim, bem, divirtase sendo comido por zumbis." pbold .. "	'Elas correm para tras ate que ela esteja fora de vista.' " .. Thegroup .. "  esta tao envergonhado com isso que " .. gtheyare .. " obrigado a sair do acampamento." $) +crtext badfx quitmission
	then fitnessREV
;

cyoa: trade-fitness
	"Instrutora de Fitness" cyoa-title!
	($ "	Esta mulher esta vestida com bandas de suor, aquecedores de membros e roupas de exercicio berrantes." .. "Apenas os mais aptos sobreviverao neste mundo lotado de zumbis! Posso te ajudar a ficar apto, rapido!" pbold .. "' ela corre em lugar alto desde este momento." $) cyoa-text! basic-tone foodamt
	choice( "Sai agora" )choice
	trunk-food 6 < if
		($ "'Infelizmente, isso nao e comida suficiente para boa forma." $) +cr +text
	else
		choice( "De 6 alimentos para treinar" )choice: trade-fitness-give
		trade-train-pay? if
			choice( "De " .. trade-train-amt .. " alimento para treinamento em grupo" )choice:  trade-fitness-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " " )choice: trade-fitness-charm
		then
		most-grating if 
			charchoice( "dIZ ISSO NaO O SPRAY ISSO" fcoolit )choice: trade-fitness-coolit
		then
;

// Medical

cyoa-choice: trade-medical-charm 
	charmroll if
		($ cname .. "  recebe treinamento medico gratuito!" $) cyoa-text! 
		cchar .medical@ 5 > if 
			($ "'Na verdade nao melhorou " .. chis .. "  conhecimento medico, mas foi GRATUITO!" $) +crtext
		then		
		goodfx medicalREV medical++ ' camp-charm ++
	else
		($ cname .. "  acidentalmente acaba sendo assustador, ate pelos padroes do EZ Medical College: Campus da Van Assassina Assustadora. 		" .. gHe .. "  e convidado a sair." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-medical-train
	cchar .medical@ 6 < if
		($ cname .. "  aprende coisas novas sobre cuidados de emergencia medicos do homem sujo." $) goodfx
	else
		($ "Embora o professor sujo fosse um grande professor, " .. cname .. " 'nao aprendeu nada novo." $) badfx
	then cyoa-text!
	-6 trunk-food+
	medicalREV medical++ clear-cyoa
;

cyoa-choice: trade-medical-group
	($ "Todo o grupo recebe treinamento medico!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-medical-group! foreach-human-char clear-cyoa
;

cyoa: trade-medical-give
	solohuman if
		choosehuman trade-medical-train
	then;
	"Quem deveria receber o treinamento medico?" cyoa-text!
	' trade-medical-train cyoa-human-choice
;

cyoa-choice: trade-medical-coolit
	cpet? if
		($ cname .. " ' alguma forma de dizer algo como DISSE NaO SPRAY NAO em uma voz estranha de animais." $)
	else
		($ cname .. "  graceja " .. "'DIZLO NaO COLELO" pbold .. " disse isso ao homem dos calcas." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Ele acena com a sabedoria de um sabio. Talvez ele tenha ouvido mal " .. chim .. "? Ele passa a ensinar tecnicas medicas incriveis de sobrevivencia de zumbis como nunca antes vistas." $) +crtext goodfx 3 for medical++ next cooled-it clear-cyoa
	else cool-it++
		($ "*YOU* DON'T SAY IT OR SPRAY IT! AAAAAAAARGH!" rbold .. "ele esta furioso! " .. thegroup .. "  e forcado a deixar o acampamento." $) +crtext badfx quitmission
	then medicalREV
;

cyoa: trade-medicalt
	"Faculdade de Medicina EZ" cyoa-title!
	($ Thegroup .. "  descobre uma van inquietante e imunda. Ela tem uma placa que diz " .. "FACULDADE DE MEDICINA EZ" rbold .. "  pendurado torto na porta de tras. Dentro ha um cara inquietante e imundo de macacao. " .. "BEM? QUEM QUER APRENDER SOBRE CIRURGIA?" pbold $) cyoa-text! basic-tone foodamt
	choice( "Sai agora" )choice
	trunk-food 6 < if
		($ "'Isso nao e comida suficiente para aprender sobre cirurgia." $) +cr +text
	else
		choice( "De 6 alimentos para treinar" )choice: trade-medical-give
		trade-train-pay? if
			choice( "De " .. trade-train-amt .. " alimento para treinamento em grupo" )choice:  trade-medical-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " " )choice: trade-medical-charm
		then
		most-grating if 
			charchoice( "dIZ ISSO NaO O SPRAY ISSO" fcoolit )choice: trade-medical-coolit
		then
;

// Mechanical

cyoa-choice: trade-mechanic-charm 
	charmroll if
		($ cname .. "  recebe treinamento GRATUITO na arte e ciencia da engenharia anti-zumbi!" $) cyoa-text! 
		cchar .mechanical@ 5 > if 
			($ "'Na verdade nao melhorou " .. chis .. "  habilidade mecanica, mas foi GRATIS!" $) +crtext
		then		
		goodfx mechanicREV mechanic++ ' camp-charm ++
	else
		($ cname .. "  acidentalmente parece assustador. 		" .. gHe .. "  e convidado a sair." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-mechanic-train
	cchar .mechanical@ 6 < if
		($ cname .. "  recebe um curso intensivo em reparos, barricadas eficazes e outras engenharias anti-zumbi!" $) goodfx
	else
		($ cname .. " ' nao aprendeu nada de novo. " .. cHe .. " 'ja estava ciente de tudo que o mecanico poderia ensinar.'" $) badfx
	then cyoa-text!
	-6 trunk-food+
	mechanicREV mechanic++ clear-cyoa
;

cyoa-choice: trade-mechanic-group
	($ "'O grupo inteiro recebe treinamento mecanico!'" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-mechanic-group! foreach-human-char clear-cyoa
;

cyoa-choice: trade-mechanic-coolit
	cpet? if
		($ cname .. " 'peida bem alto no mecanico, num tom grave.'" $)
	else
		($ cname .. "  graceja " .. "'DIZLO NaO COLELO" pbold .. " ao mecanico." $) 
	then cyoa-text!
	cool-it-7 if
		($ "1  to the first person who can solve the problem. " .. cname .. " 'um curso intensivo em tudo o que ela sabe'" $) +crtext 3 for mechanic++ next cooled-it clear-cyoa goodfx
	else cool-it++
		($ "0.5 " .. cname .. "0. " .. thegroup .. "  e forcado a deixar o acampamento." $) +crtext badfx quitmission
	then mechanicREV
;

cyoa: trade-mechanic-give
	solohuman if
		choosehuman trade-mechanic-train
	then;
	"'Quem deve receber a treinamento mecanico?'" cyoa-text!
	' trade-mechanic-train cyoa-human-choice
;

cyoa: trade-mechanic
	"'Mecanico Genio'" cyoa-title!
	($ Thegroup .. " 'encontra uma mulher vestida de calcas sujas com manchas de oleo.	'" .. "'Posso ajudalo a melhorar em consertar coisas. E uma habilidade realmente util. Pode salvar sua vida." pbold .. "	Uma alta habilidade mecanica permite que voce conserte seu carro." $) cyoa-text! basic-tone foodamt
	choice( "Sai agora" )choice
	trunk-food 6 < if
		($ "'Isso nao e comida suficiente para pagar o treinamento." $) +cr +text
	else
		choice( "De 6 alimentos para treinar" )choice: trade-mechanic-give
		trade-train-pay? if
			choice( "De " .. trade-train-amt .. " alimento para treinamento em grupo" )choice:  trade-mechanic-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( " " )choice: trade-mechanic-charm
		then
		most-grating if 
			charchoice( "dIZ ISSO NaO O SPRAY ISSO" fcoolit )choice: trade-mechanic-coolit
		then
;

} }


