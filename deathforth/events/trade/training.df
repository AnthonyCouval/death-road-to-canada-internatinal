cyoa{ regiondef{

// if you have to do two things in a foreach-team-char word, use dup between each
// The above was wrong, I had to remove the second dup from everything
: trade-shoot-group! dup .shootingREV .shooting++ ;
: trade-strength-group! dup .strengthREV .strength++ ;
: trade-fitness-group! dup .fitnessREV .fitness++ ;
: trade-medical-group! dup .medicalREV .medical++ ;
: trade-mechanic-group! dup .mechanicREV .mechanic++ ;

: trade-train-amt numhums 3 * 3 + ; 
: trade-train-pay? trunk-food trade-train-amt 1 - > notsolo notsolohuman and and ;
: trade-train-pay trade-train-amt -1 * trunk-food+ ;

0 value camp-charm

// NOTE: Do innkeeper here too

// Shooting

cyoa-choice: trade-shoot-charm 
	charmroll if
		($ cname .. "  bekommt KOSTENLOSES Training mit Schusswaffen! " .. cHe .. "  fuhlt sich schon wie ein sicherer Schutze." $) cyoa-text! 
		cchar .shooting@ 5 > if 
			($ "'Es hat tatsachlich nicht geholfen " .. chis .. "  schieen, aber es war KOSTENLOS!" $) +crtext
		then 
		shootingREV shooting++ ' camp-charm ++ goodfx
	else
		($ cname .. "  kommt versehentlich einfach nur gruselig ruber. 		" .. gHe .. "  wird gebeten zu gehen." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-shoot-train
	cchar .shooting@ 6 < if
		($ cname .. "  lernt ein paar neue Tricks mit Schusswaffen! Zombies aufgepasst." $) goodfx
	else
		($ cname .. " ' hat nicht wirklich etwas Neues gelernt. " .. cHe .. "  hatte diese Tricks bereits auf " .. chis .. "  tun." $) badfx
	then cyoa-text!
	-6 trunk-food+
	shootingREV shooting++
	clear-cyoa
;

cyoa-choice: trade-shoot-group
	($ "Die gesamte Gruppe erhalt eine Schusswaffenausbildung!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-shoot-group! foreach-human-char
	clear-cyoa
;

cyoa: trade-shoot-give
	solohuman if
		choosehuman trade-shoot-train
	then;
	"Wer sollte die Ausbildung im Umgang mit Schusswaffen erhalten?" cyoa-text!
	' trade-shoot-train cyoa-human-choice
;

cyoa-choice: trade-shoot-coolit
	cpet? if
		($ cname .. "  furzt den Schusswaffentrainer wirklich laut an und rollt sich dann herum." $)
	else
		($ cname .. "  witzelte " .. "'SAG ES SPRUH ES NICHT" pbold .. "  zum Schusswaffentrainer." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Ein Wunder geschieht: Sie entscheidet sich nicht zu schieen!		" .. "You seem like you need all the help you can get..." pbold .. "		Sie bringt ihm ihre geheimen Tricks mit der Waffe bei " .. cname .. "!" $) +crtext goodfx
		3 for shooting++ next cooled-it clear-cyoa
	else cool-it++
		($ "Ihre Reaktion ist kurzzeitige Abscheu." .. "'		Oh. Ja, ok. Du bist einer von diesen Typen, huh?" pbold .. "		Sie alarmiert den Rest des Camps dass " .. cname .. "  ein riesiger Dummkopf ist und " .. ghe .. "  ist gezwungen zu gehen." $) +crtext badfx quitmission
	then shootingREV
;

cyoa: trade-shoot
	"Waffentrainer" cyoa-title!
	($ "Diese Frau mit dem Gewehr behauptet dass sie fruher andere im Sportschieen trainiert hat. 	Sie verkauft Tipps wie man sein Ziel ruhig halt und mehrere Trickschusse auf einmal ausfuhrt. " .. "'Zombies sind sich langsam bewegende Ziele. Es ist echt einfach!" pbold $) cyoa-text! basic-tone foodamt
	choice( "Gehen Sie vorerst" )choice
	trunk-food 6 < if  
		($ "'Das ist nicht genug Essen um Training zu kaufen." $) +cr +text
	else
		choice( "Gib 6 Essen fur Training" )choice: trade-shoot-give
		trade-train-pay? if
			choice( "Gib " .. trade-train-amt .. "  essen fur Gruppentraining" )choice: trade-shoot-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( "  nutzt Charme" )choice: trade-shoot-charm
		then
		most-grating if 
			charchoice( "': SAG ES SPRUHE ES NICHT" fcoolit )choice: trade-shoot-coolit
		then
;

// Strength - Made this one a little different for Jon's request
// Can adjust it to cut out different things if you have all options available, currently you lose the option to just "Wegfahren" in that case.

cyoa-choice: trade-strength-pose 
	cchar .strength 6 > if
		($ cname .. "  spannt sich einmal an, wobei er nur die halbe Kraft einsetzt. Doch der Wettkampf ist bereits entschieden.		" .. "UNMOGLICH! DAS IST UNMOGLICH!" fbold .. "  kreischt der Krafttrainer mit einer seltsam hohen Stimme.		" .. "'BIST DU 'DER ANGEKUNDIGTE SCHWELLKOPF'?" fbold .. "  und dann verwandelt er sich in Stein und zerbricht Augenblicke spater in eine Million Fragmente." $) cyoa-text! goodfx clear-cyoa deleteme
		morale2+
	then;
	strengthroll if
		($ cname .. "  gewinnt das Posing!" $) cyoa-text! goodfx
		cpet? if
			"Es war ziemlich schwer als Tier einen Flexwettbewerb zu gewinnen!" +crtext
		then
		strengthREV strength++ morale++
	else
		($ cname .. "  verliert das Posing. 		" .. cHe .. "  wird " .. "GROE SCHANDE." rbold $) cyoa-text! badfx
		morale2-
	then clear-cyoa
;

cyoa-choice: trade-strength-charm 
	charmroll if
		($ cname .. "  bekommt KOSTENLOSES Krafttraining! " .. cHe .. " ' spurt bereits deutlich einen 'Pump', wie die Bodybuilder fruher zu sagen pflegten, bevor sie alle ausgeloscht wurden." $) cyoa-text!
		cchar .strength@ 5 > if 
		($ "'Es hat sich nicht wirklich verbessert " .. chis .. "  starke, aber es war KOSTENLOS!" $) +crtext
		then
		strengthREV strength++ ' camp-charm ++ goodfx
		
	else
		($ cname .. "  kommt versehentlich einfach nur gruselig ruber. 		" .. gHe .. "  wird gebeten zu gehen." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-strength-train
	cchar .strength@ 6 < if
		($ cname .. "  wird vom Krafttrainingsprogramm ganz aufgepumpt!" $) goodfx
	else
		($ cname .. "  war von diesem mickrigen kleinen Training nicht beeindruckt. " .. cHe .. "  muss eine bessere Routine finden!" $) badfx
	then cyoa-text!
	-6 trunk-food+
	strengthREV strength++ clear-cyoa
;

cyoa-choice: trade-strength-group
	($ "Die gesamte Gruppe bekommt Krafttraining!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-strength-group! foreach-human-char clear-cyoa
;

cyoa: trade-strength-give
	solohuman if
		choosehuman trade-strength-train
	then;
	"Wer sollte dieses INTENSIVE Krafttraining bekommen?" cyoa-text!
	' trade-strength-train cyoa-human-choice
;

cyoa-choice: trade-strength-coolit
	cpet? if
		($ cname .. "  furzt wirklich laut beim Krafttrainer." $)
	else
		($ cname .. "  witzelte " .. "'SAG ES SPRUH ES NICHT" pbold .. "  zum Krafttrainer." $) 
	then cyoa-text!
	cool-it-7 if
		($ "'JA! DAS IST DIE EINSTELLUNG DIE DU BRAUCHST UM ES ALS TOP BODYBUILDER ZU SCHAFFEN! WIR WERDEN DEN SPORT WIEDERAUFBAUEN! JA!" fbold .. "		Er nimmt " .. cname .. "  als seinen besten Schuler, um in atemberaubendem Tempo RIESIG zu werden!" $) +crtext  goodfx 3 for strength++ next cooled-it clear-cyoa
	else cool-it++
		($ "'Er nimmt das nicht gut auf." .. "'		RAUS HIER DU DWEEBUS! DU HAST ES NICHT VERDIENT RIESIG ZU WERDEN!" fbold .. "		Er schreit weiter bis " .. thegroup .. "  das Handelscamp verlassen." $) +crtext badfx quitmission
	then strengthREV
;

cyoa: trade-strength
	"Krafttrainer" cyoa-title!
	($ "'Es ist ein alter aber fitter Mann in passender grauer Jogginghose und Sweatshirt. Er schreit etwas uber " .. "AUFBAU VON MASSE UND VOLUMEN" fbold .. "  mit einer " .. "INTENSIVEN KRAFT ROUTINE!" fbold .. "	Er wedelt mit einigen schweren Gegenstanden herum die herumliegen." $) cyoa-text! basic-tone foodamt
	choice( "Gehen Sie vorerst" )choice
	trunk-food 6 < if
		($ "'Leider ist das nicht genug Essen, um riesig zu werden." $) +cr +text
	else
		choice( "Gib 6 Essen fur Training" )choice: trade-strength-give
		trade-train-pay? if
			choice( "Gib " .. trade-train-amt .. "  essen fur Gruppentraining" )choice: trade-strength-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( "  nutzt Charme" )choice: trade-strength-charm
		then
		most-grating if 
			charchoice( "': SAG ES SPRUHE ES NICHT" fcoolit )choice: trade-strength-coolit
		then
		strongest .strength 3 > if
			strongest charchoice( "  erklart ein Posing Duell!" )choice: trade-strength-pose
		then
;

// Fitness

cyoa-choice: trade-fitness-charm 
	charmroll if
		($ cname .. "  bekommt KOSTENLOSES Fitnesstraining! " .. cHe .. "  schwitzt von der intensiven Ubung!" $) cyoa-text! 
		cchar .fitness@ 5 > if 
			($ "'Es hat sich nicht wirklich verbessert " .. chis .. "  fitness, aber es war KOSTENLOS!" $) +crtext
		then
		goodfx fitnessREV fitness++ ' camp-charm ++
	else
		($ cname .. "  kommt versehentlich einfach nur gruselig ruber. 		" .. gHe .. "  wird gebeten zu gehen." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-fitness-train
	cchar .fitness@ 6 < if
		($ cname .. "  bekommt einen riesigen Schwei von der Fitness Routine!" $) goodfx
	else
		($ cname .. " ' kam nicht einmal ins Schwitzen! Die Fitnesstrainerin ist verwirrt, sogar sie wurde ein wenig mude." $) badfx
	then cyoa-text!
	-6 trunk-food+
	fitnessREV fitness++ clear-cyoa
;

cyoa-choice: trade-fitness-group
	($ "The entire group is doing fitness training!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-fitness-group! foreach-human-char clear-cyoa
;

cyoa: trade-fitness-give
	solohuman if
		choosehuman trade-fitness-train
	then;
	"Wer will anstrengende Ubungen um der Fitness willen?" cyoa-text!
	' trade-fitness-train cyoa-human-choice
;

cyoa-choice: trade-fitness-coolit
	cpet? if
		($ cname .. " pupsen in hoher Tonlage beim Fitness Trainer" $)
	else
		($ cname .. "  witzelte " .. "'SAG ES SPRUH ES NICHT" pbold .. " zum Fitnesstrainer." $) 
	then cyoa-text!
	cool-it-7 if
		($ "'Das ist was ich horen wollte! Du bist bereit fur die WUNDER FITNESS ROUTINE!" pbold .. "'		Es ist wahrscheinlich dass sie nur " .. cname .. "  falsch. Es folgt eine unglaubliche, hochmoderne Reihe von Calisthenics." $) +crtext goodfx 3 for fitness++ next cooled-it clear-cyoa
	else cool-it++
		($ "Ihre Reaktion ist uberwiegend Enttauschung." .. "		Ja, na schon, viel Spa beim Zombie Gefressenwerden." pbold .. "'		Sie joggt ruckwarts bis sie auer Sicht ist. " .. Thegroup .. "  ist davon so verlegen dass " .. gtheyare .. "  gezwungen ist das Camp zu verlassen." $) +crtext badfx quitmission
	then fitnessREV
;

cyoa: trade-fitness
	"Fitness Trainerin" cyoa-title!
	($ "Diese Frau ist mit Schweibandern, Beinstulpen und greller Sportkleidung ausstaffiert.	" .. "Nur die Fittesten werden in dieser von Zombies verseuchten Welt uberleben! Ich kann dir helfen, schnell fit zu werden!" pbold .. "'	Sie lauft die ganze Zeit ununterbrochen auf der Stelle." $) cyoa-text! basic-tone foodamt
	choice( "Gehen Sie vorerst" )choice
	trunk-food 6 < if
		($ "'Das ist leider nicht genug Nahrung fur Fitness." $) +cr +text
	else
		choice( "Gib 6 Essen fur Training" )choice: trade-fitness-give
		trade-train-pay? if
			choice( "Gib " .. trade-train-amt .. "  essen fur Gruppentraining" )choice:  trade-fitness-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( "  nutzt Charme" )choice: trade-fitness-charm
		then
		most-grating if 
			charchoice( "': SAG ES SPRUHE ES NICHT" fcoolit )choice: trade-fitness-coolit
		then
;

// Medical

cyoa-choice: trade-medical-charm 
	charmroll if
		($ cname .. "  bekommt KOSTENLOSE medizinische Ausbildung!" $) cyoa-text! 
		cchar .medical@ 5 > if 
			($ "'Es hat sich nicht wirklich verbessert " .. chis .. "  medizinische Kenntnisse, aber es war KOSTENLOS!" $) +crtext
		then		
		goodfx medicalREV medical++ ' camp-charm ++
	else
		($ cname .. "  kommt versehentlich einfach nur gruselig ruber, selbst fur die Verhaltnisse des EZ Medical College: Gruseliger Morder Van Campus. 		" .. gHe .. "  wird gebeten zu gehen." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-medical-train
	cchar .medical@ 6 < if
		($ cname .. " der Schmutzmann wei viel uber Erste Hilfe und bringt dir" $) goodfx
	else
		($ "Obwohl der schmutzige Professor ein groartiger Lehrer war, " .. cname .. " ich habe nichts Neues gelernt." $) badfx
	then cyoa-text!
	-6 trunk-food+
	medicalREV medical++ clear-cyoa
;

cyoa-choice: trade-medical-group
	($ "Die gesamte Gruppe erhalt medizinische Schulung!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-medical-group! foreach-human-char clear-cyoa
;

cyoa: trade-medical-give
	solohuman if
		choosehuman trade-medical-train
	then;
	"Wer sollte die medizinische Ausbildung erhalten?" cyoa-text!
	' trade-medical-train cyoa-human-choice
;

cyoa-choice: trade-medical-coolit
	cpet? if
		($ cname .. " ' irgendwie schafft es etwas wie SAY IT DON'T SPRAY IT mit einer seltsamen Tierstimme zu sagen." $)
	else
		($ cname .. "  witzelte " .. "'SAG ES SPRUH ES NICHT" pbold .. "  zum Overall Mann." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Er nickt mit weiser Weisheit. Vielleicht hat er falsch gehort " .. chim .. "? Er fahrt fort unglaubliche medizinische Techniken zum Uberleben von Zombies zu lehren wie sie noch nie zuvor gesehen wurden." $) +crtext goodfx 3 for medical++ next cooled-it clear-cyoa
	else cool-it++
		($ "*YOU* DON'T SAY IT OR SPRAY IT! AAAAAAAARGH!" rbold .. "		Er ist wutend! " .. thegroup .. "  wird gezwungen das Camp zu verlassen." $) +crtext badfx quitmission
	then medicalREV
;

cyoa: trade-medicalt
	"EZ Medical College" cyoa-title!
	($ Thegroup .. "  entdeckt einen beunruhigenden und schmutzigen Van. Er hat ein Schild auf dem steht " .. "EZ MEDICAL COLLEGE" rbold .. "  hangt schief an der Hintertur.	Drinnen ist ein beunruhigender und schmutziger Typ in Overalls. " .. "UND? WER MOCHTE ETWAS UBER CHIRURGIE LERNEN?" pbold $) cyoa-text! basic-tone foodamt
	choice( "Gehen Sie vorerst" )choice
	trunk-food 6 < if
		($ "'Das ist nicht genug Nahrung um etwas uber Chirurgie zu lernen." $) +cr +text
	else
		choice( "Gib 6 Essen fur Training" )choice: trade-medical-give
		trade-train-pay? if
			choice( "Gib " .. trade-train-amt .. "  essen fur Gruppentraining" )choice:  trade-medical-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( "  nutzt Charme" )choice: trade-medical-charm
		then
		most-grating if 
			charchoice( "': SAG ES SPRUHE ES NICHT" fcoolit )choice: trade-medical-coolit
		then
;

// Mechanical

cyoa-choice: trade-mechanic-charm 
	charmroll if
		($ cname .. "  erhalt KOSTENLOSE Schulungen in der Kunst und Wissenschaft des Anti Zombie Engineerings!" $) cyoa-text! 
		cchar .mechanical@ 5 > if 
			($ "'Es hat sich nicht wirklich verbessert " .. chis .. " mechanisches Geschick, aber es war KOSTENLOS!" $) +crtext
		then		
		goodfx mechanicREV mechanic++ ' camp-charm ++
	else
		($ cname .. "  kommt versehentlich einfach nur gruselig ruber. 		" .. gHe .. "  wird gebeten zu gehen." $) cyoa-text! badfx
	then clear-cyoa
;

cyoa-choice: trade-mechanic-train
	cchar .mechanical@ 6 < if
		($ cname .. " bekommt einen Crashkurs in Reparatur, effektiven Barrikaden und anderen Anti Zombie Ingenieurwesen!" $) goodfx
	else
		($ cname .. " 'nichts Neues gelernt " .. cHe .. " allein dieses Wissen kann der Mechaniker mir lehren." $) badfx
	then cyoa-text!
	-6 trunk-food+
	mechanicREV mechanic++ clear-cyoa
;

cyoa-choice: trade-mechanic-group
	($ "Das gesamte Team erhalt Mechanik Ausbildung!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-mechanic-group! foreach-human-char clear-cyoa
;

cyoa-choice: trade-mechanic-coolit
	cpet? if
		($ cname .. " lasst den Mechaniker sehr laut fahren. In tiefem Ton." $)
	else
		($ cname .. "  witzelte " .. "'SAG ES SPRUH ES NICHT" pbold .. " dem Mechaniker zeigt." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Sie findet das hilfreich! Der Mechanikus verspricht, ihr eine intensive Kurs in alles, was sie wei, zu geben " .. cname .. " " $) +crtext 3 for mechanic++ next cooled-it clear-cyoa goodfx
	else cool-it++
		($ "Sie antwortet auf dies mit dem Graben in ihren Taschen nach einem Schraubenkopf und wirft es dann auf " .. cname .. ". Sie tut das weiter, ohne etwas zu sagen, bis " .. thegroup .. "  wird gezwungen das Camp zu verlassen." $) +crtext badfx quitmission
	then mechanicREV
;

cyoa: trade-mechanic-give
	solohuman if
		choosehuman trade-mechanic-train
	then;
	"'Wer soll den Mechanik Unterricht erhalten?" cyoa-text!
	' trade-mechanic-train cyoa-human-choice
;

cyoa: trade-mechanic
	"Mechanik Genie" cyoa-title!
	($ Thegroup .. " 	trifft eine Frau die einen olverschmierten Overall tragt." .. "'Ich kann dir helfen besser im Reparieren zu werden. Das ist eine wirklich praktische Fahigkeit. Konnte dir das Leben retten." pbold .. "	Eine hohe Mechanikerfertigkeit ermoglicht es dir dein Auto zu reparieren." $) cyoa-text! basic-tone foodamt
	choice( "Gehen Sie vorerst" )choice
	trunk-food 6 < if
		($ "'Das ist nicht genug Nahrung um sich eine Ausbildung leisten zu konnen." $) +cr +text
	else
		choice( "Gib 6 Essen fur Training" )choice: trade-mechanic-give
		trade-train-pay? if
			choice( "Gib " .. trade-train-amt .. "  essen fur Gruppentraining" )choice:  trade-mechanic-group
		then
	then
		most-charming camp-charm 1 < and if
			charchoice( "  nutzt Charme" )choice: trade-mechanic-charm
		then
		most-grating if 
			charchoice( "': SAG ES SPRUHE ES NICHT" fcoolit )choice: trade-mechanic-coolit
		then
;

} }


