uses base.df
uses charfilt.df
uses charstats.df
uses road.df

cyoa{ road{

// if you have to do two things in a foreach-team-char word, use dup between each
// The above was wrong, I had to remove the second dup from everything
: trade-shoot-group! dup .shootingREV .shooting++ ;
: trade-strength-group! dup .strengthREV .strength++ ;
: trade-fitness-group! dup .fitnessREV .fitness++ ;
: trade-medical-group! dup .medicalREV .medical++ ;
: trade-mechanic-group! dup .mechanicREV .mechanic++ ;

: trade-train-amt team-count 3 * 3 + ; 
// tried to use numhums instead of team-count but it didn't work right. The option wouldn't appear for group training.
: trade-train-pay? trunk-food trade-train-amt 1 - > notsolo and ; // previously notsolo and
// numhums 1 > was tried for above but made it buggy
: trade-train-pay trade-train-amt -1 * trunk-food+ ;

// Shooting

cyoa-choice: trade-shoot-charm 
	charmroll if
		($ cname .. "  ottiene addestramento GRATUITO con le armi da fuoco! " .. cHe .. "  gia si sente un tiratore piu stabile." $) cyoa-text! 
		cchar .shooting@ 5 > if 
			($ "'In realta non ha aiutato " .. chis .. "  con il tiro, ma era GRATIS!" $) +crtext
		then 
		shootingREV shooting++ goodfx
	else
		($ cname .. "  accidentalmente sembra solo inquietante. 		" .. gHe .. "  viene chiesto di andarsene." $) cyoa-text! badfx
	then
;

cyoa-choice: trade-shoot-train
	cchar .shooting@ 6 < if
		($ cname .. "  impara qualche nuovo trucco con le armi da fuoco! Zombie fate attenzione." $) goodfx
	else
		($ cname .. " ' non ha imparato davvero nulla di nuovo. " .. cHe .. "  aveva gia raccolto questi trucchi su " .. chis .. " ora." $) badfx
	then cyoa-text!
	-6 trunk-food+
	shootingREV shooting++
;

cyoa-choice: trade-shoot-group
	($ "Il gruppo intero riceve addestramento alle armi da fuoco!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-shoot-group! foreach-human-char
;

cyoa: trade-shoot-give
	solohuman if
		choosehuman trade-shoot-train
	then;
	"Chi dovrebbe ricevere laddestramento nel maneggio delle armi da fuoco?" cyoa-text!
	' trade-shoot-train cyoa-human-choice
;

cyoa-choice: trade-shoot-coolit
	cpet? if
		($ cname .. " scored a " $)
	else
		($ cname .. " " .. "'DILLO NON SPRUZZARLO" pbold .. " al maestro di tiro." $) 
	then cyoa-text!
	cool-it-7 if
		($ "	Un miracolo accade: decide di non sparare!" .. "You seem like you need all the help you can get..." pbold .. "		Insegna i suoi trucchi segreti con le armi a " .. cname .. "!
		" .. cname .. " " rbold $) goodfx 6 cchar .shooting! cooled-it
	else cool-it++
		($ "La sua reazione e un breve disgusto." .. "'		Oh. Gia, ok. Sei uno di quei tipi, eh?" pbold .. "		Si rimette il fucile in spalla e se ne va." $) badfx
	then +crtext shootingREV
;

cyoa: trade-shoot
	"Istruttrice di tiro" cyoa-title!
	($ Thegroup .. "  trova una donna armata di fucile. Afferma di aver addestrato altri nel tiro competitivo. Ha un sacco di trucchi per mantenere la mira stabile mentre ci si muove e persino alcuni tiri multipli " .. "'Gli zombi sono bersagli lenti. E davvero facile!" pbold $) cyoa-text! basic-tone
	trunk-food 6 < if  
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		choice( "Dai 6 cibo per laddestramento" )choice: trade-shoot-give
		trade-train-pay? if
			choice( "Dai " .. trade-train-amt .. "  cibo per laddestramento di gruppo" )choice: trade-shoot-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-shoot-charm
		then
		most-grating if 
			charchoice( "': DILLO NON SPRUZZARLO" fcoolit )choice: trade-shoot-coolit
		then
		choice( "Vai via" )choice
;

// Strength - Made this one a little different for Jon's request
// Can adjust it to cut out different things if you have all options available, currently you lose the option to just "Via" in that case.

cyoa-choice: trade-strength-pose 
	cchar .strength 6 > if
		($ cname .. " flette una volta, usando solo meta della sua forza. Ma la gara e gia decisa." .. "IMPOSSIBILE! QUESTO E IMPOSSIBILE!" fbold .. " urla lAllenatore di Forza, con una voce stranamente acuta." .. "'SEI TU IL FORZUTO CHE ERA STATO PROMESSO?" fbold .. " e poi si trasforma in pietra e, pochi istanti dopo, si frantuma in un milione di frammenti." $) cyoa-text! goodfx
		morale2+
	then;
	strengthroll if
		($ cname .. " vince la gara di pose!" $) cyoa-text! goodfx
		cpet? if
			"Era piuttosto difficile vincere una gara di flessioni come animale!" +crtext
		then
		strengthREV strength++ morale++
	else
		($ cname .. " perde la gara di pose." .. cHe .. "  sente " .. "GRANDE VERGOGNA." rbold $) cyoa-text! badfx
		morale2-
	then
;

cyoa-choice: trade-strength-charm 
	charmroll if
		($ cname .. " riceve allenamento di forza GRATIS " .. cHe .. " 'sente gia chiaramente un pompaggio, come dicevano i bodybuilder prima di essere tutti spazzati via." $) cyoa-text!
		cchar .strength@ 5 > if 
		($ "'In realta non e migliorato " .. chis .. " forza, ma era GRATIS!" $) +crtext
		then
		strengthREV strength++ goodfx
		
	else
		($ cname .. "  accidentalmente sembra solo inquietante. 		" .. gHe .. "  viene chiesto di andarsene." $) cyoa-text! badfx
	then
;

cyoa-choice: trade-strength-train
	cchar .strength@ 6 < if
		($ cname .. "  si e tutto gonfiato dal programma di allenamento di forza!" $) goodfx
	else
		($ cname .. "  non e rimasto impressionato da quel piccolo allenamento insignificante. " .. cHe .. "  ha bisogno di trovare una routine migliore!" $) badfx
	then cyoa-text!
	-6 trunk-food+
	strengthREV strength++
;

cyoa-choice: trade-strength-group
	($ "Lintero gruppo riceve lallenamento di forza!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-strength-group! foreach-human-char
;

cyoa: trade-strength-give
	solohuman if
		choosehuman trade-strength-train
	then;
	"Chi dovrebbe ottenere questo INTENSO allenamento di forza?" cyoa-text!
	' trade-strength-train cyoa-human-choice
;

cyoa-choice: trade-strength-coolit
	cpet? if
		($ cname .. "  scoreggia davvero rumorosamente allallenatore di forza." $)
	else
		($ cname .. " " .. "'DILLO NON SPRUZZARLO" pbold .. "  allallenatore di forza." $) 
	then cyoa-text!
	cool-it-7 if
		($ "'SI! QUESTO E L'ATTEGGIAMENTO DI CUI HAI BISOGNO PER DIVENTARE UN BODYBUILDER AL TOP! RICOSTRUIREMO LO SPORT! SI!" fbold .. "		Prende " .. cname .. "  come suo studente migliore, per diventare ENORME a un ritmo mentale distruttivo!		" .. cname .. " " rbold $) goodfx 6 cchar .strength! cooled-it
	else cool-it++
		($ "'Non lo prende bene." .. "'		FUORI DI QUI IDIOTA! NON MERITI DI DIVENTARE ENORME!" fbold .. "		Continua a urlare mentre " .. thegroup .. " foglie." $) badfx
	then +crtext strengthREV
;

cyoa: trade-strength
	"Attrezzo per allenamento della forza" cyoa-title!
	($ Thegroup .. "  incontra un vecchio ma molto in forma uomo in tuta e felpa grigie abbinate. Urla qualcosa a proposito di " .. "AUMENTARE MASSA E VOLUME " fbold .. "  con un " .. "INTENSIVO PROGRAMMA DI FORZA!" fbold .. "agita le braccia verso alcuni oggetti pesanti sparsi in giro." $) cyoa-text! basic-tone
	trunk-food 6 < if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		choice( "Dai 6 cibo per laddestramento" )choice: trade-strength-give
		trade-train-pay? if
			choice( "Dai " .. trade-train-amt .. "  cibo per laddestramento di gruppo" )choice: trade-strength-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-strength-charm
		then
		strongest .strength 3 > if
			strongest charchoice( "  dichiara una gara di pose!" )choice: trade-strength-pose
		then
		most-grating if 
			charchoice( "': DILLO NON SPRUZZARLO" fcoolit )choice: trade-strength-coolit
		then
		choice( "Vai via" )choice
;

// Fitness

cyoa-choice: trade-fitness-charm 
	charmroll if
		($ cname .. "  ottiene un allenamento di fitness GRATUITO! " .. cHe .. "  suda per lesercizio intenso!" $) cyoa-text! 
		cchar .fitness@ 5 > if 
			($ "'In realta non e migliorato " .. chis .. "  fitness, ma era GRATIS!" $) +crtext
		then
		goodfx fitnessREV fitness++
	else
		($ cname .. "  accidentalmente sembra solo inquietante. 		" .. gHe .. "  viene chiesto di andarsene." $) cyoa-text! badfx
	then
;

cyoa-choice: trade-fitness-train
	cchar .fitness@ 6 < if
		($ cname .. "  fa un sacco di sudore per il programma di fitness!" $) goodfx
	else
		($ cname .. " ' non ha nemmeno sudato! L'istruttore di fitness e confuso, persino lui si e stancato un po'." $) badfx
	then cyoa-text!
	-6 trunk-food+
	fitnessREV fitness++
;

cyoa-choice: trade-fitness-group
	($ "Il gruppo intero riceve allenamento fitness!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-fitness-group! foreach-human-char
;

cyoa: trade-fitness-give
	solohuman if
		choosehuman trade-fitness-train
	then;
	"Chi vuole esercizio faticoso per il bene della forma fisica?" cyoa-text!
	' trade-fitness-train cyoa-human-choice
;

cyoa-choice: trade-fitness-coolit
	cpet? if
		($ cname .. " score  point" $)
	else
		($ cname .. " " .. "'DILLO NON SPRUZZARLO" pbold .. " al istruttore di fitness." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Ecco quello che mi piace sentire! Sei pronto per la MIRACLE FITNESS ROUTINE!" pbold .. "e' probabile che lei abbia appena sentito " .. cname .. " 	In italian  sbagliato. Segue una serie incredibile e allavanguardia di calistenica.		" .. cname .. " " rbold $) goodfx 6 cchar .fitness! cooled-it
	else cool-it++
		($ "La sua reazione e per lo piu di delusione." .. "		Si, beh, divertiti a farti mangiare dagli zombi." pbold .. "'		Fa jogging all'indietro finche non e fuori dalla vista. Poi se n'e andata." $) badfx
	then +crtext fitnessREV
;

cyoa: trade-fitness
	"Istruttore di fitness" cyoa-title!
	($ Thegroup .. "  trova una donna vestita con fasce sudore, scaldamuscoli e abiti da ginnastica. Tutto al neon brillante.	" .. "Solo i piu in forma sopravviveranno in questo mondo pieno di zombi! Posso aiutarti a metterti in forma, velocemente!" pbold .. "'	Ha continuato a correre sul posto per tutto questo tempo." $) cyoa-text! basic-tone
	trunk-food 6 < if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		choice( "Dai 6 cibo per laddestramento" )choice: trade-fitness-give
		trade-train-pay? if
			choice( "Dai " .. trade-train-amt .. "  cibo per laddestramento di gruppo" )choice:  trade-fitness-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-fitness-charm
		then
		most-grating if 
			charchoice( "': DILLO NON SPRUZZARLO" fcoolit )choice: trade-fitness-coolit
		then
		choice( "Vai via" )choice
;

// Medical

cyoa-choice: trade-medical-charm 
	charmroll if
		($ cname .. "  ottiene la formazione medica GRATUITA!" $) cyoa-text! 
		cchar .medical@ 5 > if 
			($ "'In realta non e migliorato " .. chis .. "  conoscenze mediche, ma era GRATIS!" $) +crtext
		then		
		goodfx medicalREV medical++
	else
		($ cname .. "  accidentalmente viene fuori come inquietante, anche per gli standard dellEZ Medical College: Creepy Murder Shack Campus. 		" .. gHe .. "  viene chiesto di andarsene." $) cyoa-text! badfx
	then
;

cyoa-choice: trade-medical-train
	cchar .medical@ 6 < if
		($ cname .. "  impara nuove cose sullassistenza medica di emergenza dallesperto uomo sporco." $) goodfx
	else
		($ "Sebbene il professore sporco fosse un grande insegnante, " .. cname .. " ' non ha imparato nulla di nuovo." $) badfx
	then cyoa-text!
	-6 trunk-food+
	medicalREV medical++
;

cyoa-choice: trade-medical-group
	($ "Lintero gruppo riceve formazione medica!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-medical-group! foreach-human-char
;

cyoa: trade-medical-give
	solohuman if
		choosehuman trade-medical-train
	then;
	"Chi dovrebbe ricevere la formazione medica?" cyoa-text!
	' trade-medical-train cyoa-human-choice
;

cyoa-choice: trade-medical-coolit
	cpet? if
		($ cname .. " 'qualche modo riesce a dire qualcosa come SAI DI MENON LO SPIRA in una strana voce da animale." $)
	else
		($ cname .. " " .. "'DILLO NON SPRUZZARLO" pbold .. " al uomo alle overalls." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Gli capita di nodare con saggezza. Forse ha sbagliato " .. chim .. "? Egli inizia a insegnare tecniche mediche di sopravvivenza zombie incredibili le quali non sono state viste mai prima." .. "
		" .. cname .. " " rbold $) goodfx 6 cchar .medical! cooled-it
	else cool-it++
		($ "*YOU* DON'T SAY IT OR SPRAY IT! AAAAAAAARGH!" rbold .. "		E infuriato! " .. thegroup .. " deve andare via." $) badfx
	then +crtext medicalREV
;

cyoa: trade-medicalt
	"Collegio Medico Facile" cyoa-title!
	($ Thegroup .. " scopre una capanna insolitamente sporca e disgustosa. Sulla porta ce un cartello che dice " .. "COLLEGIO MEDICO FACILE" rbold .. "  appeso storto sopra la porta. Dentro ce un tizio inquietante e sporco in tuta." .. "BENE? CHI VUOLE IMPARARE LA CHIRURGIA?" pbold $) cyoa-text! basic-tone
	trunk-food 6 < if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		choice( "Dai 6 cibo per laddestramento" )choice: trade-medical-give
		trade-train-pay? if
			choice( "Dai " .. trade-train-amt .. "  cibo per laddestramento di gruppo" )choice:  trade-medical-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-medical-charm
		then
		most-grating if 
			charchoice( "': DILLO NON SPRUZZARLO" fcoolit )choice: trade-medical-coolit
		then
		choice( "Vai via" )choice
;

// Mechanical

cyoa-choice: trade-mechanic-charm 
	charmroll if
		($ cname .. "  ottiene addestramento GRATUITO nellarte e nella scienza dellingegneria anti zombie!" $) cyoa-text! 
		cchar .mechanical@ 5 > if 
			($ "'In realta non e migliorato " .. chis .. "  abilita meccanica, ma era GRATIS!" $) +crtext
		then		
		goodfx mechanicREV mechanic++
	else
		($ cname .. "  accidentalmente sembra solo inquietante. 		" .. gHe .. "  viene chiesto di andarsene." $) cyoa-text! badfx
	then
;

cyoa-choice: trade-mechanic-train
	cchar .mechanical@ 6 < if
		($ cname .. "  ottiene un corso accelerato di riparazione, barricate efficaci e altra ingegneria anti zombie!" $) goodfx
	else
		($ cname .. " ' non ha imparato niente di nuovo. " .. cHe .. "  era gia a conoscenza di tutte le cose che il meccanico poteva insegnare." $) badfx
	then cyoa-text!
	-6 trunk-food+
	mechanicREV mechanic++
;

cyoa-choice: trade-mechanic-group
	($ "Lintero gruppo riceve formazione da meccanico!" $) cyoa-text! goodfx
	trade-train-pay someicon
	' trade-mechanic-group! foreach-human-char
;

cyoa-choice: trade-mechanic-coolit
	cpet? if
		($ cname .. "  scoreggia davvero rumorosamente al meccanico, a bassa intensita." $)
	else
		($ cname .. " " .. "'DILLO NON SPRUZZARLO" pbold .. "  al meccanico." $) 
	then cyoa-text!
	cool-it-7 if
		($ "Lo trova esilarante! Delizioso, il meccanico promette di dare " .. cname .. "  un corso accelerato intenso in tutto cio che sa." .. "
		" .. cname .. " " rbold $) goodfx 6 cchar .mechanical! cooled-it 
	else cool-it++
		($ "Lei risponde a questo scavando nelle sue tasche per un bullone, quindi lanciandolo a " .. cname .. ". Continua a farlo, senza dire una parola, fino a " .. thegroup .. " deve andare via." $) badfx
	then +crtext mechanicREV
;

cyoa: trade-mechanic-give
	solohuman if
		choosehuman trade-mechanic-train
	then;
	"'Chi dovrebbe ricevere la formazione del meccanico?" cyoa-text!
	' trade-mechanic-train cyoa-human-choice
;

cyoa: trade-mechanic
	"Meccanico Savant" cyoa-title!
	($ Thegroup .. "  incontra una donna che indossa una tuta sporca di olio.	" .. "'Posso aiutarti a migliorare la riparazione e la costruzione di cose. E una vera abilita pratica. Potrebbe salvarti la vita." pbold .. "	Se non altro, renderebbe piu facili le riparazioni delle auto." $) cyoa-text! basic-tone
	trunk-food 6 < if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		choice( "Dai 6 cibo per laddestramento" )choice: trade-mechanic-give
		trade-train-pay? if
			choice( "Dai " .. trade-train-amt .. "  cibo per laddestramento di gruppo" )choice:  trade-mechanic-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-mechanic-charm
		then
		most-grating if 
			charchoice( "': DILLO NON SPRUZZARLO" fcoolit )choice: trade-mechanic-coolit
		then
		choice( "Vai via" )choice
;

// Army Surplus

cyoa-choice: trade-army-1
	($ Thegroup .. "  lascia cadere del cibo dalla finestra e ne esce una granata. Cio potrebbe causare molti danni!	" .. "Aspetta, la spilla era ancora inserita?" pbold $) cyoa-text! basic-tone
	1 WEAPON_GRENADE trunk.weapon+ -4 trunk-food+ someicon
;

cyoa-choice: trade-army-2
	($ Thegroup .. "  lascia cadere del cibo dalla finestra e una serie di granate cadono una alla volta. Queste possono tornare utili!	" .. "'Per favore non farne cadere nessuno qui dentro." pbold $) cyoa-text! basic-tone
	3 WEAPON_GRENADE trunk.weapon+ -12 trunk-food+ someicon
;

cyoa-choice: trade-army-3
	($ Thegroup .. "  lascia cadere un sacco di cibo dalla finestra. Qualcuno spinge indietro un uzi! Puo spruzzare proiettili a una velocita incredibile! Attento, anche un tiratore esperto avra problemi con il rinculo.	" .. "Divertiti! Inoltre per favore vattene." pbold $) cyoa-text! basic-tone
	1 WEAPON_UZI trunk.weapon+ -15 trunk-food+ someicon
;

cyoa-choice: trade-army-4
	($ Thegroup .. " ' introduce una grande quantita di cibo nella finestra. C'e una pausa, poi qualcuno oltre la porta inizia a spingere indietro una dozzina di granate.	" .. "Grazie per tutto il cibo! Buona fortuna la fuori!" pbold $) cyoa-text! goodfx
	1 WEAPON_AK47 trunk.weapon+ -25 trunk-food+ someicon
;

cyoa-choice: trade-army-5
	($ Thegroup .. " ' introduce una grande quantita di cibo nella finestra. C'e una pausa, poi qualcuno oltre la porta inizia a spingere indietro una dozzina di granate.	" .. "Stai molto attento con questi!" pbold $) cyoa-text! goodfx
	12 WEAPON_GRENADE trunk.weapon+ -40 trunk-food+ someicon
;

cyoa-choice: trade-army-6
	($ Thegroup .. "  inserisce una grande quantita di cibo nella finestra. Qualcuno dallaltra parte della porta si sforza di spingere un lanciafiamme attraverso la piccola finestra.	" .. "Accendili!" pbold $) cyoa-text! goodfx
	1 WEAPON_FLAMETHROWER trunk.weapon+ -60 trunk-food+ someicon
;

cyoa-choice: trade-army-7
	($ Thegroup .. " ' inserisce lentamente un carico di cibo per auto nella finestra. Si sentono rumori di raschiamento e poi una canna di mitragliatrice viene spinta fuori dall'oscurita. Il telaio della finestra si rompe a causa delle dimensioni della mitragliatrice mentre viene incastrata.	" .. "Grazie mille! Ora posso nascondermi qui dentro per mesi!" pbold $) cyoa-text! goodfx
	1 WEAPON_MINIGUN trunk.weapon+ -75 trunk-food+ someicon
;

cyoa: trade-army
	"Forte di Surplus Militare" cyoa-title!
	($ Thegroup .. " ' trova un negozio di surplus militare, coperto di barricate. E chiuso a chiave. C'e un cartello con i prezzi delle armi su un muro all'esterno, accanto a una piccola finestra.	" .. "Lascia cadere il cibo nella finestra!" pbold .. "  dice una piccola voce nelloscurita." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	trunk-food 5 < if
		($ "'Non c'e abbastanza cibo per comprare qualcosa che stanno vendendo! " .. Thegroup .. "  deve andarsene." $) +crtext badfx
	else
		trunk-food 74 > if
			choice( "Minigun per 75 cibo" )choice: trade-army-7
		then
		trunk-food 59 > if
			choice( "Lanciafiamme per 60 cibo" )choice: trade-army-6
		then
		trunk-food 39 > if
			choice( "12 granate per 40 cibo" )choice: trade-army-5
		then
		trunk-food 24 > if
			choice( "Fucile dassalto per 25 cibo" )choice: trade-army-4
		then
		trunk-food 14 > if
			choice( "Uzi per 15 cibo" )choice: trade-army-3
		then
		trunk-food 11 > if
			choice( "3 granate per 12 cibo" )choice: trade-army-2
		then
		trunk-food 3 > if
			choice( "1 granata per 4 cibo" )choice: trade-army-1
		then
	then
;

// Shotgun seller

cyoa-choice: trade-shotgun-coolit
	cpet? if
		($ cname .. "  scorreggia proprio di fronte al ragazzo con il fucile." $)
	else
		($ cname .. "  dice al ragazzo con il fucile di " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "Questo gli causa una sorta di crisi emotiva.		" .. "'Hai ragione! Cosa sto facendo della mia vita?!" pbold .. "		Lui da " .. cname .. " " $) +crtext goodfx
		50 %chance if "fucile a pompa automatico e un mucchio di cartucce!" 1 WEAPON_AUTOSHOT trunk.weapon+ else "fucile a pompa a canna rigata e un mucchio di cartucce!" 1 WEAPON_SLUG trunk.weapon+ then +text
		// used to also give a shotgun, a rifled slug shotgun, and the BIG DAWG. Too much. Busting down the value of mega coolit to about 40-50 food or so instead of like 150.
		50 trunk-shotgun-shell+ cooled-it
	else cool-it++
		($ "Il venditore e davvero infastidito da questo.		" .. "'Sto cercando di guadagnarmi da vivere qui!" pbold .. "		Quindi rifiuta di vendere " .. thegroup .. "  qualsiasi cosa." $) badfx +crtext 
	then attitudeREV witsREV
;

cyoa-choice: trade-shotgun-4
	($ Thegroup .. "  acquista il " .. "BIG DAWG" rbold .. "'. E un fucile a pompa personalizzato unico nel suo genere! Ogni colpo e una massiccia esplosione di schizzi di zombi." $) cyoa-text! goodfx
	1 WEAPON_DAWG trunk.weapon+ -50 trunk-food+ someicon charm-shotgun-shell
;

cyoa-choice: trade-shotgun-3
	($ Thegroup .. "  acquista un fucile a pompa a canna rigata. Spara una lumaca pesante e solida invece di pallini. Un tiratore esperto potrebbe distruggere una solida linea di zombi con ogni colpo!" $) cyoa-text! goodfx
	1 WEAPON_SLUG trunk.weapon+ -40 trunk-food+ someicon charm-shotgun-shell
;

cyoa-choice: trade-shotgun-2
	($ Thegroup .. "  acquista un fucile a pompa automatico. Questa arma spara molto piu velocemente di un normale fucile a pompa, anche se la potenza di un singolo colpo e un po piu debole." $) cyoa-text! goodfx
	1 WEAPON_AUTOSHOT trunk.weapon+ -30 trunk-food+ someicon charm-shotgun-shell
;

cyoa-choice: trade-shotgun-1
	($ Thegroup .. "  acquista un fucile a pompa. Il venditore ambulante lancia dentro alcuni gusci gratis!" $) cyoa-text! goodfx
	1 WEAPON_SHOTGUN trunk.weapon+ -10 trunk-food+ 15 trunk-shotgun-shell+ someicon charm-shotgun-shell
;

cyoa: trade-shotgun
	"Venditore ambulante di fucili a pompa" cyoa-title!
	($ Thegroup .. "  si ferma per un po in un piccolo insediamento. Nessuno si fida degli estranei, tutti sembrano molto freddi e silenziosi. Solo una voce si sente rimbombare:" .. "SHOTGUNS FOR SALE! SHOTGUNS FOR SAAAALE!" pbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-grating if 
		charchoice( "  gli dice di CALMARSI" fcoolit )choice: trade-shotgun-coolit
	then
	trunk-food 5 < if
		($ "'Non c'e abbastanza cibo per comprare nulla! Per pieta, il venditore ambulante da " .. thegroup .. "  alcune cartucce per fucile a pompa gratuite." $) +crtext goodfx 5 trunk-shotgun-shell+
	else
		trunk-food 49 > if
			choice( "BIG DAWG per 50 cibi" )choice: trade-shotgun-4
		then
		trunk-food 39 > if
			choice( "Fucile a pompa Slug per 40 cibi" )choice: trade-shotgun-3
		then
		trunk-food 29 > if
			choice( "Autoshotty per 30 cibi" )choice: trade-shotgun-2
		then
		trunk-food 14 > if
			choice( "75 conchiglie per 15 cibo" )choice: trade-shotgun-shell-15
		then
		trunk-food 9 > if
			choice( "Fucile a pompa per 10 cibo" )choice: trade-shotgun-1
		then
		trunk-food 9 > if
			choice( "50 conchiglie per 10 cibo" )choice: trade-shotgun-shell-10
		then
		trunk-food 4 > if
			choice( "25 conchiglie per 5 cibo" )choice: trade-shotgun-shell-5
		then

	then
;

// Rifle Collector

cyoa-choice: trade-rifle-coolit
	cpet? if
		($ cname .. "  da unocchiata alla collezione e poi rotola " .. chis .. "  occhi." $)
	else
		($ cname .. "  dice alla donna amichevole di " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "Lei annuisce in segno di accordo.		" .. "Si, penso che la mia collezione stia diventando troppo grande. Ti dispiace se me ne togli un po di mano?" pbold .. "		Il collezionista da " .. cname .. "  un fucile da caccia con mirino e un " .. "fucile dassalto." rbold $) goodfx
		1 WEAPON_HUNTING trunk.weapon+ 1 WEAPON_AK47 trunk.weapon+ cooled-it
	else cool-it++
		($ "Il collezionista di fucili sembra ferito da questo.		" .. "I... I am cool..." pbold .. "		Poi dice " .. thegroup .. " a lasciare." $) badfx
	then +crtext attitudeREV witsREV
;

cyoa-choice: trade-rifle-4
	($ Thegroup .. "  acquista il " .. "MINIGUN" rbold .. ". Il collezionista sembra felice di venderlo. 	" .. "Well, technically it's not a rifle! And I couldn't figure out how to hang it on my wall, so..." pbold $) cyoa-text! goodfx
	1 WEAPON_MINIGUN trunk.weapon+ -65 trunk-food+ someicon charm-rifle-shell
;

cyoa-choice: trade-rifle-3
	($ Thegroup .. " acquista un potente fucile da caccia. Il collezionista vi fa un ottimo prezzo, poiche ne ha gia parecchi.	" .. "La cosa grandiosa dei fucili da caccia e che un colpo puo far fuori molti zombie. Il mio record e di 7 in un colpo solo!" pbold $) cyoa-text! goodfx
	1 WEAPON_HUNTING trunk.weapon+ -20 trunk-food+ someicon charm-rifle-shell
;

cyoa-choice: trade-rifle-2
	($ Thegroup .. " acquista un fucile dassalto. Quasi potente quanto un fucile da cowboy a colpo, e spara molto piu velocemente.	" .. "'Personalmente preferisco i fucili a colpo singolo. Gli automatici usano troppe munizioni e non perforano altrettanto bene." pbold $) cyoa-text! goodfx
	1 WEAPON_AK47 trunk.weapon+ -25 trunk-food+ someicon charm-rifle-shell
;

cyoa-choice: trade-rifle-1
	($ Thegroup .. " acquista un fucile da cowboy. Il collezionista aggiunge gratis delle munizioni, insieme a un secondo fucile!	" .. "I fucili da cowboy sono ottimi per i principianti. Facili da maneggiare, divertenti da sparare. Ne trovo un sacco, quindi prendine due!" pbold $) cyoa-text! goodfx
	2 WEAPON_RIFLE trunk.weapon+ -10 trunk-food+ 20 trunk-rifle-shell+ someicon charm-rifle-shell
;

cyoa: trade-rifle
	"Collezionista di fucili" cyoa-title!
	($ Thegroup .. " si ferma per un po in un condominio. E stato trasformato in un piccolo forte da un gruppo di sopravvissuti pacifici.	Uno vi invita a dare unocchiata alla sua collezione di fucili.	" .. "'Ne ho cosi tanti che ne vorrei vendere uno!" pbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-grating if 
		charchoice( " le dice di STARE CALMA" fcoolit )choice: trade-rifle-coolit
	then
	trunk-food 5 < if
		($ "'Non c'e abbastanza cibo per comprarne! Per essere gentile, il collezionista regala " .. thegroup .. " alcune munizioni gratuite per fucile." $) +crtext goodfx 10 trunk-rifle-shell+
	else
		trunk-food 64 > if
			choice( "Minigun per 65 cibo" )choice: trade-rifle-4
		then
		trunk-food 24 > if
			choice( "Fucile dassalto per 25 cibo" )choice: trade-rifle-2
		then
		trunk-food 19 > if
			choice( "Hunting Rifle" )choice: trade-rifle-3
		then
		trunk-food 14 > if
			choice( "90 munizioni per fucile per 15 cibo" )choice: trade-rifle-shell-15
		then
		trunk-food 9 > if
			choice( "Fucile da cowboy per 10 cibo" )choice: trade-rifle-1
		then
		trunk-food 9 > if
			choice( "60 munizioni per fucile per 10 cibo" )choice: trade-rifle-shell-10
		then
		trunk-food 4 > if
			choice( "30 munizioni per fucile per 5 cibo" )choice: trade-rifle-shell-5
		then
	then
;

// Weapon Fanatic

cyoa-choice: trade-fanatic-coolit
	cpet? if
		($ cname .. "  dice la frase " .. "CALMA" pbold .. "  tramite peti! Incredibile!" $)
	else
		($ cname .. "  dice alla donna fanatica di " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "'In qualche modo, e deliziata da questo.		" .. "WHOA!	WHOAAAAAAA!" rbold .. "		Il commerciante da " .. cname .. "  quasi lintero stock. 8 molotov, un parchimetro e un " .. "motosega." rbold $) goodfx +crtext
		1 WEAPON_CHAINSAW trunk.weapon+ 1 WEAPON_PARKING trunk.weapon+ 8 WEAPON_MOLOTOV trunk.weapon+ cooled-it
	else cool-it++
		($ "Il commerciante di armi e furioso per questo.		" .. "CALMARVI? CALMARVI??! PERDENTI CALMATEVI!!		" rbold .. Thegroup .. "  si rende conto che questa era una pessima idea! Il commerciante segnala al resto del suo gruppo di attaccare!" $) +crtext bitefx rob-megafail
	then attitudeREV witsREV
;

cyoa-choice: trade-fanatic-1
	($ Thegroup .. "  acquista un paio di molotov cocktail.	" .. "Un piccolo fuoco puo fare molta strada!" rbold $) cyoa-text! goodfx
	2 WEAPON_MOLOTOV trunk.weapon+ -5 trunk-food+ someicon charm-gas
;
cyoa-choice: trade-fanatic-2
	($ Thegroup .. "  acquista cinque molotov cocktail.	" .. "In caso di dubbio, brucia tutto!!" rbold $) cyoa-text! goodfx
	5 WEAPON_MOLOTOV trunk.weapon+ -10 trunk-food+ someicon charm-gas
;
cyoa-choice: trade-fanatic-4
	($ Thegroup .. "  acquista otto molotov cocktail.	" .. "'Non usarli tutti in un posto!" rbold $) cyoa-text! goodfx
	8 WEAPON_MOLOTOV trunk.weapon+ -15 trunk-food+ someicon charm-gas
;
cyoa-choice: trade-fanatic-3
	($ Thegroup .. " ' acquista un parchimetro? E molto pesante.	" .. "'Lo abbiamo strappato dal terreno! Ecco come possiamo trasferire i risparmi a te!" rbold $) cyoa-text! goodfx
	1 WEAPON_PARKING trunk.weapon+ -10 trunk-food+ someicon
;
cyoa-choice: trade-fanatic-5
	($ Thegroup .. "  acquista una motosega! Converte la benzina di scorta in distruzione di zombi.	" .. "Hahaha! PERFETTO! Falli a pezzi!" rbold $) cyoa-text! goodfx
	1 WEAPON_CHAINSAW trunk.weapon+ -20 trunk-food+ someicon charm-gas
;
cyoa-choice: trade-fanatic-6
	($ Thegroup .. "  acquista un lanciafiamme! Cerca di non sparare ai membri del tuo team con esso.	" .. "Aaaaaaa! Looks GREAT on you!!" rbold $) cyoa-text! goodfx
	1 WEAPON_FLAMETHROWER trunk.weapon+ -50 trunk-food+ someicon charm-gas
;

// chainsaw 40 - flamethrower 100 - molotovs 2 5 10 for 5 10 20 - 15 parking meter
cyoa: trade-fanatic
	"Armi di carneficina" cyoa-title!
	($ Thegroup .. " ' inciampa nel campo di un grande gruppo di persone intimidatorie. Sono vestiti da qualche parte tra una banda di motociclisti e un film post apocalittico degli anni '80. Una donna dall'aspetto particolarmente intenso si offre di venderti un'arma di scorta. " .. "Porto solo le COSE MIGLIORI!" rbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-grating if 
		charchoice( " le dice di STARE CALMA" fcoolit )choice: trade-fanatic-coolit
	then
	trunk-food 5 < if
		($ "'Non ci sono abbastanza cibo per acquistare nessuno! Il venditore regala una molotov gratis a " .. thegroup .. ", solo per promuovere la distruzione di zombie." $) +crtext goodfx 1 WEAPON_MOLOTOV trunk.weapon+
	else
		trunk-food 49 > if
			choice( "Fiammepiatta per 50 cibo" )choice: trade-fanatic-6
		then
		trunk-food 19 > if
			choice( "Maschio da filare per 20 cibo" )choice: trade-fanatic-5
		then
		trunk-food 14 > if
			choice( "8 molotov per 15 cibo" )choice: trade-fanatic-4
		then
		trunk-food 9 > if
			choice( "Parcheggio metro per 10 cibo" )choice: trade-fanatic-3
		then
		trunk-food 9 > if
			choice( "5 molotov per 10 cibo" )choice: trade-fanatic-2
		then
		trunk-food 4 > if
			choice( "2 molotov per 5 cibo" )choice: trade-fanatic-1
		then
	then
;

// Blade Master

: trade-blade-three 1 WEAPON_KNIGHT trunk.weapon+ 1 WEAPON_MACHETE2 trunk.weapon+ ;

cyoa-choice: trade-blade-rob 
	50 %chance if
		($ cname .. " ruba al Maestro Spada due delle sue armi migliori. Entrambe sono armi da melee potenti in loro modo." $) cyoa-text! goodfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		trade-blade-three rob-guilt
	else
		($ "Il Maestro Spada riesce a respingere " .. thegroup .. " utilizzando la sua conoscenza di spada e il mall katana." $) cyoa-text! bitefx rob-fail
	then aholeREV
;
cyoa-choice: trade-blade-coolit
	cpet? if
		($ cname .. " ' inizia a rosicchiare uno dei foderi del Blade Master, nonostante tutto." $)
	else
		($ cname .. "  dice al Blade Master di " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "Diventa pieno di dubbi su se stesso.		" .. "'La mia vita e una bugia! Rinuncero a questa storia di spade e iniziero a collezionare lanciafiamme." pbold .. "		Lex Blade Master regala " .. cname .. "  due delle sue migliori armi. Sono un robusto machete e un " .. "'Spada del cavaliere." rbold $) goodfx
		trade-blade-three cooled-it
	else cool-it++
		($ "Il Blade Master lo ignora.		Inizia a parlare di quanto siano fantastiche le spade e " .. thegroup .. "  non ha mai la possibilita di acquistare nulla." $) badfx
	then +crtext attitudeREV witsREV
;

cyoa-choice: trade-blade-4
	($ Thegroup .. "  acquista il " .. "POTENTE CLAYMORE" rbold .. ". Il claymore e lento e difficile da maneggiare, ma estremamente potente. A volte puo tagliare 4 zombi contemporaneamente!" $) cyoa-text! goodfx
	1 WEAPON_CLAYMORE trunk.weapon+ -35 trunk-food+ someicon
;

cyoa-choice: trade-blade-3
	($ Thegroup .. "  acquista il tipo di spada che un cavaliere del medioevo userebbe. Sara una grande arma! Puo facilmente colpire due zombi in un colpo solo." $) cyoa-text! goodfx
	1 WEAPON_KNIGHT trunk.weapon+ -25 trunk-food+ someicon
;

cyoa-choice: trade-blade-2
	($ Thegroup .. " ' acquista un machete molto resistente ma leggero. E abbastanza robusto da abbattere alberi, quindi non si rompera con l'uso del viaggio su strada." $) cyoa-text! goodfx
	1 WEAPON_MACHETE2 trunk.weapon+ -15 trunk-food+ someicon
;

cyoa-choice: trade-blade-1
	($ Thegroup .. " ' acquista una katana del tipo che otterresti in un centro commerciale. Sembra che potrebbe rompersi da un momento all'altro. Che fregatura." $) cyoa-text! goodfx
	1 WEAPON_OTAKU trunk.weapon+ -5 trunk-food+ someicon 
;

cyoa: trade-blade
	"Maestro delle Lame" cyoa-title!
	($ Thegroup .. " ' incontra un uomo che cammina lentamente lungo la strada. Porta molte spade in foderi o legate al suo zaino.	" .. "'Un giorno creero la migliore spada per affettare zombie mai vista! Devo pero capire come creare spade. Le ho appena trovate in giro. Te ne vendo una!" pbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-blade-rob
	then
	most-grating if 
		charchoice( "  gli dice di CALMARSI" fcoolit )choice: trade-blade-coolit
	then
	trunk-food 5 < if
		($ "'Non c'e abbastanza cibo per comprare qualcosa! Come consolazione il commerciante da " .. thegroup .. " ' una mannaia da macellaio." $) +crtext goodfx 1 WEAPON_CLEAVER trunk.weapon+
	else
		trunk-food 34 > if
			choice( "Potente Claymore per 35 cibo" )choice: trade-blade-4
		then
		trunk-food 24 > if
			choice( "'Spada del Cavaliere per 25 cibo" )choice: trade-blade-3
		then
		trunk-food 14 > if
			choice( "Machete Robusto per 15 cibo" )choice: trade-blade-2
		then
		trunk-food 4 > if
			choice( "Katana Economica per 5 cibo" )choice: trade-blade-1
		then
	then
;

// Axe Merchant

cyoa-choice: trade-axe-rob 
	40 %chance if
		($ cname .. "  rapisce il mercante di asce, che semplicemente resta li senza rispondere. " .. cname .. "  afferra lascia medievale ma e troppo spaventato per rubare unaltra cosa. " $) cyoa-text! 0.4 1100 tone
		notsolo if
			($ Theothersare .. "  anche spaventato." $) +text
		then morale2-all 1 WEAPON_MEDIEVAL trunk.weapon+
	else
		($ "Il mercante di asce si muove troppo velocemente per il suo aspetto. In un attimo, impugna unenorme ascia medievale in una mano ammantata " .. Thegroup .. " e troppo spaventato per continuare il tentativo di rapina." $) cyoa-text! badfx morale3-all
	then aholeREV
;
cyoa-choice: trade-axe-coolit
	cpet? if
		($ cname .. " scoreggia un peto particolarmente rumoroso." $)
	else
		($ cname .. " vai a casa vecchio ubriacone Non hai soldi per comprare unascia da me " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it++
	($ "	In italian Il mercante delle asce non sembra reagire." .. "....." rbold .. "
	" .. cname .. "  non ha idea se " .. che .. "  e stato sentito o meno." $) 
	+crtext attitudeREV witsREV 0.3 600 tone
;

cyoa-choice: trade-axe-4
	($ Thegroup .. "  acquista il " .. "ASCIA MEDIEVALE" rbold .. ". Questa cosa e davvero pesante e lenta. Spesso puo tagliare in due 3 zombi contemporaneamente! Dallo a qualcuno forte e in forma." $) cyoa-text! goodfx
	1 WEAPON_MEDIEVAL trunk.weapon+ -25 trunk-food+ someicon
;

cyoa-choice: trade-axe-3
	($ Thegroup .. "  compra una chitarra a forma di ascia. Sarebbe unarma stilosa." $) cyoa-text! goodfx
	1 WEAPON_GUITAR trunk.weapon+ -10 trunk-food+ someicon
;

cyoa-choice: trade-axe-2
	($ Thegroup .. " ' compra un'ascia dei pompieri. Si chiama cosi perche era quello che usavano i pompieri per fare a pezzi gli zombi." $) cyoa-text! goodfx
	1 WEAPON_FIRE trunk.weapon+ -6 trunk-food+ someicon
;

cyoa-choice: trade-axe-1
	($ Thegroup .. " ' compra un'accetta. E la piu piccola delle asce." $) cyoa-text! goodfx
	1 WEAPON_HATCHET trunk.weapon+ -3 trunk-food+ someicon 
;

cyoa: trade-axe
	"Mercante di Asce" cyoa-title!
	($ Thegroup .. " ' incontra una strana figura che avanza barcollando lungo la strada. Indossa un mantello con cappuccio e trascina un carretto pieno di diversi tipi di asce.	" .. "I sell axes... Just axes..." rbold $) cyoa-text!
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  deruba il mercante" )choice: trade-axe-rob
	then
	most-grating if 
		charchoice( "  gli dice di CALMARSI" fcoolit )choice: trade-axe-coolit
	then
	trunk-food 3 < if
		($ "'Non c'e abbastanza cibo per comprare qualcosa! Come consolazione il mercante da " .. thegroup .. "  una mazza da hockey, che immagino abbia la forma di unascia." $) +crtext goodfx 1 WEAPON_HOCKEY trunk.weapon+
	else 0.3 600 tone
		trunk-food 24 > if
			choice( "Ascia medievale per 25 cibo" )choice: trade-axe-4
		then
		trunk-food 9 > if
			choice( "Chitarra elettrica per 10 cibo" )choice: trade-axe-3
		then
		trunk-food 5 > if
			choice( "Ascia antincendio per 6 cibo" )choice: trade-axe-2
		then
		trunk-food 2 > if
			choice( "Ascia per 3 cibo" )choice: trade-axe-1
		then
	then
;

// General Firearms, with ability to unlock a secret super shop

cyoa-choice: trade-firearms-80
	($ Thegroup .. " ' acquista un lanciafiamme. I commercianti non dicono dove lo hanno preso. Cerca di non darti fuoco con questo!" $) cyoa-text! basic-tone
	1 WEAPON_FLAMETHROWER trunk.weapon+ -40 trunk-food+ charm-gas
;

cyoa-choice: trade-firearms-40
	($ Thegroup .. " ' acquista un fucile a pompa automatico. ORA stiamo parlando! Sei a posto finche non esaurisci i proiettili." $) cyoa-text! basic-tone
	1 WEAPON_AUTOSHOT trunk.weapon+ -25 trunk-food+ charm-rifle-shell
;

cyoa-choice: trade-firearms-30
	($ Thegroup .. "  acquista un fucile dassalto. Chiunque lo usi ha bisogno di molta abilita nel tiro per maneggiarlo correttamente!" $) cyoa-text! basic-tone
	1 WEAPON_AK47 trunk.weapon+ -20 trunk-food+ charm-bullet
;

cyoa-choice: trade-firearms-20
	($ Thegroup .. "  acquista un uzi. Ottimo per spruzzare proiettili OVUNQUE. Anche qualcuno di bravo con le armi avra problemi a gestirlo." $) cyoa-text! basic-tone
	1 WEAPON_UZI trunk.weapon+ -10 trunk-food+ charm-bullet
;

cyoa: trade-firearms-mega 

	($ "I commercianti decidono di mostrare " .. thegroup .. "  LA BUONA ROBA." $) cyoa-text! goodfx
	choice( "Vai via" )choice
	trunk-food 39 > if
		choice( "Lanciafiamme per 40 cibo" )choice: trade-firearms-80
	then
	trunk-food 24 > if
		choice( "Fucile automatico per 25 cibo" )choice: trade-firearms-40
	then
	trunk-food 19 > if
		choice( "Fucile dassalto per 20 cibo" )choice: trade-firearms-30
	then
	trunk-food 9 > if
		choice( "Uzi per 10 cibo" )choice: trade-firearms-20
	then
;

cyoa-choice: trade-firearms-15
	($ Thegroup .. "  acquista un fucile a pompa. Che scelta classica! Questa arma e buona nelle mani di quasi tutti." $) cyoa-text! basic-tone
	1 WEAPON_SHOTGUN trunk.weapon+ -5 trunk-food+ charm-shotgun-shell
;

cyoa-choice: trade-firearms-10
	($ Thegroup .. "  compra un fucile da cowboy. Proprio come quello usato dai cowboy. Nelle mani giuste potrebbe fare davvero un buon lavoro." $) cyoa-text! basic-tone
	1 WEAPON_RIFLE trunk.weapon+ -5 trunk-food+ charm-rifle-shell
;

cyoa-choice: trade-firearms-5
	($ Thegroup .. "  compra un revolver. Nelle mani giuste, potrebbe consentire a qualcuno che usa proiettili economici di fare molti danni agli zombie." $) cyoa-text! basic-tone
	1 WEAPON_DOLT trunk.weapon+ -5 trunk-food+ charm-bullet
;

cyoa-choice: trade-firearms-1
	($ Thegroup .. "  compra una pistola. Era molto economica, ma e lo stesso tipo che si puo trovare ovunque." $) cyoa-text! basic-tone
	1 WEAPON_PISTOL trunk.weapon+ -1 trunk-food+ charm-bullet
;

cyoa: trade-firearms
	"Mobile Gun Show" cyoa-title!
	($ Thegroup .. "  trova una grande banda di sopravvissuti in viaggio. Stanno scambiando armi da fuoco, anche se la selezione sembra roba abbastanza comune." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	shootest-pass trunk-food 9 > and if
		shootest charchoice( "  richiede di vedere la roba buona" )choice: trade-firearms-mega
	then
	trunk-food 1 < if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 4 > if
			choice( "Fucile a pompa per 5 cibo" )choice: trade-firearms-15
		then
		trunk-food 4 > if
			choice( "Fucile da cowboy per 5 cibo" )choice: trade-firearms-10
		then
		trunk-food 4 > if
			choice( "Revolver per 5 cibo" )choice: trade-firearms-5
		then
		choice( "Pistola per 1 cibo" )choice: trade-firearms-1

	then
;

// Pipebomb dude

cyoa-choice: trade-pipebomb-rob 
	($ "'Al primo barlume di guai, il commerciante apre il cappotto per rivelare che e coperto di bombe a tubo. Con un rapido movimento, accende una miccia su una di esse." .. cname .. "  e proprio accanto a lui, e ha appena il tempo di pentirsi profondamente di tutta la rapina." $) cyoa-text! bitefx
		rob-megafail aholeREV
;
cyoa-choice: trade-pipebomb-coolit
	cpet? if
		($ cname .. "  scoreggia davvero forte al ragazzo della bomba a tubo." $)
	else
		($ cname .. "  dice al ragazzo della bomba a tubo di " .. "CALMARSI." pbold $)
	then cyoa-text!
	cool-it-7 if
		($ "Lui interpreta questo come " .. cname .. "  giocando duro con il commercio.	" .. "NO! PRENDI LE MIE BOMBE! CAMPIONI GRATUITI!" pbold .. "		Lui da " .. chim .. " ' 25 bombe a tubo! E una quantita enorme!" $) goodfx
		25 WEAPON_PIPEBOMB trunk.weapon+ cooled-it
	else cool-it++
		($ "TI CALMI! TI CALMI!!" pbold .. "		Lumore si fa piuttosto teso con il ragazzo che vende esplosivi, quindi " .. thegroup .. " foglie." $) badfx
	then +crtext attitudeREV witsREV
;
: charm-pipebomb
	most-charming if
		choosechar ($ "  Il commerciante da " .. cname .. " ' una bomba a tubo in piu in un tentativo estremamente imbarazzante di flirtare o di essere amichevole. E difficile dirlo con certezza." $) +cr +text 1 WEAPON_PIPEBOMB trunk.weapon+
	then
;
cyoa-choice: trade-pipebomb-20
	($ Thegroup .. "  compra 8 bombe a tubo." $) cyoa-text! basic-tone
	8 WEAPON_PIPEBOMB trunk.weapon+ -15 trunk-food+ charm-pipebomb someicon
;

cyoa-choice: trade-pipebomb-10
	($ Thegroup .. "  compra 5 bombe a tubo." $) cyoa-text! basic-tone
	5 WEAPON_PIPEBOMB trunk.weapon+ -10 trunk-food+ charm-pipebomb someicon
;

cyoa-choice: trade-pipebomb-5
	($ Thegroup .. "  compra 2 bombe a tubo." $) cyoa-text! basic-tone
	2 WEAPON_PIPEBOMB trunk.weapon+ -5 trunk-food+ charm-pipebomb someicon
;

cyoa: trade-pipebomb
	"Fornitore di bombe a tubo" cyoa-title!
	($ Thegroup .. " ' trova un uomo nervoso che vende bombe artigianali. Indossa un cappotto voluminoso con dei grumi che sporgono da sotto.	" .. "ACQUISTA LE MIE BOMBE!" pbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-pipebomb-rob
	then
	most-grating if 
		charchoice( "  gli dice di CALMARSI" fcoolit )choice: trade-pipebomb-coolit
	then
	trunk-food 5 < if
		($ "'Purtroppo non c'e abbastanza cibo rimasto per il commercio, anche se regala un pipebomb gratis!" $) +cr +text
		1 WEAPON_PIPEBOMB trunk.weapon+
	else
		trunk-food 14 > if
			choice( "8 pipebomb per 15 cibo" )choice: trade-pipebomb-20
		then
		trunk-food 9 > if
			choice( "5 pipebomb per 10 cibo" )choice: trade-pipebomb-10
		then
		trunk-food 4 > if
			choice( "2 pipebomb per 5 cibo" )choice: trade-pipebomb-5
		then
	then
;

// Anime merchant

cyoa-choice: trade-anime-rob 
	70 %chance if
		($ cname .. " deruba il commerciante di alcune spade e shuriken, ma nel frattempo rompe degli anime perfettamente utilizzabili " $) cyoa-text! goodfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		5 WEAPON_SHURIKEN trunk.weapon+ 4 WEAPON_OTAKU trunk.weapon+ rob-guilt
	else
		($ Thegroup .. " 'viene sventato quando il commerciante chiude le saracinesche blindate del camion e poi se ne va." $) cyoa-text! badfx morale--all
	then aholeREV
;
: charm-anime
	most-charming if
		choosechar ($ "  Il commerciante da " .. cname .. " una katana extra." .. "OFFERTA PROMOZIONALE, SOLO PER TE! *OCCHIOLINO*" pbold $) 
		+cr +text 1 WEAPON_OTAKU trunk.weapon+
	then
;
cyoa-choice: trade-anime-20
	($ Thegroup .. " acquista una gigantesca stella ninja." .. "QUESTA E LA WINDSTAR UFFICIALE UTILIZZATA NELLA VERSIONE LIVE ACTION DELLANIME WINDSTAR!! OTTIMA SCELTA!" pbold $) cyoa-text! basic-tone
	1 WEAPON_WINDSTAR trunk.weapon+ -15 trunk-food+ charm-anime
;
: trade-anime-roll 
	dup .cwits+ if .morale-- else .morale3+ then 
;
cyoa-choice: trade-anime-10
	($ Thegroup .. " buys an anime figurine. It seems really expensive...
	" .. "POSSO DIRE CHE HAI GUSTI RAFFINATI!" pbold $) cyoa-text! basic-tone
	' trade-anime-roll foreach-team-char -10 trunk-food+ charm-anime
;

cyoa-choice: trade-anime-5
	($ Thegroup .. " acquista 4 katane." .. "ABBASTANZA PER UN INTERO GRUPPO! TAGLIA QUALSIASI COSA!" pbold $) cyoa-text! basic-tone
	4 WEAPON_OTAKU trunk.weapon+ -5 trunk-food+ charm-anime
;

cyoa-choice: trade-anime-1
	($ Thegroup .. " acquista 5 Shuriken." .. "OFFERTA INCREDIBILE!" pbold $) cyoa-text! basic-tone
	5 WEAPON_SHURIKEN trunk.weapon+ -1 trunk-food+ charm-anime
;
cyoa-choice: trade-anime-coolit
	cpet? if
		($ cname .. "  distrugge alcuni anime, come protesta contro lesistenza stessa degli anime. Il commerciante di anime riceve il messaggio." $)
	else
		($ cname .. "  dice al commerciante di anime di " .. "'CALMATI. INOLTRE, GLI ANIME NON SONO REALI!" pbold $) then cyoa-text!
	cool-it++
		($ "Non ce modo che possa prenderla bene." .. "NO! YOU'RE WRONG! STOP IT! NOooooooo!" rbold .. "'		Va al posto di guida e poi parte con rabbia e confusione." $) badfx +crtext attitudeREV witsREV
;
cyoa: trade-anime
	"Lultima vendita di anime" cyoa-title!
	($ Thegroup .. "  trova un uomo che vende anime e accessori per anime da un camioncino blindato convertito." .. "STO FACENDO LA MIA PARTE PER MANTENERE UNITA LA CIVILTA, UNA VENDITA DI ANIME ALLA VOLTA" pbold $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-anime-rob
	then
	most-grating if 
		charchoice( "  gli dice di CALMARSI" fcoolit )choice: trade-anime-coolit
	then
	trunk-food 1 < if
		($ "'Purtroppo, non c'e abbastanza cibo rimasto per fare trading, anche se regala uno shuriken gratuito come souvenir." $) +cr +text
		1 WEAPON_SHURIKEN trunk.weapon+
	else
		trunk-food 14 > if
			choice( "Windstar per 15 cibi" )choice: trade-anime-20
		then
		trunk-food 9 > if
			choice( "Figurina anime per 10 cibi" )choice: trade-anime-10
		then
		trunk-food 4 > if
			choice( "4 Katane per 5 cibi" )choice: trade-anime-5
		then
		choice( "5 Shuriken per 1 cibo" )choice: trade-anime-1
	then
;

// Gas

cyoa-choice: trade-gas-rob 
	75 %chance if
		($ cname .. "  ruba il mercante di gas, con molta attenzione. " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		80 120 rnd trunk-gas+ rob-guilt
	else
		($ Thegroup .. " ' ruba il gas mentre il mercante scappa.		Si scopre che la maggior parte del gas era mescolato con qualcosa che ha distrutto il motore dell'auto." $) cyoa-text! badfx car-break 40 trunk-gas+
	then aholeREV
;

cyoa-choice: trade-gas-5
	($ Thegroup .. "  scambia 5 cibi con 50 unita di gas." $) cyoa-text! basic-tone
	food-5-to-gas
;

cyoa-choice: trade-gas-10
	($ Thegroup .. "  scambia 10 cibi con 100 unita di gas." $) cyoa-text! basic-tone
	food-10-to-gas
;

cyoa-choice: trade-gas-15
	($ Thegroup .. "  scambia 15 cibi con 150 unita di gas." $) cyoa-text! basic-tone
	food-15-to-gas
;

cyoa-choice: trade-gas-all
	($ Thegroup .. "  scambia " .. ghis .. "  cibo rimanente per gas." $) cyoa-text! basic-tone
	food-all-to-gas
;

cyoa: trade-gas
	"Gas in vendita" cyoa-title!
	someicon	
	($ Thegroup .. "  trova un uomo seduto vicino a un camion arrugginito. Il camion e pieno di serbatoi di gas e stracci unti. Sia luomo che il camion puzzano di benzina.	Si offre di vendere 10 unita di gas in cambio di ogni alimento che riceve." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	// Possibly replace some with weaselest-pass if weaselest
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-gas-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-gas-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-gas-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-gas-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-gas-all
		then
	then
;

// Bullets

cyoa-choice: trade-bullet-rob 
	cicon
	70 %chance if
		($ cname .. "  ruba allo spazzino i suoi proiettili extra. " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		70 100 rnd trunk-bullet+ rob-guilt
	else
		($ Thegroup .. "''s tentato furto finisce in un fallimento quando si scopre che il raccoglitore mentiva sul non usare pistole. E stata molto veloce a estrarla." $) cyoa-text! bitefx
		rob-fail
	then aholeREV
;

cyoa-choice: trade-bullet-5
	($ Thegroup .. " scambia 5 cibi per 40 proiettili." $) cyoa-text! basic-tone
	food-5-to-bullet someicon
;

cyoa-choice: trade-bullet-10
	($ Thegroup .. " scambia 10 cibi per 80 proiettili." $) cyoa-text! basic-tone
	food-10-to-bullet someicon
;

cyoa-choice: trade-bullet-15
	($ Thegroup .. " scambia 15 cibi per 120 proiettili." $) cyoa-text! basic-tone
	food-15-to-bullet someicon
;

cyoa-choice: trade-bullet-all
	($ Thegroup .. "  scambia " .. ghis .. " rimanente cibo per proiettili." $) cyoa-text! basic-tone
	food-all-to-bullet someicon
;

cyoa: trade-bullet
	"Eccedenza di proiettili" cyoa-title!
	($ Thegroup .. " parla con un amichevole raccoglitore. Dice di aver trovato un sacco di proiettili extra. Dice di non usare pistole a causa di come gli spari agitano gli zombi. Offre 8 proiettili in cambio di ogni oggetto alimentare che riceve." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-bullet-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-bullet-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-bullet-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-bullet-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-bullet-all
		then
	then
;

// Shotgun Shells

cyoa-choice: trade-shotgun-shell-rob 
	65 %chance if
		($ cname .. " deruba il mercante di cartucce per fucile " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		40 60 rnd trunk-shotgun-shell+ rob-guilt
	else
		($ cname .. " non riesce neanche a finire la " .. chis .. " frase prima che il mercante estragga un fucile e inizi a sparare." $) cyoa-text! bitefx
		rob-fail
	then aholeREV
;

cyoa-choice: trade-shotgun-shell-5
	($ Thegroup .. " scambia 5 cibi per 25 cartucce per fucile." $) cyoa-text! basic-tone
	food-5-to-shotgun-shell
;

cyoa-choice: trade-shotgun-shell-10
	($ Thegroup .. " scambia 10 cibi per 50 cartucce per fucile." $) cyoa-text! basic-tone
	food-10-to-shotgun-shell
;

cyoa-choice: trade-shotgun-shell-15
	($ Thegroup .. " scambia 15 cibi per 75 cartucce per fucile." $) cyoa-text! basic-tone
	food-15-to-shotgun-shell
;

cyoa-choice: trade-shotgun-shell-all
	($ Thegroup .. "  scambia " .. ghis .. " rimanente cibo per cartucce per fucile." $) cyoa-text! basic-tone
	food-all-to-shotgun-shell
;

cyoa: trade-shotgun-shell
	"Porta Cartucce Fucile" cyoa-title! someicon
	($ Thegroup .. " gruff is not in the Italian text. " .. "LIMONATA" pbold .. "  e stato depennato dal suo cartello con " .. "CARTUCCE DA FUCILE" rbold .. "  scritto dentro. Offre di vendere 5 cartucce da fucile in cambio di ogni cibo che gli darai." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-shotgun-shell-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-shotgun-shell-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-shotgun-shell-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-shotgun-shell-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-shotgun-shell-all
		then
	then
;

// Rifle Shells

cyoa-choice: trade-rifle-shell-rob 
	60 %chance if
		($ cname .. "  rapinare il venditore di munizioni per fucile. " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		50 80 rnd trunk-rifle-shell+ rob-guilt
	else
		($ Thegroup .. "il tentativo di rapina finisce in un fallimento quando si scopre che il venditore ha anche due fucili d'assalto carichi. Li spara selvaggiamente, uno in ogni mano, sparando munizioni ovunque." $) cyoa-text! bitefx
		rob-fail
	then aholeREV
;

cyoa-choice: trade-rifle-shell-5
	($ Thegroup .. "  scambia 5 cibi per 30 munizioni per fucile." $) cyoa-text! basic-tone
	food-5-to-rifle-shell someicon
;

cyoa-choice: trade-rifle-shell-10
	($ Thegroup .. "  scambia 10 cibi per 60 munizioni per fucile." $) cyoa-text! basic-tone
	food-10-to-rifle-shell someicon
;

cyoa-choice: trade-rifle-shell-15
	($ Thegroup .. "  scambia 15 cibi per 90 munizioni per fucile." $) cyoa-text! basic-tone
	food-15-to-rifle-shell someicon
;

cyoa-choice: trade-rifle-shell-all
	($ Thegroup .. "  scambia " .. ghis .. "  cibo rimanente per munizioni per fucile." $) cyoa-text! basic-tone
	food-all-to-rifle-shell someicon
;

cyoa: trade-rifle-shell
	"Venditore di munizioni per fucile" cyoa-title!
	($ Thegroup .. "  incontra qualcuno che vende munizioni extra per fucile. Dice che ha ottenuto un grande surplus perche mira con attenzione, spesso uccidendo piu zombi in un colpo solo. Offre di dare 6 munizioni per fucile per ogni cibo che ottiene." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-rifle-shell-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-rifle-shell-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-rifle-shell-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-rifle-shell-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-rifle-shell-all
		then
	then
;

// Medicine

cyoa-choice: trade-medical-rob 
	70 %chance if
		($ cname .. "  rapinare il venditore di medicine, anche se alcune forniture vengono rovinate nel processo. " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		6 12 rnd trunk-medical+ rob-guilt
	else
		($ Thegroup .. "  rapinare il commerciante ma poi si rende conto che tutto era solo una medicina per gatti." $) cyoa-text! badfx
		' .morale2- foreach-team-char
	then aholeREV
;

cyoa-choice: trade-medical-5
	($ Thegroup .. "  scambia 5 cibi per 5 forniture mediche." $) cyoa-text! basic-tone
	food-5-to-medical
;

cyoa-choice: trade-medical-10
	($ Thegroup .. " 10 cibo per 10 medicinali." $) cyoa-text! basic-tone
	food-10-to-medical
;

cyoa-choice: trade-medical-15
	($ Thegroup .. " 15 food for 15 medical supplies." $) cyoa-text! basic-tone
	food-15-to-medical
;

cyoa-choice: trade-medical-all
	($ Thegroup .. " baratta il cibo rimanente per forniture mediche." $) cyoa-text! basic-tone
	food-all-to-medical
;

cyoa: trade-medical
	"Venditore di medicine" cyoa-title! someicon
	($ Thegroup .. " " $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapisce il commerciante" )choice: trade-medical-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-medical-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-medical-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-medical-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-medical-all
		then
	then
;

// Healing

cyoa-choice: trade-groupheal-rob 
	50 %chance if
		($ cname .. " ruba l'ospedale, sopraffacendo i difensori prima che si rendano conto di cosa sta succedendo. Bravo. " $) cyoa-text! badfx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		10 16 rnd trunk-medical+ rob-guilt2
	else
		($ Thegroup .. "  prova a derubare lospedale. I suoi numerosi difensori dimostrano proprio come sia riuscito a sopravvivere finora." $) cyoa-text! bitefx rob-fail
	then aholeREV
;

: trade-groupheal-guy
	cchar damage 0 = if
		($ cname .. " ' riceve un check up, ma non c'e niente che non va con " .. chim .. "." $)
	else
		($ cname .. "  riceve cure per " .. chis .. " italiano" $) 
	then cchar .fullheal
;

cyoa-choice: trade-groupheal-heal
	trade-groupheal-guy
	cyoa-text! goodfx
	-6 trunk-food+
;

cyoa-choice: trade-groupheal-group
	
	team-damage 0 = if
		($ Thegroup .. " ' riceve un check up, ma non c'e niente che non va in loro." $) cyoa-text!
	else
		7 groupheal
		($ Thegroup .. "  riceve cure per " $) cyoa-text!
		team-damage 1 < if 
			"tutti" +text 
		else
			"maggior parte" +text
		then
			"  delle loro ferite." +text
	then
	goodfx
	-15 trunk-food+
;

: trade-groupheal-give
	cyoa-start
	solo if
		soloer choosechar trade-groupheal-heal
	then;
	"Chi dovrebbe ricevere il trattamento?" cyoa-text!
	' trade-groupheal-heal cyoa-team-choice
;

cyoa-choice: trade-groupheal-charm 
	charmroll if
		($ cname .. "  convince lo staff dellospedale a offrire i propri servizi gratuitamente!		" .. cHe .. "''s solo cosi affascinante." $) cyoa-text! goodfx
		trade-groupheal-guy +crtext
	else
		($ cname .. "  accidentalmente sembra solo inquietante. 		" .. gHe .. "  viene invitato a lasciare lospedale e a non tornare mai piu." $) cyoa-text! badfx
	then
;

cyoa: trade-groupheal
	"Ospedale funzionale" cyoa-title! someicon
	($ Thegroup .. " ' trova un insediamento costruito in un ospedale. Le luci sono ancora accese, ci sono ancora alcuni dottori e sono ancora aperti per gli affari! Offrono assistenza sanitaria in cambio di cibo. 10 cibo per un trattamento completo." $) cyoa-text! basic-tone
	trunk-food 6 < if
		($ "'Purtroppo, non c'e abbastanza cibo per i loro servizi." $) +cr +text
	else
		choice( "Dai 6 cibo per il trattamento" )choice: trade-groupheal-give
		trunk-food 14 > notsolo and if
			choice( "Dare 15 cibi per cura di gruppo" )choice: trade-groupheal-group
		then
	then
		most-charming if
			charchoice( "  usa il fascino" )choice: trade-groupheal-charm
		then
		most-ahole if
			charchoice( "  ruba lospedale" )choice: trade-groupheal-rob
		then
		choice( "Vai via" )choice
;

// All Ammo

cyoa-choice: trade-allammo-rob 
	60 %chance if
		($ cname .. "  ruba parte della cache di munizioni, ma non senza una grossa lotta. " $) cyoa-text! bitefx
		notsolo if
			($ Theothersare .. " viene trascinato dentro di esso." $) +text
		then
		50 60 rnd trunk-bullet+ 20 30 rnd trunk-shotgun-shell+ 30 40 rnd trunk-rifle-shell+ rob-fail
	else
		($ Thegroup .. "  si e rivelata una scelta davvero pessima. Le guardie non sono felici." $) cyoa-text! bitefx
		rob-megafail
	then aholeREV
;

cyoa-choice: trade-allammo-5
	($ Thegroup .. "  scambia 5 cibi per un po di munizioni." $) cyoa-text! basic-tone
	food-5-to-allammo someicon
;

cyoa-choice: trade-allammo-10
	($ Thegroup .. "  scambia 10 cibi per un mucchio di munizioni." $) cyoa-text! basic-tone
	food-10-to-allammo someicon
;

cyoa-choice: trade-allammo-15
	($ Thegroup .. "  scambia 15 cibi per un assortimento di munizioni." $) cyoa-text! basic-tone
	food-15-to-allammo someicon
;

cyoa-choice: trade-allammo-all
	($ Thegroup .. "  scambia " .. ghis .. "  cibo rimanente per alcune munizioni." $) cyoa-text! basic-tone
	food-all-to-allammo someicon
;

cyoa: trade-allammo
	"Emporio di munizioni" cyoa-title!
	($ Thegroup .. "  trova un mercante grassoccio in un negozio barricato pieno di munizioni. E circondata da guardie." .. "	BENVENUTI ALLEMPORIO DI MUNIZIONI! TUTTO DEVE ANDARE!" pbold .. "	Offre 5 proiettili, 4 munizioni per fucile e 3 cartucce per fucile a pompa in cambio di ogni cibo che riceve." $) cyoa-text! basic-tone
	choice( "Vai via" )choice
	most-ahole if
		charchoice( "  rapinare il negozio" )choice: trade-allammo-rob
	then
	trunk-food 0 = if
		($ "'Purtroppo, non c'e abbastanza cibo per fare scambi." $) +cr +text
	else
		trunk-food 14 > if
			choice( "Scambia 15 cibi" )choice: trade-allammo-15
		then
		trunk-food 9 > trunk-food and if
			choice( "Scambia 10 cibi" )choice: trade-allammo-10
		then
		trunk-food 4 > if
			choice( "Scambia 5 cibi" )choice: trade-allammo-5
		else	
			choice( "Scambia " .. trunk-food .. " cibo" )choice: trade-allammo-all
		then
	then
;

} }



