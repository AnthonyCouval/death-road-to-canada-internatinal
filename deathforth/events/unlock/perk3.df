gstats{

: perk3-upgradetally
	0
	perk-gungineer 1 max +
	perk-fighter 1 max + 
	perk-surgeon 1 max + 
	perk-guncrazy 1 max +
	perk-trademark 1 max +
	perk-naturalshot 1 max +
	perk-archer 1 max +
	perk-pyro 1 max +
;

: perk3-upgradecalc
	// Total number of perks * 3 = possible upgrades
	// Subtract by values of all perks added together with 1 max, floor of 1
	8 3 * perk3-upgradetally -
;

: perk3-unlocktally
	0
	perk-gungineer 0 > if 1 else 0 then +
	perk-fighter 0 > if 1 else 0 then +
	perk-surgeon 0 > if 1 else 0 then +
	perk-guncrazy 0 > if 1 else 0 then +
	perk-trademark 0 > if 1 else 0 then +
	perk-naturalshot 0 > if 1 else 0 then +
	perk-archer 0 > if 1 else 0 then +
	perk-pyro 0 > if 1 else 0 then +
;

: perk3-unlockcalc
	// Total number of perks, subtracted by total number of perks that are above 0
	8 perk3-unlocktally -
;

: perk3-remaining
	perk3-upgradecalc 0 > if ($ " MISES A JOUR RESTANTES : " pbold .. perk3-upgradecalc $) +text then
	perk3-unlockcalc 0 > if ($ " DE BLOQUE: " pbold .. perk3-unlockcalc $) +text then
;

: perk3-stockleft
	perk3-unlockcalc perk3-upgradecalc +
;

}

(*
cyoa: perk3--buy
	"WOO SIGN" cyoa-title!
	"" "corail !" gstats{ perk- } perk-buy! ;
cyoa-blank: perk3-
	"" _COST gstats{ perk- } ' perk3--buy ' perk3back perk-confirm! ;
*)
	
cyoa: perk3-gungineer-buy
	"UNE ARME EST UN PEU COMME UNE PETITE VOITURE DU GENRE." cyoa-title!
	"Marqueur de jeu" "mise a niveau du genie militaire :" gstats{ perk-gungineer } perk-buy! ;
cyoa-blank: perk3-gungineer
	"Marqueur de jeu" GUNGINEER_COST gstats{ perk-gungineer } ' perk3-gungineer-buy ' perk3back perk-confirm! ;

cyoa: perk3-fighter-buy
	"VIEN DE LIVRAISON GRATUITE AVEC UN PIOCHO" cyoa-title!
	"Combattant" "combattant a l'arme blanche" gstats{ perk-fighter } perk-buy! ;
cyoa-blank: perk3-fighter
	"Combattant" FIGHTER_COST gstats{ perk-fighter } ' perk3-fighter-buy ' perk3back perk-confirm! ;

cyoa: perk3-surgeon-buy
	"UNE MAIN STABLE" cyoa-title!
	"Autres" "pense que" gstats{ perk-surgeon } perk-buy! ;
cyoa-blank: perk3-surgeon
	"Autres" SURGEON_COST gstats{ perk-surgeon } ' perk3-surgeon-buy ' perk3back perk-confirm! ;

cyoa: perk3-guncrazy-buy
	"FOU RIEN QUE D'ARMES A FEU" cyoa-title!
	"Collectionneur d'armes a feu" "ce perk vous permet d'avoir une vitesse de tir acceleree et une capacite de" gstats{ perk-guncrazy } perk-buy! ;
cyoa-blank: perk3-guncrazy
	"Collectionneur d'armes a feu" GUNCRAZY_COST gstats{ perk-guncrazy } ' perk3-guncrazy-buy ' perk3back perk-confirm! ;

cyoa: perk3-trademark-buy
	"SALLE FAMILIALE" cyoa-title!
	"Arme de marque deposee" "marque deposee" gstats{ perk-trademark } perk-buy! ;
cyoa-blank: perk3-trademark
	"Arme de marque deposee" TRADEMARK_COST gstats{ perk-trademark } ' perk3-trademark-buy ' perk3back perk-confirm! ;
	
cyoa: perk3-naturalshot-buy
	"DEUX CHOSES LEGITIMES, DEUX CHOSES POUR QUITTER." cyoa-title!
	"Prise naturelle" "tir naturel : augmente de 25 % la vitesse de tir et reduit de 40 % la dispersion des" gstats{ perk-naturalshot } perk-buy! ;
cyoa-blank: perk3-naturalshot
	"Prise naturelle" NATURALSHOT_COST gstats{ perk-naturalshot } ' perk3-naturalshot-buy ' perk3back perk-confirm! ;
	
cyoa: perk3-archer-buy
	"UNE ARME REELLE A FABRIQUER SOI-MEME" cyoa-title!
	"Fabriquer des fleches et un arc long." "ameliorations pour l'archer :" gstats{ perk-archer } perk-buy! ;
cyoa-blank: perk3-archer
	"Fabriquer des fleches et un arc long." ARCHER_COST gstats{ perk-archer } ' perk3-archer-buy ' perk3back perk-confirm! ;
	
cyoa: perk3-pyro-buy
	"LA FLAMME PURIFIANTE" cyoa-title!
	"Pyromane" "perk pyro : c'est un terme utilise dans certains je" gstats{ perk-pyro } perk-buy! ;
cyoa-blank: perk3-pyro
	"Pyromane" PYRO_COST gstats{ perk-pyro } ' perk3-pyro-buy ' perk3back perk-confirm! ;
	
(*
cyoa: perk3-barbarian-buy
	"L'ECLAT GRAND" cyoa-title!
	"Guerrier barbare" "pret pour un" gstats{ perk-barbarian } perk-buy! ;
cyoa-blank: perk3-barbarian
	"Guerrier barbare" BARBARIAN_COST gstats{ perk-barbarian } ' perk3-barbarian-buy ' perk3back perk-confirm! ;

cyoa: perk3-homerun-buy
	"WHAAAAAAAAAAAAAAAAM!" cyoa-title!
	"Champion de coup de circuit" "coup sur de homer" gstats{ perk-homerun } perk-buy! ;
cyoa-blank: perk3-homerun
	"Champion de coup de circuit" HOMERUN_COST gstats{ perk-homerun } ' perk3-homerun-buy ' perk3back perk-confirm! ;

cyoa: perk3-fierce-buy
	"VILLE ASSIEE" cyoa-title!
	"Feroce" "amelioration de vos capacites de combat : fierce" gstats{ perk-fierce } perk-buy! ;
cyoa-blank: perk3-fierce
	"Feroce" FIERCE_COST gstats{ perk-fierce } ' perk3-fierce-buy ' perk3back perk-confirm! ;	
*)
cyoa: perk3-dingus gstats{
	"Perks arme et tir :" cyoa-title!
		
	"When the hordes swarm in
	You need a good weapon near
	..... And lots of ammo
	-- Rambeaux's Haiku" text!
			
	perk3-stockleft 15 < if
		"Zombies rushing in
		As long as you have ammo
		**** Nothing is over ****
		-- Rambeaux's Haiku #2" text!
	then
	
	perk3-stockleft 12 < if
		"Essayez l'arme de marque. ... 		specialiste vous donne un machette. ... 		gourmand vous donne un ciseau a viande." text!
	then
	
	perk3-stockleft 9 < if
		"Forme ta precision au tir. . 		tes tirs perceront plus de zombies. . 		la victoire approche. ." text!
	then
	
	perk3-stockleft 6 < if
		"Les vrais armeaux. . 		sont ceux qui sont dans nos coeurs. . 		" text!
	then
	
	perk3-stockleft 1 < if
	
		"Je n'ai plus de parages a donner. . 		vous savez maintenant tout ce que je peux enseigner. . 		alors allez et surviez. ." text!
	
	then
	
	+cr zpwallet perk3-remaining
	
	choice( "Laissez-le pour le moment" )choice
	
	perk-gungineer 3 < if 
		"Marqueur de jeu" GUNGINEER_COST perk-gungineer zpview ' perk3-gungineer perk-view!
	then	
	perk-surgeon 3 < if 
		"Autres" SURGEON_COST perk-surgeon zpview ' perk3-surgeon perk-view!
	then
	perk-fighter 3 < if 
		"Combattant" FIGHTER_COST perk-fighter zpview ' perk3-fighter perk-view!
	then	
	perk-guncrazy 3 < if 
		"Collectionneur d'armes a feu" GUNCRAZY_COST perk-guncrazy zpview ' perk3-guncrazy perk-view!
	then	
	perk-trademark 3 < if 
		"Arme de marque deposee" TRADEMARK_COST perk-trademark zpview ' perk3-trademark perk-view!
	then
	perk-naturalshot 3 < if 
		"Prise naturelle" NATURALSHOT_COST perk-naturalshot zpview ' perk3-naturalshot perk-view!
	then
	perk-archer 3 < if 
		"Fabriquer des fleches et un arc long." ARCHER_COST perk-archer zpview ' perk3-archer perk-view!
	then
	perk-pyro 3 < if 
		"Pyromane" PYRO_COST perk-pyro zpview ' perk3-pyro perk-view!
	then	
	(*
	perk-barbarian 3 < if 
		"Guerrier barbare" BARBARIAN_COST perk-barbarian zpview ' perk3-barbarian perk-view!
	then	
	perk-homerun 3 < if 
		"Champion de coup de circuit" HOMERUN_COST perk-homerun zpview ' perk3-homerun perk-view!
	then	
	perk-fierce 3 < if 
		"Feroce" FIERCE_COST perk-fierce zpview ' perk3-fierce perk-view!
	then	
	*)
	(*
	perk- 3 < if 
		"" _COST perk- zpview ' perk3- perk-view!
	then	
	*)
	
} ;

' perk3-dingus to perk3back

