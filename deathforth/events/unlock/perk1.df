
gstats{

(* Isn't used
0 stack
	perk-mechanic shove
	perk-healthcare shove
	perk-dogfriend shove
	perk-carnut shove
	perk-explorer shove
	perk-pathfinder
	perk-haggler
	perk-shieldofhope
	// perk1-
constant perk1-perklist

: perk1-totals
	// 0 stack perk1-perklist for i dup print next
	perk1-perklist depths for pops print next drop
; *)

: perk1-upgradetally
	0
	perk-mechanic 1 max +
	perk-healthcare 1 max + 
	perk-dogfriend 1 max + 
	perk-carnut 1 max +
	perk-explorer 1 max +
	perk-pathfinder 1 max +
	perk-haggler 1 max +
	perk-shieldofhope 1 max +
;

: perk1-upgradecalc
	// Total number of perks * 3 = possible upgrades
	// Subtract by values of all perks added together with 1 max, floor of 1
	8 3 * perk1-upgradetally -
;

: perk1-unlocktally
	0
	perk-mechanic 0 > if 1 else 0 then +
	perk-healthcare 0 > if 1 else 0 then +
	perk-dogfriend 0 > if 1 else 0 then +
	perk-carnut 0 > if 1 else 0 then +
	perk-explorer 0 > if 1 else 0 then +
	perk-pathfinder 0 > if 1 else 0 then +
	perk-haggler 0 > if 1 else 0 then +
	perk-shieldofhope 0 > if 1 else 0 then +
;

: perk1-unlockcalc
	// Total number of perks, subtracted by total number of perks that are above 0
	8 perk1-unlocktally -
;

: perk1-remaining
	perk1-upgradecalc 0 > if ($ " '  ACTUALIZACIONES DISPONIBLES: " pbold .. perk1-upgradecalc $) +text then
	perk1-unlockcalc 0 > if ($ " ' DESBLOQUEOS: " pbold .. perk1-unlockcalc $) +text then
;

: perk1-stockleft
	perk1-unlockcalc perk1-upgradecalc +
;

}



// This NPC handles all the perks for support skills, mostly non-combat, with Anime Fan in there for fun

cyoa: perk1-mechanic-buy
	"EL COCHE ES UN SIMBOLO DE ESPERANZA" cyoa-title!
	"Mecanico" "perk-mecanico" gstats{ perk-mechanic } perk-buy! ;
cyoa-blank: perk1-mechanic
	"Mecanico" MECHANIC_COST gstats{ perk-mechanic } ' perk1-mechanic-buy ' perk1back perk-confirm! ;

cyoa: perk1-healthcare-buy
	"NO PUEDO MORIR CON TODA ESTA VENDA!" cyoa-title!
	"Atencion medica" "perk-salud" gstats{ perk-healthcare } perk-buy! ;
cyoa-blank: perk1-healthcare
	"Atencion medica" HEALTHC_COST gstats{ perk-healthcare } ' perk1-healthcare-buy ' perk1back perk-confirm! ;

(*
cyoa: perk1--buy
	"UWA" cyoa-title!
	"" "perk-" gstats{ perk- } perk-buy! ;
cyoa-blank: perk1-
	"" _COST gstats{ perk- } ' perk1--buy ' perk1back perk-confirm! ;
*)

cyoa: perk1-dogfriend-buy
	"CACHORROS PRECIOSOS" cyoa-title!
	"Amigo de Perro" "perk-amigoperro" gstats{ perk-dogfriend } perk-buy! ;
cyoa-blank: perk1-dogfriend
	"Amigo de Perro" DOGPAL_COST gstats{ perk-dogfriend } ' perk1-dogfriend-buy ' perk1back perk-confirm! ;
	
cyoa: perk1-carnut-buy
	"0x0A3E3E3E" cyoa-title!
	"Enamorado de los coches" "perk-carnut" gstats{ perk-carnut } perk-buy! ;
cyoa-blank: perk1-carnut
	"Enamorado de los coches" CARNUT_COST gstats{ perk-carnut } ' perk1-carnut-buy ' perk1back perk-confirm! ;
	
cyoa: perk1-explorer-buy
	"NO STONE LE VA MUDADEADO, NO BANO SIN ABRIR" cyoa-title!
	"Explorador" "perk-explorer" gstats{ perk-explorer } perk-buy! ;
cyoa-blank: perk1-explorer
	"Explorador" EXPLORER_COST gstats{ perk-explorer } ' perk1-explorer-buy ' perk1back perk-confirm! ;

cyoa: perk1-pathfinder-buy
	"UGH, ME DOLAN LAS PIEDADAS" cyoa-title!
	"Explorador" "perk-pathfinder" gstats{ perk-pathfinder } perk-buy! ;
cyoa-blank: perk1-pathfinder
	"Explorador" PATHFINDER_COST gstats{ perk-pathfinder } ' perk1-pathfinder-buy ' perk1back perk-confirm! ;

cyoa: perk1-haggler-buy
	"LIDER DE VENTAS EN EL APOCALIPSIS ZOMBIE" cyoa-title!
	"Vendedor de Primera" "perk-haggle" gstats{ perk-haggler } perk-buy! ;
cyoa-blank: perk1-haggler
	"Vendedor de Primera" HAGGLER_COST gstats{ perk-haggler } ' perk1-haggler-buy ' perk1back perk-confirm! ;

cyoa: perk1-shieldofhope-buy
	"PODER DE LA PENSAMIENTO POSITIVO" cyoa-title!
	"Escudo de la Esperanza" "perk-shieldofhope" gstats{ perk-shieldofhope } perk-buy! ;
cyoa-blank: perk1-shieldofhope
	"Escudo de la Esperanza" SHIELDOFHOPE_COST gstats{ perk-shieldofhope } ' perk1-shieldofhope-buy ' perk1back perk-confirm! ;
	
cyoa: perk1-dingus gstats{
	"Perks de la Mente" cyoa-title!
	
	($ "La debutante esta sosteniendo una tazita de te pequena." .. "Corriendo por todos lados, agitandose, simplemente no tiene GRACIA a ello! Debes usar INTELIGENCIA y CORRESPONDENCIA." pbold .. "ella aplasta la taza de te hasta convertirla en un polvo fino." $) text!
	
	perk1-stockleft 15 < if
		($ "Ya no me quedan tazas de te ahora!  Bueno, puedo conseguir mas despues." pbold .. " Ella hace un gesto de hombros de manera elegante." $) text!
	then
	
	perk1-stockleft 12 < if
		($ "Creo que Explorer esta infravalorado.  Puedes usar su opcion de 'dar una vuelta' mas barata para buscar las mejores ubicaciones, para que te abastezcas bien de suministros!" pbold $) text!
	then
	
	perk1-stockleft 9 < if
		($ "Una de mis estrategias favoritas es enfocarme en las habilidades mecanicas y medicas, y luego llenar mi grupo con escudos de carne utiles!" pbold $) text!
	then
	
	perk1-stockleft 6 < if
		($ "Manten la calma y alerta  Manten tu coche funcionando y a tus escudos de carne curados!" pbold $) text!
	then
	
	perk1-stockleft 1 < if
		($ "No tengo nada mas que ensenarte!  Sigue pensando las cosas y lo lograras!" pbold .. " Ella aplasta una mano llena de polvo fino, y cuando abre las manos se ha convertido en una taza de te." $) text!
	then 
	
	+cr zpwallet perk1-remaining
	
	choice( "Deja esto por ahora" )choice
	
	perk-healthcare 3 < if 
		"ATENCION DE SALUD" HEALTHC_COST perk-healthcare zpview ' perk1-healthcare perk-view!
	then
	perk-mechanic 3 < if 
		"MECANICA" MECHANIC_COST perk-mechanic zpview ' perk1-mechanic perk-view!
	then
	perk-dogfriend 3 < if 
		"Amigo de Perro" DOGPAL_COST perk-dogfriend zpview ' perk1-dogfriend perk-view!
	then
	perk-carnut 3 < if 
		"Enamorado de los coches" CARNUT_COST perk-carnut zpview ' perk1-carnut perk-view!
	then
	perk-explorer 3 < if 
		"Explorador" EXPLORER_COST perk-explorer zpview ' perk1-explorer perk-view!
	then
	perk-pathfinder 3 < if 
		"Explorador" PATHFINDER_COST perk-pathfinder zpview ' perk1-pathfinder perk-view!
	then
	perk-haggler 3 < if 
		"Vendedor de Primera" HAGGLER_COST perk-haggler zpview ' perk1-haggler perk-view!
	then
	perk-shieldofhope 3 < if 
		"Escudo de la Esperanza" SHIELDOFHOPE_COST perk-shieldofhope zpview ' perk1-shieldofhope perk-view!
	then
	(*
	perk- 3 < if 
		"" _COST perk- zpview ' perk1- perk-view!
	then	
	*)
	
} ;

' perk1-dingus to perk1back
