gstats{

: perk2-upgradetally
	0
	perk-athlete 1 max +
	perk-ultrafit 1 max + 
	perk-megabuff 1 max + 
	perk-bruiser 1 max +
	perk-martialartist 1 max +
	perk-exwrestler 1 max +
	perk-hiddenpotential 1 max +
	perk-tstc 1 max +
;

: perk2-upgradecalc
	// Total number of perks * 3 = possible upgrades
	// Subtract by values of all perks added together with 1 max, floor of 1
	8 3 * perk2-upgradetally -
;

: perk2-unlocktally
	0
	perk-athlete 0 > if 1 else 0 then +
	perk-ultrafit 0 > if 1 else 0 then +
	perk-megabuff 0 > if 1 else 0 then +
	perk-bruiser 0 > if 1 else 0 then +
	perk-martialartist 0 > if 1 else 0 then +
	perk-exwrestler 0 > if 1 else 0 then +
	perk-hiddenpotential 0 > if 1 else 0 then +
	perk-tstc 0 > if 1 else 0 then +
;

: perk2-unlockcalc
	// Total number of perks, subtracted by total number of perks that are above 0
	8 perk2-unlocktally -
;

: perk2-remaining
	perk2-upgradecalc 0 > if ($ "  VERBLEIBENDE UPGRADEN: " pbold .. perk2-upgradecalc $) +text then
	perk2-unlockcalc 0 > if ($ " 'OFFNET: " pbold .. perk2-unlockcalc $) +text then
;

: perk2-stockleft
	perk2-unlockcalc perk2-upgradecalc +
;

}

(*
cyoa: perk2--buy
	"'WO" cyoa-title!
	"" "'perk-" gstats{ perk- } perk-buy! ;
cyoa-blank: perk2-
	"" _COST gstats{ perk- } ' perk2--buy ' perk2back perk-confirm! ;
*)

cyoa: perk2-athlete-buy
	"'WARMED UP' wird zu 'aufgewarmt" cyoa-title!
	"'Athlet" "'Perk-Athlet'" gstats{ perk-athlete } perk-buy! ;
cyoa-blank: perk2-athlete
	"'Athlet" ATHLETE_COST gstats{ perk-athlete } ' perk2-athlete-buy ' perk2back perk-confirm! ;
	
cyoa: perk2-ultrafit-buy
	"'TOO FIT TO QUIT' wird zu 'ZU FIT UM AUFZUGEBEN" cyoa-title!
	"'Ultrafit" "'Perk-Ultrafit'" gstats{ perk-ultrafit } perk-buy! ;
cyoa-blank: perk2-ultrafit
	"'Ultrafit" ULTRAFIT_COST gstats{ perk-ultrafit } ' perk2-ultrafit-buy ' perk2back perk-confirm! ;
	
cyoa: perk2-megabuff-buy
	"'Flex'" cyoa-title!
	"'Megabuff" "'Mega-Buff" gstats{ perk-megabuff } perk-buy! ;
cyoa-blank: perk2-megabuff
	"'Megabuff" MEGABUFF_COST gstats{ perk-megabuff } ' perk2-megabuff-buy ' perk2back perk-confirm! ;
	
cyoa: perk2-bruiser-buy
	"'wie ein Lastwagen" cyoa-title!
	"Großer Schlager" "'Bruiser" gstats{ perk-bruiser } perk-buy! ;
cyoa-blank: perk2-bruiser
	"Großer Schlager" BRUISER_COST gstats{ perk-bruiser } ' perk2-bruiser-buy ' perk2back perk-confirm! ;

cyoa: perk2-martialartist-buy
	"'Waffen sind nicht notwendig" cyoa-title!
	"'Kampfkunstler" "'Martial Artist" gstats{ perk-martialartist } perk-buy! ;
cyoa-blank: perk2-martialartist
	"'Kampfkunstler" MARTIALARTIST_COST gstats{ perk-martialartist } ' perk2-martialartist-buy ' perk2back perk-confirm! ;
	
cyoa: perk2-hiddenpotential-buy
	"'Unleashed Potential" cyoa-title!
	"'Verstecktes Potenzial" "'Hidden Potential" gstats{ perk-hiddenpotential } perk-buy! ;
cyoa-blank: perk2-hiddenpotential
	"'Verstecktes Potenzial" HIDDENPOT_COST gstats{ perk-hiddenpotential } ' perk2-hiddenpotential-buy ' perk2back perk-confirm! ;

cyoa: perk2-exwrestler-buy
	"'tragisches Ringer-Ruckgrundgeschichte" cyoa-title!
	"'Ex-Ringer" "'ex-Ringer" gstats{ perk-exwrestler } perk-buy! ;
cyoa-blank: perk2-exwrestler
	"'Ex-Ringer" EXWRESTLER_COST gstats{ perk-exwrestler } ' perk2-exwrestler-buy ' perk2back perk-confirm! ;

cyoa: perk2-tstc-buy
	"'zu*groß*um*zu*steuern" cyoa-title!
	"'T*S*T*C" "'tstc" gstats{ perk-tstc } perk-buy! ;
cyoa-blank: perk2-tstc
	"'T*S*T*C" TSTC_COST gstats{ perk-tstc } ' perk2-tstc-buy ' perk2back perk-confirm! ;
	
(*	
cyoa: perk2--buy
	"'WO" cyoa-title!
	"" "'perk-" gstats{ perk- } perk-buy! ;
cyoa-blank: perk2-
	"" _COST gstats{ perk- } ' perk2--buy ' perk2back perk-confirm! ;
*)
cyoa: perk2-dingus gstats{
	"Leistungsspitzen-Vorteile" cyoa-title!
		
	($ "	//In deutsch: Der letzte Bodybuilder sieht in Gedanken verloren aus." .. "YOU CAN'T RELY ON GUNS TO SURVIVE... THE ONLY GUNS YOU CAN TRULY RELY ON... ARE THESE GUNS
	" pbold .. "T*L*B flexes, GROßE ZEIT" fbold $) text!
	
	perk2-stockleft 15 < if
		($ "0" .. "0x0000000000000000," pbold .. "'T*L*B starrzt sehr ungewohnlich schnell auf!" fbold $) text!
	
	then
	
	perk2-stockleft 12 < if
		($ "'GROßER KAMPFKUNSTLER UND RINGKaMPFER SIND VERY STARK ANFANG DES SPIELS!" pbold .. "'Er unterstreicht mit dem FLEXEN, wenn er ''STARK'' sagt!" fbold $) text!	
	then
	
	perk2-stockleft 9 < if
		($ "'VERBERGTE LEISTUNGSFahIGKEIT KANN ECHT LAUTER ZAHLEN, WENN MAN SCHWERE AUFWANDING UND EIN SCHWERES WAffEN DURCHFUHRT!" pbold .. "'T*L*B flexet etwas mehr!" fbold $) text!	
	then
	
	perk2-stockleft 6 < if
		($ "'ICH LASSE MICH FUR STARK HELDIG SEIN, DAS IST ALLES AUFEINANDER SEHEN!" rbold .. "'T*L*B flexet so hart, dass Rauch aufsteigt!" fbold $) text!	
	then
	
	perk2-stockleft 1 < if
		($ "'ICH BIN AUF STARKE TIPPS VERKAUFEN AUFHOCH!		DU MUSS DEINE AUSBRUCHEN UND IHR TRAINING NACH KANADA FORTSETZEN!" pbold .. "'T*L*B flexet zusatzlich sehr hart, um dir Gluck zu wunschen!" fbold $) text!
	
	then
	
	+cr zpwallet perk2-remaining
	
	choice( "'Gehen Sie fur jetzt" )choice
	
	perk-athlete 3 < if 
		"'Athlet" ATHLETE_COST perk-athlete zpview ' perk2-athlete perk-view!
	then
	perk-ultrafit 3 < if 
		"'Ultrafit" ULTRAFIT_COST perk-ultrafit zpview ' perk2-ultrafit perk-view!
	then
	perk-megabuff 3 < if 
		"'Megabuff" MEGABUFF_COST perk-megabuff zpview ' perk2-megabuff perk-view!
	then
	perk-bruiser 3 < if 
		"Großer Schlager" BRUISER_COST perk-bruiser zpview ' perk2-bruiser perk-view!
	then
	perk-martialartist 3 < if 
		"'Kampfkunstler" MARTIALARTIST_COST perk-martialartist zpview ' perk2-martialartist perk-view!
	then
	perk-hiddenpotential 3 < if 
		"'Verstecktes Potenzial" HIDDENPOT_COST perk-hiddenpotential zpview ' perk2-hiddenpotential perk-view!
	then
	perk-exwrestler 3 < if 
		"'Ex-Ringer" EXWRESTLER_COST perk-exwrestler zpview ' perk2-exwrestler perk-view!
	then
	perk-tstc 3 < if 
		"'T*S*T*C" TSTC_COST perk-tstc zpview ' perk2-tstc perk-view!
	then
	
	(*
	perk- 3 < if 
		"" _COST perk- zpview ' perk2- perk-view!
	then	
	*)
	
} ;

' perk2-dingus to perk2back

