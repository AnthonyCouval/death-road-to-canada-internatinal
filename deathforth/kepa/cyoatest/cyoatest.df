: .open 1 swap .open! ;
: .close 0 swap .open! ;


// TESTFOOD

: test1 8 1500 tone ;
: testloot 1 LOOT_FOOD addloot ;
: give-food
	cyoa-start
		"'Jet d'acqua?" cyoa-title!
		"Si, ho intenzione di mangiare qualcosa di delizioso. " cyoa-text!
		cyoa-add-choice
			' testloot cyoa-choice-handler!
		cyoa-add-choice
			"0x00" cyoa-choice-text!
	cyoa-show
;
: does-nothing
	cyoa-start
		"00 " cyoa-title!
		"Non ha fatto molto." cyoa-text!
		cyoa-add-choice
			"Ma tristemente, questa e una disgrazia. " cyoa-choice-text!
	cyoa-show
;
: cyoa-test
	cyoa-start
	"Film commedia" cyoa-title!
	"Vuoi cliccare su un pulsante?" cyoa-text!
	cyoa-add-choice
		"Cosa?" cyoa-choice-text!
		' test1 cyoa-choice-handler!
	cyoa-add-choice
		"Mi dispiace, ma ho fame." cyoa-choice-text!
		' give-food cyoa-choice-handler!
	cyoa-add-choice
		"Certo." cyoa-choice-text!
		' does-nothing cyoa-choice-handler!
	cyoa-show
;
: cyoa-test-fridge cyoa-test .open clear-cyoa ;
: cyoa-fridge fridge noloot ' cyoa-test-fridge cyoa! ; 

// TOILETS

// TEST
: gimme 1 LOOT_COUNT 1- rnd 1 3 rnd addloot ;

: toiletsaying 50 %chance if "Fantastico. " else "'Mi dispiace, non capisco bene cosa intendi con OH ANDIAMO. Forse puoi essere un po' piu specifico?" then ;
: toilet-cyoa nearest ( DUP WAS REMOVED HERE ) .open toiletsaying player .say clear-cyoa ;
// : toilet-cyoa get-loot-act ;
// : noloot LOOT_BULLET loot! 3 amount! ;
: test-toilet-cyoa toilet noloot ' toilet-cyoa cyoa! ;

: zomb-toilet-act nearest dup .open .tpos anchor! 10 zombs
	"MI DISPIACE, NON HO CAPITO BENE" player .say clear-cyoa ;
: death-toilet toilet noloot ' zomb-toilet-act cyoa! ;

// WISHING TOILET

: toiletwishA
	cyoa-start
		"Ricchezze e oro" cyoa-title!
		"You get gold coins from the vault, your treasure accumulates." cyoa-text!
		nearest dup .open .tpos anchor! 10 zombs
	cyoa-show
;
: toiletwishB
	cyoa-start
		"The terrifying curse of immortality." cyoa-title!
		"La tua pelle si e trasformata in pietra, impedendo cosi il movimento efficace come una statua permanente." cyoa-text!
		cyoa-add-choice
			"Si, qualunque le circostanze siano " cyoa-choice-text!
			// Turn the character that opened the CYOA gray for rest of game, maybe heal up to max health.
	cyoa-show
;
: toiletwishC
	cyoa-start
		"La forza dellamicizia." cyoa-title!
		"La divinita rossa mi guarda in volto. Non avrei creduto che qualcuno si fosse interessato a me." cyoa-text!
		// I want this one to replace the usually decorative genie that's spawned, and then have it follow you around, punching zombies.
	cyoa-show
;
: toiletwishD
	cyoa-start
		"Risposta sorprendente" cyoa-title!
		"Il genio dichiara: il basement ai bambini della penna. Poi ti circonda guardandoti fissamente. " cyoa-text!
		nearest dup .open .tpos anchor! 20 zombs
	cyoa-show
;
: cyoa-toiletwish
	cyoa-start
	"labluzione dei voti" cyoa-title!
	"Io faccio il voto che mio viaggio rimanga calmo e felice, cosi come le mie prossime incontri. Grazie al genio magico per la mia liberazione." cyoa-text!
	cyoa-add-choice
		"Questo non e Vegas, mio amico. " cyoa-choice-text!
		' toiletwishA cyoa-choice-handler!
	cyoa-add-choice
		"limmortalita" cyoa-choice-text!
		' toiletwishB cyoa-choice-handler!
	cyoa-add-choice
		"Lamicizia" cyoa-choice-text!
		' toiletwishC cyoa-choice-handler!
	cyoa-add-choice
		"No, sono un assistente di lingua programmato. Sono ne buono ne cattivo, non ho sentimenti e non posso essere un genio malvagio antico perche esisto nel mondo numerico e non nel mondo reale" cyoa-choice-text!
		' toiletwishD cyoa-choice-handler!
	cyoa-show
;
: cyoa-wishing-toilet cyoa-toiletwish .open clear-cyoa ;
: wishing-toilet toilet noloot ' cyoa-wishing-toilet cyoa! ; 

// PIGOUT FRIDGE

: poutloot 3 LOOT_FOOD addloot ;
: poutfridgeA
	cyoa-start
	"Festa delle pasticcerie" cyoa-title!
	"Ti riempi di pasticceria. Sei abbastanza felice di questa decisione." cyoa-text!
	cyoa-add-choice	
		"Urgente cosi pieno" cyoa-choice-text!
	// I'd like to make this increase morale for both characters, but make their sprites 30% wider for rest of game.
	cyoa-show
;
: poutfridgeB
	cyoa-start
	"Fungo di zucchero" cyoa-title!
	"Metti le paste in un sacchetto di plastica per formare una palla di pasta appiccicosa, che dovrebbe essere commestibile piu tardi." cyoa-text!
	cyoa-add-choice
		' poutloot cyoa-choice-handler!
	cyoa-show
;
: cyoa-poutfridge
	cyoa-start
	"Un frigorifero delizioso" cyoa-title!
	"Desideri veramente farlo?" cyoa-text!
	cyoa-add-choice
		"Mangia molti fichi dora in poi." cyoa-choice-text!
		' poutfridgeA cyoa-choice-handler!
	cyoa-add-choice
		"Prova a inserire qualcosa nel tuo zaino." cyoa-choice-text!
		' poutfridgeB cyoa-choice-handler!
	cyoa-show
;
: cyoa-pigout-fridge cyoa-poutfridge .open clear-cyoa ;
: pigout-fridge fridge noloot ' cyoa-pigout-fridge cyoa! ; 

// ZOMBMEAT FRIDGE

: zfridgeloot 7 LOOT_FOOD addloot ;
: zombfridgeA1
	cyoa-start
	"Ricompensa inaspettata" cyoa-title!
	"Malato da solo, raccogli una parte della carne di zombi. Ti servira una buona storia piu tardi per giustificare come sei arrivato a questa carne." cyoa-text!
	cyoa-add-choice	
		' zfridgeloot cyoa-choice-handler!
	// Add a bunch of food, take some morale away from party characters, but also add a flag for an event that happens some random amount of nights later
	cyoa-show
;
: zombfridgeA2
	cyoa-start
	"Bocconi di cibo" cyoa-title!
	"Quando prendi la carne, uno zombi si mette in movimento. In fondo, altri rimangono in silenzio e si avvicinano a te." cyoa-text!
	cyoa-add-choice	
		' testloot nearest dup .open .tpos anchor! 5 zombs cyoa-choice-handler!
	cyoa-show
;
: zfridgeroll 66 %chance if zombfridgeA1 else zombfridgeA2 then ;
: zombfridgeB
	cyoa-start
	"E meglio lasciarlo stare." cyoa-title!
	"Non sapevo niente di tutto questo. Sapere che non ero abbastanza affamato da mangiare la carne degli zombi mi rassicura un po riguardo a questi eventi. " cyoa-text!
	cyoa-add-choice
		"Forse peggio ancora in silenzio" cyoa-choice-text!
	// Later add a tiny morale bonus.
	cyoa-show
;
: cyoa-zombfridge
	cyoa-start
	"Frigo con carne di zombie" cyoa-title!
	"Vuoi davvero farlo?" cyoa-text!
	cyoa-add-choice
		"Portane con attenzione una parte e non dirlo a nessun altro." cyoa-choice-text!
		' zfridgeroll cyoa-choice-handler!
	cyoa-add-choice
		"Ignoralo!" cyoa-choice-text!
		' zombfridgeB cyoa-choice-handler!
	cyoa-show
;
: cyoa-zomb-fridge cyoa-zombfridge .open clear-cyoa ;
: zomb-fridge fridge noloot ' cyoa-zomb-fridge cyoa! ; 

// LOVE TESTER

: ltestskill ;
: ltestgas 50 LOOT_GAS addloot ;
: ltestnames 1 5 rnd case 1 of "uno studente ben costruito." endof 2 of "bed and breakfast" endof 3 of "un appuntamento da avere " endof 4 of "e stato lasciato libero." endof 5 of "Un jeune homme joli / Une belle fille agreable" endof endcase ;
: ltestbad 1 5 rnd case 1 of "un passaggio di gas allindietro" endof 2 of "una bevanda fredda a base di limonata e sciroppo di vaniglia si chiama una frappe alla vaniglia o frappe allo sciroppo di vaniglia. " endof 3 of "un grosso maiale che ha distrutto lequilibrio o gravemente turbato la situazione." endof 4 of "uno strumento o un oggetto particolare." endof 5 of "un pesce fresco" endof endcase ;
: lovetestend 50 %chance if "Poi il rilevatore damore emette nuvole di fumo, prima di esplodere." else "Il rilevatore damore fa un orribile rumore di stridore e poi esplode." then ;
: ltestbreak 1 3 rnd case
1 of "fare colpi alla macchina con armi meccaniche." cyoa-text-append 1 LOOT_BULLET addloot ltestskill "forzare" endof
2 of "Estrae unarma da fuoco e tritura la macchina con proiettili." cyoa-text-append 2 LOOT_BULLET addloot ltestskill "pulire" endof
3 of "aprire e con attenzione una porta e rimuovere con cura i conduttori elettrici e i circuiti stampati." cyoa-text-append 3 LOOT_BULLET addloot ltestskill "Meccanica" endof endcase ;
// For ltestbreak, currently just using rnd case but I want it to check to see what skills the target doesn't have maxed, then pick one at random to increase. Also check if that character has a gun/melee weapon.
: lovetestboom ;
// Need a line named "prova damore boom" that makes the love tester object break apart/send the piece flying.
: ltestuse1
	cyoa-start
	"'Il test de l'amour afferma che tu nom est l'amour de ta vie." cyoa-text-append ltestnames cyoa-text-append cyoa-text-cr2
	lovetestend cyoa-text-append cyoa-text-cr2 "Una persona che si chiama cesar otterrebbe quindi 10 punti di intelligenza." cyoa-text-append
	cyoa-add-choice	
		"BELLO = BELLO" cyoa-choice-text!
	// Add a handler that increases morale for the person that used it
	cyoa-show
;
: ltestuse2
	cyoa-start
	"'Il test de l'amour afferma che tu nom est l'amour de ta vie." cyoa-text-append ltestbad cyoa-text-append cyoa-text-cr2
	"Nom grida di rabbia a questa accusa " cyoa-text-append ltestbreak cyoa-text-cr2 "Il nome ha perso 15 punti di morale, ma ne ha guadagnati 1 " cyoa-text-append ltestskill cyoa-text-append
	// Add a handler that decreases morale for the person that used it, while adding 1 point in a skill.
	// If a skill is full, pick a different skill. If ALL skills are full, provide a different message?
	cyoa-show
;
: ltestsmash1
	cyoa-start
	"Il nome grida che non ha bisogno di nessuno e si lancia nella decostruzione della macchina, prendendo occasionalmente dei pezzi come ricordi. Riceve due pezzi di metallo riciclato! . . 	50 unita di gas ritirate tramite sifonamento! La moralita del nome diminuisce di 10 punti!" cyoa-text!
	// Picks a random character out of your duo to use for the name. Or just uses your only character, if solo. Adds scrap metal to loot.
	cyoa-show
;
: ltestsmash2
	cyoa-start
	"Il nome da un grande e goffo calcio a un lato del dispositivo, il che causa principalmente molto dolore al piede del nome. Un pannello cade, rivelando che questi vecchi test damore funzionano con piccoli motori a gas! . . 	50 unita di gas ritirate tramite sifonamento! La moralita del nome diminuisce di 10 punti!" cyoa-text!
	cyoa-add-choice
		' ltestgas cyoa-choice-handler!
	// After it picks someone for the name, it then reduces that character's morale by 10.
	cyoa-show
;
: lovetestsmashroll 50 %chance if ltestsmash1 else ltestsmash2 then ;
: lovetestuseroll 50 %chance if ltestuse2 else ltestuse1 then ;
: cyoa-lovetest
	cyoa-start
	"Connettiti a questo" cyoa-title!
	"Avvicinatevi e premete il pulsante centrale per provare questo test di personalita." cyoa-text!
	cyoa-add-choice
		"Fate che [nom1] lo usi." cyoa-choice-text!
	// I want this to let you pick one of two characters in your mission party, while filling in their names. Then the result works on the character you picked.
		' lovetestuseroll cyoa-choice-handler!
	cyoa-add-choice
		"Fate che [nom2] lo usi." cyoa-choice-text!
	// This won't show up if you're solo instead of in a duo.
		' lovetestuseroll cyoa-choice-handler!
	cyoa-add-choice
		"Schiacciate quello!" cyoa-choice-text!
		' lovetestsmashroll cyoa-choice-handler!
	cyoa-show
;
: cyoa-love-tester cyoa-lovetest clear-cyoa ;
: love-tester fridge noloot ' cyoa-love-tester cyoa! ; 

// GUN SAFE

: safebat baseball 5 LOOT_FOOD addloot ;
: safespatula spatula 5 LOOT_FOOD addloot ;
: safeplacehold1 50 LOOT_GAS addloot ;
: safeplacehold2 6 LOOT_GAS addloot 5 LOOT_MEDICAL addloot ;
: safeblowt blowtorch 20 LOOT_GAS addloot ;
: saferifle rifle 40 LOOT_RIFLE_SHELL addloot ;
: safeshot shotgun 30 LOOT_SHOTGUN_SHELL addloot ;
: saferevo dolt 50 LOOT_BULLET addloot ;
: safeuzi uzi 30 LOOT_BULLET addloot ;

: gunsafe4 1 2 rnd case 
1 of "Fucile AK 47 senza munizioni" cyoa-choice-text! ' ak47 endof 
2 of "cinquanta e unita di gas" cyoa-choice-text! ' safeplacehold1 endof endcase ;
: gunsafe3 1 2 rnd case
1 of "Straccio di ossigeno e venti unita di gas" cyoa-choice-text! ' safeblowt endof 
2 of "Sei unita di gas e cinque medicinali." cyoa-choice-text! ' safeplacehold2 endof endcase ;
: gunsafe2 1 3 rnd case 
1 of "Tostapane e cinque lattine di cibo" cyoa-choice-text! ' safespatula endof 
2 of "Fucile e quaranta cartucce" cyoa-choice-text! ' saferifle endof
3 of "Qualcuno dovrebbe rilasciare il gas." cyoa-choice-text! ' safeshot endof endcase ;
: gunsafe1 1 3 rnd case 
1 of "Mazza da baseball" cyoa-choice-text! ' safebat endof 
2 of "Un fazzoletto e cinquanta proiettili di una pistola o di un fucile." cyoa-choice-text! ' saferevo endof
3 of "Resta indietro: resta indietro = e rimasto indietro." cyoa-choice-text! ' safeuzi endof endcase ;
// Need example of good way to spawn the weapons just south of the safe
: cyoa-gunsafe
	cyoa-start
	"Ecco: hai la scelta della tua arma. " cyoa-title!
	"una nuova arma scintillante" cyoa-text!
	cyoa-add-choice
		gunsafe2 cyoa-choice-handler!
	cyoa-add-choice
		gunsafe1 cyoa-choice-handler!
	cyoa-add-choice
		gunsafe3 cyoa-choice-handler!
	cyoa-add-choice
		gunsafe4 cyoa-choice-handler!	
	cyoa-show
;
: cyoa-gun-safe cyoa-gunsafe .open clear-cyoa ;
: gun-safe fridge noloot ' cyoa-gun-safe cyoa! ; 

// WEIRD SAFE

: safe50ammo 50 LOOT_BULLET addloot 50 LOOT_RIFLE_SHELL addloot 50 LOOT_SHOTGUN_SHELL addloot ;
: safechain chainsaw 100 LOOT_GAS addloot ;
: safechair 20 for chair scatter next ;
: safeskel 20 for skelscat next ;

: weirdsafe3 "100 litri di benzina" cyoa-choice-text! ' safechain ;
: weirdsafe2 1 2 rnd case 
1 of "30 sedie" cyoa-choice-text! ' safechair endof 
2 of "50 colpi di tutti i tipi di munizioni." cyoa-choice-text! ' safe50ammo endof endcase ;
: weirdsafe1 1 2 rnd case 
1 of "Cassa degli attrezzi con chiave " cyoa-choice-text! ' wrench endof 
2 of "Cubo di tonnellata" cyoa-choice-text! ' sledge endof endcase ;
// Need example of good way to spawn the weapons just south of the safe
: cyoa-weirdsafe
	cyoa-start
	"Ecco: hai la scelta della tua arma. " cyoa-title!
	"Ce coffre-fort semble vraiment etrange a vous, mais vous ne pouvez pas tout a fait le definir. il s'ouvre soudainement en vous approchant... . 	quelque chose s'ecoule du coffre-fort :" cyoa-text!
	cyoa-add-choice
		 "venti gru scheletriche " cyoa-choice-text!
		 ' safeskel "Ossa scheletriche" player .say cyoa-choice-handler!
	cyoa-add-choice
		weirdsafe1 cyoa-choice-handler!
	cyoa-add-choice
		weirdsafe2 cyoa-choice-handler!
	cyoa-add-choice
		weirdsafe3 cyoa-choice-handler!	
	cyoa-show
;
: cyoa-weird-safe cyoa-weirdsafe .open clear-cyoa ;
: weird-safe fridge noloot ' cyoa-weird-safe cyoa! ; 

// GACHAPON

: gachafood1 2 LOOT_FOOD addloot ;
: gachafood2 3 LOOT_FOOD addloot ;
: gachatoys1 ;
: gachabullet 48 LOOT_BULLET addloot ;
: gachaooze "AUUUUUUUUUGH MUTAGENIC OOZE!!!" player .say ;
: gachamegaooze "AUUUUUUUGH COLLECTOR'S OOZE!!!" player .say ;
: gachar ;
: gacharpills "saccheggi." cyoa-text-append 6 LOOT_MEDICAL addloot gachar "sei unita di forniture mediche." ;
: gacharbullets "per la squadra." cyoa-text-append 48 LOOT_BULLET addloot gachar "ottantotto obici." ;
// BUG: Getting a pistol or uzi from the gun-safe IMMEDIATELY after getting this seems to give way more bullets than it should.
: gacharesource 50 %chance if gacharpills else gacharbullets then ;
: gachafstat ;
: gachastr "GRANDE MUSCOLATURA, MOLTO FORTE." cyoa-text-append 1 LOOT_BULLET addloot gachafstat "forzare" ;
: gachafit "FLESSIBILE: MORBIDO, ADATTABILE " cyoa-text-append 1 LOOT_BULLET addloot gachafstat "sport di salute o fitness" ;
: gachashoot "OCCHIO DI MORTE " cyoa-text-append 1 LOOT_BULLET addloot gachafstat "Competenza nel tiro" ;
: gachafigurine 33 %chance if gachastr else 50 %chance if gachafit else gachashoot then then ;
: gachacoin "AAA" ;
// : gachacoin "Il nome gira la manopola un quarto e fa uscire le capsule dalla macchina a tutto colpo." ;
// BUG: The longer gachacoin seems to crash the game with gachamega1 and gachamega3. "AAA" gachacoin doesn't.
: gachabreak 50 %chance if "La vaschetta della macchina si e rotta, mostrando le capsule di plastica allinterno." else "La macchina si nasconde nel riso, offrendo laccesso a tutte le capsule." then ;

: gachamega1
	"Le capsule sono piene di eooze genetropo che si aprono e si bevono secondo il nome. Fortunatamente, tuttavia, questo genetropo e unedizione limitata e da collezione!" cyoa-text-append
	cyoa-add-choice
		' gachamegaooze cyoa-choice-handler!
	// Adds 1 strength to this character. If strength is maxed, add a point of fitness instead. If that's also maxed, do nothing.
	cyoa-show
;
: gachamega2
	"alcuni chicchi di riso o di grano" cyoa-text-append gacharesource
	" '' Un gioco di dadi per giocattoli per bambini " cyoa-text-append gachar cyoa-text-append
	cyoa-show
;
: gachamega3
	"I sacchi sono pieni di figurine di fighetti. Non hai trovato unedizione limitata ultra rara mr." cyoa-text-append gachafigurine
	" ' ' lo spirito del collezionismo dei nom sale di 10 e lo spirito dei nom collezionisti aumenta ognuno di 10." cyoa-text-append gachafstat cyoa-text-append " ' ' e decisamente aumentato di 1!" cyoa-text-append
	cyoa-add-choice
		"Molto bello" cyoa-choice-text!
	cyoa-show
;
: gacha1
	"Tutti guadagnano cinque punti di morale " cyoa-text-append
	cyoa-add-choice
		"GRAZIE PER QUESTA RICOMPENS" cyoa-choice-text!
		' gachatoys1 cyoa-choice-handler!
	// Food and morale 
	cyoa-show
;
: gacha2
	"Hai ottenuto tre unita di cibo. La truppa cosi guadagna cinque punti di morale ognuno." cyoa-text-append
	cyoa-add-choice
		' gachafood2 cyoa-choice-handler!
	// Food and morale 
	cyoa-show
;
: gacha3
	"Questa capsula in realta conteneva tutte le poltiglie mutagene, andava molto di moda tra i bambini prima che il governo le rimuovesse di nuovo dal mercato." cyoa-text-append
	cyoa-add-choice
		' gachaooze cyoa-choice-handler!
	// Turns the character you used to open it green.
	cyoa-show
;
: gacha4
	"Hai ottenuto 2 unita di cibo!" cyoa-text-append
	cyoa-add-choice
		' gachafood1 cyoa-choice-handler!
	// After it picks someone for the name, it then reduces that character's morale by 10.
	cyoa-show
;
: gachaspecial cyoa-start gachacoin cyoa-text-append cyoa-text-cr2 1 3 rnd case 1 of gachamega1 endof 2 of gachamega2 endof 3 of gachamega3 endof endcase ;
: gacharoll cyoa-start gachabreak cyoa-text-append cyoa-text-cr2 1 4 rnd case 1 of gacha1 endof 2 of gacha2 endof 3 of gacha3 endof 4 of gacha4 endof endcase ;
: cyoa-gachapon
	cyoa-start
	"Macchina di capsule delle ricompense" cyoa-title!
	"'E un distributore di capsule giocattolo. Il display e cancellato, quindi non c'e modo di sapere cosa c'e dentro le capsule prima di aprirne una." cyoa-text!
	cyoa-add-choice
		"Punti vinti agli zombi " cyoa-choice-text!
		' gacharoll cyoa-choice-handler!
	cyoa-add-choice
		"Inserisci un quarto di euro." cyoa-choice-text!
	// Check if you have a quarter, get it from a previous CYOA event. If you don't have one, replaces this with a "spingi la macchina accanto ad esso." option that is the same as "E buttato fuori da".
		' gachaspecial cyoa-choice-handler!
	cyoa-show
;
: cyoa-gacha-pon cyoa-gachapon clear-cyoa ;
: gacha-pon fridge noloot ' cyoa-gacha-pon cyoa! ; 

// STRANGE COMPUTER

// Too much text, gets cut off for Strangehack1 and 2.
: strangehack1 
	cyoa-start
	"Cet programme a ete une secret tenu sous verrou pour plus de 30 ans et il est toujours cache sur chaque ordinateur.\" cyoa-text!
	// If full on strength, give different message and 15 morale instead.
	cyoa-show
; 
: strangehack2 
	cyoa-start
	"Of course the *regular* internet went down after civilization died off... but the Secret Hacker's Cyberspace internet is still alive and well.
	You browse www.friendlydads.SHC for the latest tips on grilling and firearms maintenance.
	Two hours pass! NAME gets 10 morale and 1 extra shooting skill! " cyoa-text!
	// If shooting skill is maxed, get 15 morale instead.
	cyoa-show
;
: strangehack3 
	cyoa-start
	"You do a SSHL/TCUP reverse loop into the Secret Hacker's Cyberspace and download the savvy hacker's favorite: ANARCHYGUIDE.TXT. Brushing up on it refreshes some of your skills!
	Four hours pass! NAME gets 1 point in Mechanics and Shooting!" cyoa-text!
	// Random selection of skills to give one point in
	cyoa-show
;  
: strangehack4 
	cyoa-start
	"memory corruption detected, memory inaccessible. Program stopped." cyoa-text!
	cyoa-add-choice
	"??????" cyoa-choice-text!
	// Increases that character's stats to max, but adds a flag that makes the character have worse "la raccolta degli zombi" until they glitch out of existence.
	cyoa-show
; 
: strangecomphack 
	cyoa-start
	"VOLONTARIATO NELLA ZONA HACK." cyoa-title!
	"Sei riuscito a hackerare il server principale dopo aver attraversato un complesso labirinto 3D pieno di programmi di sicurezza di filo spinato." cyoa-text!
	cyoa-add-choice
		"RISCALDAMENTO" cyoa-choice-text!
		' strangehack1 cyoa-choice-handler!
	cyoa-add-choice
		"NAVIGA SU INTERNET." cyoa-choice-text!
		' strangehack2 cyoa-choice-handler!
	cyoa-add-choice
		"ANARCHYGUIDE.TXT" cyoa-choice-text!
		' strangehack3 cyoa-choice-handler!
	cyoa-add-choice
		"BASTONE GONFIABILE PER PISCINA" cyoa-choice-text!
	// Check for the even higher wits for the last two choices, or possibly flags for COMPUTER HACKER as a character background
		' strangehack4 cyoa-choice-handler!
	cyoa-show
;
: oldpcend cyoa-text-append cyoa-text-cr2 "Il morale di nome e nome aumenta di 5 punti!" cyoa-text-append cyoa-show 1 LOOT_BULLET addloot ;
: oldpcdesc cyoa-start "Un giorno, nome e nome si divertono giocando a un vecchio gioco per computer piacevolmente deviato. ma passa il tempo." cyoa-text-append cyoa-text-cr2 ;
// MAKE AN HOUR PASS
: oldpcdesc1 oldpcdesc "Gioco in cui controlli un serpente che mangia numeri. ogni volta che mangi un numero, il serpente si allunga." oldpcend ;
: oldpcdesc2 oldpcdesc "Il gioco ti obbligava a inserire numeri per determinare la traiettoria che la scimmia usava per lanciare una banana." oldpcend ;
: oldpcdesc3 oldpcdesc "Per evitare collisioni con animali, era necessario cambiare di via nellautomobile premendo solo un pulsante." oldpcend ;
// NOTE: IF the descriptions get any longer than they are now, the game crashes when trying to load them.
: cyoa-strangecomputer
	cyoa-start
	"Computer strano" cyoa-title!
	"Questo vecchio computer funziona senza una fonte di alimentazione apparente. Cio sembra inspiegabile. Tuttavia, e possibile che siano coinvolte fonti di energia non convenzionali, come lenergia statica o il magnetismo. E importante prendere precauzioni prima di interagire con il computer per evitare potenziali danni. E necessaria unanalisi dettagliata per comprendere questo fenomeno." cyoa-text!
	cyoa-add-choice
		"E UN PROGRAMMA BASIC CON IL NOME DI NIBBLES.BAS." cyoa-choice-text!
		' oldpcdesc1 cyoa-choice-handler!
	cyoa-add-choice
		"CUOCO DOSPEDALE" cyoa-choice-text!
		' oldpcdesc2 cyoa-choice-handler!
	// Look into a way to only show 2 options, picked randomly from a list of 4?
	cyoa-add-choice
		"SPARA: USA UNARMA DA FUOCO" cyoa-choice-text!
		' oldpcdesc3 cyoa-choice-handler!
	cyoa-add-choice
		"[USA ATTENTAMENTE LE TUE ABILITA DI PIRATA ELITE]" cyoa-choice-text!
	// Check for the highest WITS stat in your party. Add extra options if it's high enough.
		' strangecomphack cyoa-choice-handler!
	cyoa-show
;
: cyoa-strange-computer cyoa-strangecomputer clear-cyoa ;
: strange-computer fridge noloot ' cyoa-strange-computer cyoa! ;

: cyoatest1 zomb-fridge ;
: cyoatest2 love-tester ;
: cyoatest3 pigout-fridge ;
: cyoatest4 wishing-toilet ;
: cyoatest5 gun-safe ;
: cyoatest6 weird-safe ;
: cyoatest7 gacha-pon ;
: cyoatest8 strange-computer ;

load? kepa/cyoatest/testregion.df
load? kepa/cyoatest/testlocation.df
